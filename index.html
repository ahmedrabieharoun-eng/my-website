<!doctype html>
<html lang="ar">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Ù…Ø´Ø§Ù‡Ø¯Ø© Ø¥Ø¹Ù„Ø§Ù† - Ù…Ø«Ø§Ù„ (id=4102)</title>
  <style>
    body{font-family:Arial,system-ui;direction:rtl;text-align:center;padding:40px}
    button{padding:12px 18px;font-size:16px;border-radius:8px;cursor:pointer}
    #status{margin-top:14px;font-weight:600}
  </style>

  <!-- Ø³ÙƒØ±Ø¨Øª Ø§Ù„Ù…Ø²ÙˆØ¯ (Ø§Ù„Ù…Ø¹Ø±Ù 4102) -->
  <script src="https://ad.gigapub.tech/script?id=4102"></script>
</head>
<body>
  <h2>Ø´Ø§Ù‡Ø¯ Ø¥Ø¹Ù„Ø§Ù† ÙˆØ§ÙƒØ³Ø¨ Ù†Ù‚Ø§Ø·</h2>
  <p>Ø±ØµÙŠØ¯Ùƒ: <span id="balance">0</span> Ù†Ù‚Ø·Ø©</p>
  <button id="watchBtn">Ø´Ø§Ù‡Ø¯ Ø¥Ø¹Ù„Ø§Ù†</button>
  <div id="status"></div>

  <script>
    // Ø±ØµÙŠØ¯ Ù…Ø­Ù„ÙŠ Ø¨Ø³ÙŠØ·
    let balance = Number(localStorage.getItem('balance')||0);
    document.getElementById('balance').textContent = balance;

    const statusEl = document.getElementById('status');
    function setStatus(txt, isErr=false){
      statusEl.textContent = txt;
      statusEl.style.color = isErr ? 'crimson' : 'green';
    }

    // --- fallback Ù„Ù„Ø§Ø®ØªØ¨Ø§Ø± (Ù„Ø§ ØªØ³ØªØ®Ø¯Ù…Ù‡ ÙƒÙ…ØµØ¯Ø± Ù…ÙˆØ«ÙˆÙ‚ Ù„Ù„Ù…ÙƒØ§ÙØ¢Øª Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠØ©) ---
    function fallbackAd(){
      return new Promise(resolve=>{
        setStatus('ØªØ´ØºÙŠÙ„ Ø¥Ø¹Ù„Ø§Ù† Ø¨Ø¯ÙŠÙ„ (ØªØ¬Ø±ÙŠØ¨ÙŠ)...');
        setTimeout(()=> resolve({ rewarded:true, rewardAmount:5, adId:'fb_sim' }), 2200);
      });
    }

    // ÙˆØ¶Ø¹ fallback Ø¹Ø§Ù„Ù…ÙŠ ÙƒÙ…Ø§ ÙÙŠ Ø¯Ù„ÙŠÙ„ Ø§Ù„Ø¯Ù…Ø¬
    window.AdGigaFallback = fallbackAd;
    if (window.showGiga === undefined) {
      window.showGiga = () => window.AdGigaFallback();
    }

    // Ø²Ø± Ù…Ø´Ø§Ù‡Ø¯Ø© Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†
    document.getElementById('watchBtn').addEventListener('click', async () => {
      setStatus('Ø¬Ø§Ø±Ù Ø·Ù„Ø¨ Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†...');
      try {
        if (typeof window.showGiga !== 'function') {
          throw new Error('showGiga ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯');
        }

        const res = await window.showGiga();
        // Ù†ØªÙŠØ¬Ø© Ù…Ù…ÙƒÙ† ØªØ®ØªÙ„Ù Ø­Ø³Ø¨ Ù…Ø²ÙˆØ¯ Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†Ø§ØªØ› Ù‡Ø°Ø§ ØªØ­Ù‚Ù‚ Ø¨Ø³ÙŠØ·
        if (res && res.rewarded) {
          const reward = Number(res.rewardAmount || 10);
          balance += reward;
          localStorage.setItem('balance', balance);
          document.getElementById('balance').textContent = balance;
          setStatus(`ğŸ‰ ØªÙ…Øª Ø¥Ø¶Ø§ÙØ© ${reward} Ù†Ù‚Ø§Ø·`);
        } else {
          setStatus('Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø¥Ø¹Ù„Ø§Ù† Ù…ØªØ§Ø­ Ø§Ù„Ø¢Ù†.', true);
        }

      } catch (err) {
        console.error('Ø®Ø·Ø£ Ø¹Ø±Ø¶ Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†:', err);
        setStatus('ÙØ´Ù„ Ø¹Ø±Ø¶ Ø§Ù„Ø¥Ø¹Ù„Ø§Ù† â€” Ø³ÙŠØªÙ… ØªØ¬Ø±Ø¨Ø© fallback.', true);
        // Ù…Ø­Ø§ÙˆÙ„Ø© fallback Ù…Ø­Ù„ÙŠ
        try {
          const fb = await fallbackAd();
          if (fb && fb.rewarded) {
            const r = Number(fb.rewardAmount||5);
            balance += r;
            localStorage.setItem('balance', balance);
            document.getElementById('balance').textContent = balance;
            setStatus(`ØªÙ…Øª Ø¥Ø¶Ø§ÙØ© ${r} Ù†Ù‚Ø·Ø© (fallback)`);
          }
        } catch(e2){
          console.error('ÙØ´Ù„ fallback:', e2);
          setStatus('ÙØ´Ù„ ØªØ´ØºÙŠÙ„ Ø§Ù„Ø¥Ø¹Ù„Ø§Ù† Ø§Ù„ØªØ¬Ø±ÙŠØ¨ÙŠ.', true);
        }
      }
    });
  </script>
</body>
</html>

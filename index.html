<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0,user-scalable=no">
<title>GLX Galaxy</title>
<script src="https://telegram.org/js/telegram-web-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>
<script src="//libtl.com/sdk.js" data-zone="10286382" data-sdk="show_10286382" async></script>
<script src="https://ad.gigapub.tech/script?id=4102"></script>
<script src="https://sad.adsgram.ai/js/sad.min.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
<style>
@import url('https://fonts.googleapis.com/css2?family=Outfit:wght@400;600;800&display=swap');
:root{--primary-green:#a855f7;--deep-Galaxy:#202020;--gold:#d6bcfa;--gold-glow:rgba(168,85,247,0.4);--glass-bg:rgba(32,32,32,0.7);--glass-border:rgba(255,255,255,0.1);--text-color:#fff;--text-muted:#b0b0b0;--nav-bg:rgba(40,40,40,0.98);--success-color:#a855f7}
*{margin:0;padding:0;box-sizing:border-box;-webkit-tap-highlight-color:transparent}
body{font-family:'Outfit',sans-serif;color:var(--text-color);overflow-x:hidden;background-image:url('https://i.ibb.co/RGFp67kJ/121.jpg');background-size:cover;background-position:center;background-attachment:fixed;min-height:100vh}
body::before{content:'';position:fixed;top:0;left:0;width:100%;height:100%;background:radial-gradient(circle at center,rgba(50,50,50,0.3) 0%,rgba(30,30,30,0.85) 100%);z-index:-1}
.app-container{padding:20px;padding-bottom:110px;max-width:500px;margin:0 auto;min-height:100vh;display:flex;flex-direction:column}
.content-section{display:none;animation:fadeIn 0.4s ease}
.content-section.active{display:flex;flex-direction:column;flex:1}
@keyframes fadeIn{from{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}
h1{font-size:26px;font-weight:800;color:#fff;margin-bottom:5px;text-transform:uppercase;letter-spacing:1px}
h2{font-size:18px;font-weight:700;margin:20px 0 10px;color:var(--gold);display:flex;align-items:center;gap:8px}
p{font-size:13px;color:var(--text-muted);line-height:1.4}
.page-header{text-align:center;margin-bottom:20px;padding-top:10px}
.card{background:var(--glass-bg);backdrop-filter:blur(15px);-webkit-backdrop-filter:blur(15px);border-radius:24px;padding:20px;margin-bottom:12px;border:1px solid var(--glass-border);box-shadow:0 4px 20px rgba(0,0,0,0.4)}
.btn{display:flex;align-items:center;justify-content:center;width:100%;padding:16px;border-radius:18px;font-size:16px;font-weight:800;cursor:pointer;border:none;outline:none;gap:8px;text-transform:uppercase;letter-spacing:0.5px;transition:transform 0.1s}
.btn:active{transform:scale(0.96)}
.btn:disabled{opacity:0.5;cursor:not-allowed;filter:grayscale(1)}
.btn-primary{background:linear-gradient(90deg,#a855f7,#7c3aed);color:#fff;box-shadow:0 0 15px rgba(168,85,247,0.4)}
.btn-ton{background:linear-gradient(90deg,#0088cc,#0099ff);color:#fff;box-shadow:0 0 15px rgba(0,136,204,0.4)}
.btn-check{background:linear-gradient(90deg,#a855f7,#7c3aed);color:#fff;box-shadow:0 0 15px rgba(168,85,247,0.4)}
.btn-action{background:rgba(0,0,0,0.3)!important;backdrop-filter:blur(15px);-webkit-backdrop-filter:blur(15px);border:1px solid rgba(255,255,255,0.1)!important;color:#b0b0b0!important;flex-direction:column;padding:12px;font-size:12px;gap:5px;border-radius:12px;box-shadow:0 4px 15px rgba(0,0,0,0.2);transition:all 0.3s ease}
.btn-action svg{width:24px;height:24px;stroke:#b0b0b0!important;fill:none;stroke-width:2.5;transition:all 0.3s ease}
.btn-action:active{background:rgba(0,0,0,0.4)!important;transform:scale(0.98)}
.hud-container{display:flex;justify-content:space-between;align-items:center;background:rgba(0,0,0,0.5);border-radius:50px;padding:10px 15px;margin-bottom:20px;border:1px solid rgba(255,255,255,0.05)}
.user-name{font-weight:700;font-size:14px}
.user-rank{font-size:10px;color:var(--primary-green);text-transform:uppercase}
.hud-avatar{width:50px;height:50px;border-radius:50%;overflow:hidden;border:2px solid var(--primary-green)}
.hud-avatar img{width:100%;height:100%;object-fit:cover}
.hud-balance{display:flex;flex-direction:column;align-items:flex-end;gap:5px}
.hud-balance-item{display:flex;align-items:center;gap:5px;font-size:12px;font-weight:600}
.hud-glx{color:var(--gold)}
.hud-ton{color:#0088cc}
.main-coin-section{text-align:center;margin:10px 0 30px;position:relative}
.main-coin-img{width:160px;height:160px;border-radius:50%;box-shadow:0 0 50px rgba(168,85,247,0.3);animation:float 4s ease-in-out infinite;object-fit:cover;border:4px solid var(--primary-green)}
@keyframes float{0%{transform:translateY(0px)}50%{transform:translateY(-10px)}100%{transform:translateY(0px)}}
.balance-display{margin-top:15px}
.balance-amount{font-size:48px;font-weight:800;background:linear-gradient(to bottom,#fff,#b3b3b3);-webkit-background-clip:text;-webkit-text-fill-color:transparent;line-height:1}
.balance-unit{font-size:16px;color:var(--primary-green);font-weight:700;letter-spacing:2px}
.stats-pill{display:inline-flex;align-items:center;gap:15px;background:rgba(255,255,255,0.05);padding:8px 16px;border-radius:20px;margin-top:10px;font-size:12px;font-weight:600}
.ton-val{color:var(--primary-green);display:flex;align-items:center;gap:4px}
.action-bar{display:grid;grid-template-columns:1fr 1fr;gap:12px;margin-bottom:25px}
.list-card{display:flex;align-items:center;background:rgba(0,0,0,0.3);border-radius:16px;padding:12px;margin-bottom:8px;border:1px solid rgba(255,255,255,0.05);cursor:pointer}
.lc-icon{width:42px;height:42px;border-radius:12px;background:rgba(255,255,255,0.05);display:flex;align-items:center;justify-content:center;margin-right:12px;flex-shrink:0}
.lc-icon img{width:100%;height:100%;object-fit:cover;border-radius:12px}
.lc-content{flex:1}
.lc-title{font-size:14px;font-weight:600;margin-bottom:2px}
.lc-sub{font-size:11px;color:var(--text-muted)}
.lc-end{text-align:right}
.lc-val{font-weight:700;color:var(--primary-green);font-size:14px}
.daily-row{display:flex;overflow-x:auto;gap:8px;padding-bottom:10px;margin-bottom:15px;scrollbar-width:none}
.daily-box{min-width:70px;background:rgba(255,255,255,0.05);border-radius:12px;padding:10px 5px;text-align:center;border:1px solid transparent;opacity:0.5}
.daily-box.active{opacity:1;border-color:var(--gold);background:rgba(255,215,0,0.1)}
.daily-box.claimed{opacity:1;background:var(--primary-green);color:#000}
.slots-machine{background:rgba(0,0,0,0.6);border-radius:20px;padding:20px;margin-bottom:20px;border:2px solid var(--primary-green);box-shadow:0 0 25px rgba(168,85,247,0.4)}
.slots-reels{display:flex;justify-content:space-around;margin:20px 0;gap:10px}
.reel-container{position:relative;width:80px;height:80px;overflow:hidden;border-radius:15px;background:rgba(0,0,0,0.7);border:2px solid rgba(255,255,255,0.2)}
.reel{display:flex;flex-direction:column;transition:transform 2s cubic-bezier(0.1,0,0.2,1)}
.slot-item{width:80px;height:80px;display:flex;align-items:center;justify-content:center;font-size:40px}
.slots-result{background:rgba(0,0,0,0.8);border-radius:15px;padding:15px;margin-top:20px;border:1px solid rgba(255,255,255,0.1);text-align:center}
.payout-table{display:grid;grid-template-columns:repeat(2,1fr);gap:10px;margin-top:15px;font-size:11px}
.payout-item{background:rgba(255,255,255,0.05);border-radius:8px;padding:8px;text-align:center}
.jackpot{color:#FFD700;font-weight:800;text-shadow:0 0 10px rgba(255,215,0,0.8)}
.podium-list .list-card:nth-child(1){border-color:#FFD700;background:rgba(255,215,0,0.1)}
.podium-list .list-card:nth-child(2){border-color:#C0C0C0;background:rgba(192,192,192,0.1)}
.podium-list .list-card:nth-child(3){border-color:#CD7F32;background:rgba(205,127,50,0.1)}
.podium-list .list-card:nth-child(1) .lc-val{color:#FFD700}
.podium-list .list-card:nth-child(2) .lc-val{color:#C0C0C0}
.podium-list .list-card:nth-child(3) .lc-val{color:#CD7F32}
.input-wrap{background:rgba(0,0,0,0.4);border-radius:16px;padding:15px;margin-bottom:15px;border:1px solid rgba(255,255,255,0.1)}
.input-label{font-size:11px;color:var(--text-muted);display:block;margin-bottom:5px;text-transform:uppercase}
.custom-input{width:100%;background:transparent;border:none;color:#fff;font-size:16px;font-weight:600;outline:none;font-family:inherit}
.cat-select{display:flex;gap:10px;margin-bottom:20px}
.cat-opt{flex:1;padding:12px;text-align:center;background:rgba(255,255,255,0.05);border-radius:12px;font-size:12px;cursor:pointer;border:1px solid transparent}
.cat-opt.active{background:var(--primary-green);color:#000;border-color:var(--primary-green);font-weight:700}
.price-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:8px;margin-bottom:15px}
.price-opt{padding:10px;background:rgba(255,255,255,0.05);border-radius:10px;text-align:center;cursor:pointer;border:1px solid transparent}
.price-opt.active{border-color:var(--gold);background:rgba(255,215,0,0.1)}
.price-count{font-size:14px;font-weight:700;color:#fff}
.price-cost{font-size:10px;color:var(--primary-green);margin-top:2px}
.terms-box{background:rgba(0,0,0,0.3);border-radius:16px;padding:15px;height:300px;overflow-y:auto;font-size:12px;color:var(--text-muted);border:1px solid rgba(255,255,255,0.05);line-height:1.6}
.terms-box h3{color:#fff;font-size:14px;margin-top:15px;margin-bottom:5px}
.terms-box h3:first-child{margin-top:0}
.bottom-nav{position:fixed;bottom:20px;left:50%;transform:translateX(-50%);width:90%;max-width:400px;height:65px;background:var(--nav-bg);border-radius:32px;display:flex;justify-content:space-around;align-items:center;box-shadow:0 10px 30px rgba(0,0,0,0.5);z-index:100;border:1px solid rgba(255,255,255,0.1)}
.nav-item{display:flex;flex-direction:column;align-items:center;color:#666;transition:0.3s;cursor:pointer;position:relative;width:50px}
.nav-item svg{width:22px;height:22px;margin-bottom:4px;stroke:currentColor;fill:none;stroke-width:2.5;transition:all 0.3s}
.nav-item.active{color:var(--primary-green);transform:translateY(-2px)}
.nav-item.active svg{stroke:var(--primary-green);filter:drop-shadow(0 0 8px rgba(168,85,247,0.6))}
.nav-text{font-size:9px;font-weight:700;text-transform:uppercase}
.hidden{display:none!important}
.leader-tabs{display:flex;background:rgba(0,0,0,0.3);border-radius:50px;padding:4px;margin-bottom:20px}
.tab-btn{flex:1;text-align:center;padding:10px;border-radius:50px;font-size:12px;font-weight:700;cursor:pointer;transition:all 0.3s}
.tab-btn.active{background:var(--primary-green);color:#000}
.withdrawal-type-selector{display:flex;background:rgba(0,0,0,0.3);border-radius:50px;padding:4px;margin-bottom:20px}
.withdrawal-type-btn{flex:1;text-align:center;padding:12px;border-radius:50px;font-size:12px;font-weight:700;cursor:pointer;transition:all 0.3s;border:1px solid transparent}
.withdrawal-type-btn.active{background:var(--primary-green);color:#000;border-color:var(--primary-green)}
.info-box{background:rgba(255,179,0,0.1);border:1px solid var(--gold);border-radius:12px;padding:12px;margin-bottom:15px;font-size:11px;line-height:1.5}
.info-box.success{background:rgba(39,174,96,0.1);border-color:#27ae60}
.info-icon{display:inline-flex;align-items:center;justify-content:center;width:16px;height:16px;margin-right:5px;border-radius:50%;background:var(--gold);color:#000;font-size:10px;font-weight:bold}
.info-box.success .info-icon{background:#27ae60;color:#fff}
.floating-add-task{position:fixed;bottom:85px;left:50%;transform:translateX(-50%);width:auto!important;min-width:180px!important;max-width:250px!important;background:var(--glass-bg);backdrop-filter:blur(20px);-webkit-backdrop-filter:blur(20px);border-radius:20px;padding:12px 20px!important;border:1px solid var(--primary-green);box-shadow:0 5px 30px rgba(168,85,247,0.3);z-index:99;display:flex;align-items:center;justify-content:center;cursor:pointer;transition:all 0.3s}
.floating-add-task:active{transform:translateX(-50%) scale(0.98)}
.floating-add-task-content{display:flex;align-items:center;justify-content:center;gap:8px!important}
.floating-add-task-icon{width:36px;height:36px;background:var(--primary-green);border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:20px;font-weight:bold;color:#000}
.floating-add-task-text{font-size:14px!important;font-weight:700;color:#fff;text-transform:uppercase;letter-spacing:0.5px;white-space:nowrap!important}
.spins-display{display:flex;align-items:center;justify-content:space-between;background:rgba(255,255,255,0.08);border-radius:15px;padding:12px 15px;margin-bottom:15px;border:1px solid var(--glass-border)}
.spins-count{font-size:20px;font-weight:800;color:var(--primary-green)}
.referred-users-list{max-height:300px;overflow-y:auto;margin-top:15px}
.referred-user-item{display:flex;align-items:center;padding:10px;background:rgba(255,255,255,0.05);border-radius:12px;margin-bottom:8px}
.referred-user-avatar{width:40px;height:40px;border-radius:50%;margin-right:12px;border:2px solid var(--primary-green)}
.referred-user-info{flex:1}
.referred-user-name{font-size:14px;font-weight:600}
.referred-user-date{font-size:11px;color:var(--text-muted)}
.referred-user-status{font-size:10px;padding:2px 8px;border-radius:10px;background:var(--primary-green);color:#000;font-weight:700}
.stats-grid{display:grid;grid-template-columns:1fr 1fr;gap:15px;margin-bottom:20px}
.stat-card{background:rgba(168,85,247,0.1);padding:15px;border-radius:12px;text-align:center;border:1px solid rgba(168,85,247,0.3)}
.stat-value{font-size:24px;font-weight:800;color:var(--primary-green);margin-top:5px}
.stat-label{font-size:12px;color:var(--text-muted)}
.promo-card,.code-channel-card{transition:all 0.3s ease;animation:cardFloat 3s ease-in-out infinite alternate}
@keyframes cardFloat{0%{transform:translateY(0)}100%{transform:translateY(-5px)}}
.code-channel-card:active{transform:scale(0.98)}
#promo-code-input:focus{box-shadow:0 0 15px rgba(168,85,247,0.4);border-color:#a855f7}
.max-btn,.withdraw-max-btn{min-width:60px!important;height:44px!important;padding:10px 15px!important;font-size:12px!important;font-weight:800!important;white-space:nowrap!important;border:2px solid rgba(168,85,247,0.5)!important;background:rgba(168,85,247,0.2)!important;color:#fff!important;border-radius:12px!important;cursor:pointer!important}
@keyframes cupShine{0%{filter:drop-shadow(0 0 5px rgba(255,215,0,0.7))}50%{filter:drop-shadow(0 0 15px rgba(255,215,0,0.9))}100%{filter:drop-shadow(0 0 5px rgba(255,215,0,0.7))}}
@keyframes pulseArrow{0%{transform:translateY(0);opacity:1}50%{transform:translateY(-2px);opacity:0.7}100%{transform:translateY(0);opacity:1}}
@media (max-width:480px){.max-btn,.withdraw-max-btn{min-width:50px!important;padding:8px 12px!important;font-size:11px!important;height:42px!important}
.ticket-input,.bet-input{font-size:16px!important;padding:12px!important;height:44px!important}
.coin-bet-controls,.ticket-controls{display:flex!important;align-items:center!important;gap:8px!important;width:100%!important}
.bet-input,.ticket-input{flex:1!important;min-width:0!important;font-size:16px!important;padding:12px!important;height:44px!important}
.app-container{padding:10px;padding-bottom:80px}
.main-coin-img{width:120px;height:120px}
.balance-amount{font-size:36px}
.bottom-nav{width:95%;height:60px}
.nav-text{font-size:8px}
.bottom-nav{width:96%;padding:0 5px}
.nav-item{width:45px}
.nav-text{font-size:7px}}
input[type="number"]{-webkit-appearance:none;-moz-appearance:textfield;appearance:none;font-size:18px!important}
input[type="number"]::-webkit-inner-spin-button,input[type="number"]::-webkit-outer-spin-button{-webkit-appearance:none;margin:0}
.coin-flip-game{background:rgba(0,0,0,0.6);border-radius:20px;padding:20px;margin-bottom:20px;border:2px solid var(--primary-green);box-shadow:0 0 25px rgba(168,85,247,0.4)}
.coin-bet-controls{display:flex;align-items:center;gap:10px;margin-bottom:20px}
.bet-input{flex:1;padding:12px 15px;border-radius:12px;background:rgba(0,0,0,0.3);border:2px solid rgba(168,85,247,0.6);color:#fff;font-family:inherit;font-size:16px;font-weight:700;text-align:center;outline:none;min-height:44px}
.bet-input:focus{box-shadow:0 0 15px rgba(168,85,247,0.6);border-color:#a855f7}
.bet-buttons{display:flex;gap:8px;margin-top:15px}
.bet-btn{padding:12px 15px;background:rgba(168,85,247,0.2);border:2px solid rgba(168,85,247,0.5);border-radius:10px;color:#fff;cursor:pointer;font-size:14px;font-weight:700;min-width:65px;text-align:center;flex:1}
.bet-btn.active{background:linear-gradient(135deg,#a855f7,#7c3aed);border-color:#a855f7;box-shadow:0 5px 15px rgba(168,85,247,0.4)}
.coin-container{width:150px;height:150px;margin:0 auto 20px;perspective:1000px}
.coin{width:100%;height:100%;position:relative;transform-style:preserve-3d;transform:rotateY(0deg);transition:none}
.coin-face{position:absolute;width:100%;height:100%;backface-visibility:hidden;border-radius:50%;display:flex;align-items:center;justify-content:center;box-shadow:0 0 20px rgba(0,0,0,0.5);overflow:hidden}
.coin-face img{width:100%;height:100%;object-fit:cover}
.coin-front{background:linear-gradient(45deg,#a855f7,#7c3aed);transform:rotateY(0deg)}
.coin-back{background:linear-gradient(45deg,#7c3aed,#a855f7);transform:rotateY(180deg)}
.gold-side{filter:sepia(1) saturate(2) hue-rotate(10deg) brightness(1.2)}
@keyframes coinSpin{0%{transform:rotateY(0)}25%{transform:rotateY(180deg) translateY(-20px)}50%{transform:rotateY(360deg) translateY(0)}75%{transform:rotateY(540deg) translateY(-10px)}100%{transform:rotateY(var(--final-rotation,720deg)) translateY(0)}}
.coin-spinning{animation:coinSpin 2.5s cubic-bezier(0.4,2.4,0.8,0.9) forwards}
.coin-final{animation:none!important;transform:rotateY(var(--final-rotation,0deg))!important}
.game-result{background:rgba(0,0,0,0.8);border-radius:15px;padding:15px;margin-top:20px;text-align:center}
.result-text{font-size:18px;font-weight:700;margin-bottom:10px}
.win-amount{font-size:24px;font-weight:800;color:#27ae60}
.loss-amount{font-size:24px;font-weight:800;color:#e74c3c}
.bonus-grid{display:grid;grid-template-columns:1fr 1fr;gap:12px;margin-bottom:20px}
.bonus-game-card{background:var(--glass-bg);backdrop-filter:blur(15px);-webkit-backdrop-filter:blur(15px);border-radius:16px;overflow:hidden;border:1px solid var(--glass-border);cursor:pointer;transition:all 0.3s ease;box-shadow:0 4px 15px rgba(0,0,0,0.3)}
.bonus-game-card:active{transform:scale(0.97)}
.game-banner{width:100%;height:120px;object-fit:cover;display:block}
.game-content{padding:12px}
.game-title{font-size:14px;font-weight:700;color:#fff;margin-bottom:4px;text-align:center}
.game-description{font-size:11px;color:var(--text-muted);text-align:center;line-height:1.3}
.game-icon{font-size:20px;margin-bottom:8px;text-align:center;color:var(--primary-green)}
.side-selection{display:flex;gap:10px;margin-bottom:20px}
.side-btn{flex:1;padding:20px 15px;border-radius:15px;background:rgba(255,255,255,0.05);border:2px solid transparent;cursor:pointer;text-align:center;transition:all 0.3s;min-height:140px;display:flex;flex-direction:column;justify-content:center;align-items:center}
.side-btn.active{border-color:var(--primary-green);background:rgba(168,85,247,0.2);box-shadow:0 5px 20px rgba(168,85,247,0.3)}
.side-btn.win{border-color:#27ae60;background:rgba(39,174,96,0.2)}
.side-btn.lose{border-color:#e74c3c;background:rgba(231,76,60,0.2)}
.side-icon{font-size:24px;margin-bottom:10px;width:70px;height:70px;display:flex;align-items:center;justify-content:center}
.side-name{font-size:16px;font-weight:700;margin-bottom:5px}
.side-description{font-size:12px;color:var(--text-muted);text-align:center}
.probability-display{display:none!important}
.competition-nav-item{position:relative}
.competition-nav-icon{position:relative;display:flex;align-items:center;justify-content:center}
@keyframes trophyGlow{0%,100%{filter:drop-shadow(0 0 8px rgba(255,215,0,0.7))}50%{filter:drop-shadow(0 0 20px rgba(255,215,0,0.9))}}
.nav-item.competition-nav-item.active svg{animation:trophyGlow 2s infinite alternate}
.nav-item[data-target="withdrawal-history"] svg{filter:drop-shadow(0 0 8px rgba(168,85,247,0.4));animation:none}
.galaxy-log-icon{width:40px;height:40px;background:rgba(168,85,247,0.2);border-radius:12px;display:flex;align-items:center;justify-content:center;cursor:pointer;border:1px solid rgba(168,85,247,0.4);transition:all 0.3s}
.galaxy-log-icon:hover{transform:scale(1.05);background:rgba(168,85,247,0.3);border-color:#a855f7}
.btn-filter{padding:8px 15px;background:rgba(255,255,255,0.05);border:1px solid rgba(255,255,255,0.1);border-radius:8px;color:var(--text-muted);font-size:12px;cursor:pointer;transition:all 0.3s}
.btn-filter.active{background:var(--primary-green);color:#000;font-weight:700;border-color:var(--primary-green)}
.btn-filter.small{padding:5px 10px;font-size:10px}
.log-stat-card{background:rgba(0,0,0,0.3);border-radius:12px;padding:12px;text-align:center;border:1px solid rgba(255,255,255,0.1)}
.log-item{display:flex;align-items:center;padding:12px;background:rgba(255,255,255,0.05);border-radius:12px;margin-bottom:8px;border-left:4px solid transparent}
.log-item.earn{border-left-color:#27ae60;background:rgba(39,174,96,0.1)}
.log-item.spend{border-left-color:#e74c3c;background:rgba(231,76,60,0.1)}
.log-item.swap{border-left-color:#3498db;background:rgba(52,152,219,0.1)}
.log-item.withdraw{border-left-color:#9b59b6;background:rgba(155,89,182,0.1)}
.support-channel-card{background:rgba(255,255,255,0.05);border-radius:12px;padding:15px;margin-bottom:10px;cursor:pointer;transition:all 0.3s;border:1px solid rgba(255,255,255,0.1)}
.support-channel-card:hover{background:rgba(255,255,255,0.08);transform:translateY(-2px);border-color:rgba(168,85,247,0.4)}
.deposit-wallet-address{background:rgba(0,0,0,0.5);padding:12px;border-radius:10px;font-family:monospace;font-size:11px;color:#fff;word-break:break-all;margin-top:8px}
.withdrawal-overview{text-align:center;margin-bottom:20px}
.coin-game-rules{margin-top:25px;padding:20px;background:rgba(0,0,0,0.4);border-radius:15px;border:1px solid rgba(255,255,255,0.1)}
.coin-game-rules h4{font-size:14px;color:var(--gold);margin-bottom:15px}
.coin-game-rules ul{font-size:12px;color:var(--text-muted);padding-left:20px}
.coin-game-rules li{margin-bottom:8px}
.competition-timer-card{background:linear-gradient(135deg,rgba(168,85,247,0.2),rgba(123,97,255,0.2));border:2px solid rgba(168,85,247,0.3);border-radius:20px;padding:25px;margin-bottom:20px;text-align:center;box-shadow:0 10px 30px rgba(168,85,247,0.2)}
.countdown-display{font-size:36px;font-weight:800;color:#fff;text-shadow:0 0 15px rgba(168,85,247,0.8);margin-bottom:8px;font-family:'Courier New',monospace}
.timer-label{font-size:12px;color:var(--text-muted);text-transform:uppercase;letter-spacing:1px}
.status-grid{display:grid;grid-template-columns:repeat(2,1fr);gap:12px;margin-bottom:20px}
.status-card{background:var(--glass-bg);backdrop-filter:blur(15px);-webkit-backdrop-filter:blur(15px);border-radius:16px;padding:20px;text-align:center;border:1px solid var(--glass-border)}
.status-icon{font-size:30px;margin-bottom:10px}
.status-value{font-size:24px;font-weight:800;color:#fff;margin-bottom:5px}
.status-label{font-size:10px;color:var(--text-muted);text-transform:uppercase;letter-spacing:0.5px}
.ticket-price-note{background:rgba(168,85,247,0.1);border-radius:12px;padding:15px;margin-bottom:20px;text-align:center;font-size:12px;border:1px solid rgba(168,85,247,0.3)}
.ticket-controls{display:flex;align-items:center;gap:10px;margin-bottom:20px}
.ticket-input{flex:1;padding:15px;border-radius:12px;background:rgba(0,0,0,0.3);border:2px solid rgba(168,85,247,0.5);color:#fff;font-size:18px;font-weight:700;text-align:center;outline:none;min-height:44px}
.competition-leaderboard{margin-top:25px}
.leaderboard-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:15px;padding-bottom:10px;border-bottom:1px solid rgba(255,255,255,0.1)}
.previous-winners-card{background:var(--glass-bg);backdrop-filter:blur(15px);-webkit-backdrop-filter:blur(15px);border-radius:16px;padding:20px;margin-top:20px;border:1px solid var(--glass-border)}
.winner-item{display:flex;align-items:center;padding:12px;background:rgba(255,255,255,0.05);border-radius:12px;margin-bottom:10px}
.winner-rank{width:30px;height:30px;background:var(--primary-green);border-radius:50%;display:flex;align-items:center;justify-content:center;font-weight:800;margin-right:15px}
.winner-avatar{width:40px;height:40px;border-radius:50%;margin-right:12px;border:2px solid var(--primary-green)}
.winner-info{flex:1}
.winner-name{font-size:14px;font-weight:600;margin-bottom:2px}
.winner-date{font-size:10px;color:var(--text-muted)}
.winner-prize{font-size:14px;font-weight:700;color:var(--primary-green)}
.withdraw-max-btn{position:absolute;right:15px;top:50%;transform:translateY(-50%);background:rgba(168,85,247,0.2);border:1px solid rgba(168,85,247,0.5);border-radius:8px;padding:6px 12px;color:#fff;font-size:10px;cursor:pointer;font-weight:700;z-index:10}
.bet-btn.k-style{min-width:55px;padding:10px 12px;font-size:13px;flex:1}
.user-withdrawal-item{background:rgba(255,255,255,0.05);border-radius:12px;padding:12px;margin-bottom:8px;border:1px solid rgba(255,255,255,0.1)}
.withdrawal-status{font-size:10px;padding:3px 10px;border-radius:20px;font-weight:700}
.status-completed{background:rgba(39,174,96,0.2);color:#27ae60}
.status-pending{background:rgba(255,193,7,0.2);color:#FFC107}
.status-rejected{background:rgba(231,76,60,0.2);color:#e74c3c}
.masked-email{font-family:'Courier New',monospace;letter-spacing:1px}
.competition-rank-card{display:flex;align-items:center;padding:12px;background:rgba(255,255,255,0.05);border-radius:12px;margin-bottom:8px;border:1px solid rgba(255,255,255,0.1)}
.competition-rank{width:30px;font-weight:800;font-size:14px;text-align:center;margin-right:10px}
.rank-1 .competition-rank{color:#27ae60;font-weight:900}
.rank-2 .competition-rank{color:#C0C0C0}
.rank-3 .competition-rank{color:#CD7F32}
.competition-user-avatar{width:36px;height:36px;border-radius:50%;margin-right:12px;border:2px solid var(--primary-green)}
.competition-user-info{flex:1}
.competition-user-name{font-size:13px;font-weight:600;margin-bottom:2px}
.competition-ticket-count{font-size:14px;font-weight:700;color:var(--primary-green)}
.competition-rules-card{background:rgba(0,0,0,0.4);border-radius:16px;padding:20px;margin-bottom:20px;border:1px solid rgba(255,255,255,0.1)}
.rules-header{display:flex;align-items:center;gap:10px;margin-bottom:15px;color:var(--gold);font-size:16px;font-weight:700}
.rules-list{font-size:12px;color:var(--text-muted);line-height:1.6;padding-left:20px}
.rules-list li{margin-bottom:8px}
.winner-highlight{color:#27ae60;font-weight:700}
.loser-note{color:#e74c3c;font-weight:600}
.important-note{background:rgba(255,193,7,0.1);border-left:3px solid #FFC107;padding:10px;margin-top:15px;border-radius:5px;font-size:11px}
.swap-direction-selector{display:flex;background:rgba(0,0,0,0.3);border-radius:50px;padding:4px;margin-bottom:20px}
.swap-direction-btn{flex:1;text-align:center;padding:12px;border-radius:50px;font-size:12px;font-weight:700;cursor:pointer;transition:all 0.3s;border:1px solid transparent}
.swap-direction-btn.active{background:var(--primary-green);color:#000;border-color:var(--primary-green)}
.withdraw-input-with-max{position:relative}
.withdraw-input-with-max .custom-input{padding-right:70px}
.email-display{font-family:'Courier New',monospace;background:rgba(255,255,255,0.1);padding:15px;border-radius:12px;border:1px solid rgba(255,255,255,0.2);font-size:16px;letter-spacing:2px;color:#fff;text-align:center;margin-top:10px}
.swap-mode-text{font-size:12px;color:var(--text-muted);text-align:center;margin:10px 0}
.verification-container{background:var(--glass-bg);backdrop-filter:blur(20px);-webkit-backdrop-filter:blur(20px);border-radius:24px;padding:30px;margin:20px;text-align:center;border:2px solid rgba(168,85,247,0.3);box-shadow:0 10px 40px rgba(0,0,0,0.5)}
.verification-step{display:flex;align-items:center;justify-content:space-between;background:rgba(0,0,0,0.3);border-radius:12px;padding:15px;margin-bottom:10px;border:1px solid rgba(255,255,255,0.1);transition:all 0.3s ease}
.verification-step.active{border-color:var(--primary-green);background:rgba(168,85,247,0.1)}
.verification-step.completed{border-color:#27ae60;background:rgba(39,174,96,0.1)}
.verification-step.failed{border-color:#e74c3c;background:rgba(231,76,60,0.1)}
.step-icon{width:40px;height:40px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:18px;font-weight:bold}
.step-info{flex:1;text-align:left;padding:0 15px}
.step-title{font-size:14px;font-weight:600;color:#fff;margin-bottom:3px}
.step-description{font-size:11px;color:var(--text-muted)}
.step-status{width:40px;height:40px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:18px}
.security-message{background:rgba(231,76,60,0.1);border:1px solid rgba(231,76,60,0.3);border-radius:12px;padding:15px;margin:15px 0;color:#e74c3c;font-size:14px}
.verification-progress{width:100%;height:8px;background:rgba(255,255,255,0.1);border-radius:4px;margin:20px 0;overflow:hidden}
.progress-bar{height:100%;background:linear-gradient(90deg,var(--primary-green),#7c3aed);border-radius:4px;transition:width 0.5s ease}
.blocked-container{background:rgba(0,0,0,0.8);border-radius:24px;padding:40px 30px;text-align:center;margin:20px;border:2px solid rgba(231,76,60,0.3);animation:pulse 2s infinite}
@keyframes pulse{0%{box-shadow:0 0 0 0 rgba(231,76,60,0.4)}70%{box-shadow:0 0 0 10px rgba(231,76,60,0)}100%{box-shadow:0 0 0 0 rgba(231,76,60,0)}}
.blocked-icon{font-size:60px;margin-bottom:20px;color:#e74c3c}
.blocked-title{font-size:24px;font-weight:800;color:#e74c3c;margin-bottom:15px}
.blocked-reason{background:rgba(231,76,60,0.1);border-radius:12px;padding:15px;margin:20px 0;font-size:14px;line-height:1.5}
.verification-loading{display:inline-block;width:20px;height:20px;border:3px solid rgba(255,255,255,0.3);border-radius:50%;border-top-color:var(--primary-green);animation:spin 1s ease-in-out infinite}
@keyframes spin{to{transform:rotate(360deg)}}
.ip-display{background:rgba(0,0,0,0.5);padding:10px;border-radius:8px;font-family:'Courier New',monospace;font-size:12px;color:#fff;margin-top:5px}
.security-checking{position:fixed;top:0;left:0;width:100%;height:100%;background:linear-gradient(135deg,#202020 0%,#121212 100%);display:flex;flex-direction:column;justify-content:center;align-items:center;z-index:9999;text-align:center;padding:20px}
.security-checking .logo{width:100px;height:100px;border-radius:50%;margin-bottom:20px;border:3px solid var(--primary-green);box-shadow:0 0 30px rgba(168,85,247,0.5)}
.security-checking h1{font-size:28px;margin-bottom:10px;background:linear-gradient(90deg,#a855f7,#7c3aed);-webkit-background-clip:text;-webkit-text-fill-color:transparent}
.security-checking p{font-size:14px;color:var(--text-muted);margin-bottom:30px;max-width:400px}
.security-spinner{width:50px;height:50px;border:3px solid rgba(255,255,255,0.1);border-radius:50%;border-top-color:var(--primary-green);animation:spin 1s linear infinite;margin-bottom:20px}
.blocked-access-page{position:fixed;top:0;left:0;width:100%;height:100%;background:linear-gradient(135deg,#1a1a2e 0%,#16213e 100%);color:#fff;display:flex;justify-content:center;align-items:center;text-align:center;padding:20px;z-index:10000;font-family:'Outfit',sans-serif}
.blocked-container{max-width:500px;background:rgba(255,255,255,0.1);backdrop-filter:blur(20px);border-radius:24px;padding:40px 30px;border:2px solid rgba(231,76,60,0.3);box-shadow:0 20px 60px rgba(0,0,0,0.5);animation:pulse 2s infinite}
.blocked-icon{font-size:80px;margin-bottom:20px;animation:shake 0.5s infinite alternate}
@keyframes shake{0%{transform:translateX(-2px)}100%{transform:translateX(2px)}}
.blocked-title{color:#e74c3c;font-size:28px;margin-bottom:15px;font-weight:800}
.blocked-reason{background:rgba(231,76,60,0.1);border:1px solid rgba(231,76,60,0.3);border-radius:12px;padding:20px;margin:25px 0;font-size:16px;line-height:1.6}
.instructions{background:rgba(52,152,219,0.1);border:1px solid rgba(52,152,219,0.3);border-radius:12px;padding:20px;margin-top:25px}
.steps{list-style:none;margin-top:15px;text-align:left}
.steps li{margin-bottom:10px;padding-left:25px;position:relative}
.steps li:before{content:'‚úÖ';position:absolute;left:0}
.open-button{background:linear-gradient(135deg,#a855f7,#7c3aed);color:#fff;border:none;padding:15px 30px;font-size:16px;font-weight:bold;border-radius:50px;cursor:pointer;margin-top:20px;display:inline-flex;align-items:center;gap:10px;transition:transform 0.2s}
.open-button:hover{transform:scale(1.05)}
.footer{margin-top:30px;font-size:12px;color:#aaa}
</style>
</head>
<body>
<div id="security-check" class="security-checking">
<img src="https://i.ibb.co/tTkJX1Qy/logo.png" alt="GLX Galaxy" class="logo">
<h1>GLX Galaxy Security</h1>
<p>Verifying Telegram Mobile App environment...</p>
<div class="security-spinner"></div>
<div id="security-status" style="font-size:12px;color:var(--text-muted);margin-top:10px">Initializing security system...</div>
</div>
<div id="blocked-access" class="blocked-access-page" style="display:none">
<div class="blocked-container">
<div class="blocked-icon">üö´</div>
<div class="blocked-title">ACCESS BLOCKED</div>
<div id="blocked-reason" class="blocked-reason">Unauthorized access detected</div>
<div class="instructions">
<strong>üì± How to access properly:</strong>
<ul class="steps">
<li>Open Telegram app on your phone (iOS or Android)</li>
<li>Search for @GLXGalaxyBot</li>
<li>Click on Start or open the menu</li>
<li>Click on "Open Web App" or "Launch" button</li>
</ul>
</div>
<button class="open-button" onclick="openInTelegram()"><span>üì≤ Open in Telegram Mobile</span></button>
<div class="footer">GLX Galaxy ¬© 2024 - Available only in Telegram Mobile App</div>
</div>
</div>
<div id="security-verification" class="verification-container" style="display:none">
<div style="margin-bottom:25px">
<img src="https://i.ibb.co/tTkJX1Qy/logo.png" alt="GLX Galaxy" style="width:80px;height:80px;border-radius:50%;margin-bottom:15px;border:3px solid var(--primary-green)">
<h1 style="font-size:24px;margin-bottom:8px;color:#fff">GLX Galaxy Security</h1>
<p style="color:var(--text-muted);font-size:13px">Secure verification process in progress</p>
</div>
<div class="verification-progress"><div id="verification-progress-bar" class="progress-bar" style="width:0%"></div></div>
<div id="verification-steps"></div>
<div id="verification-result" style="display:none;margin-top:20px"></div>
</div>
<div id="blocked-access-old" class="blocked-container" style="display:none">
<div class="blocked-icon">üö´</div>
<div class="blocked-title">ACCESS BLOCKED</div>
<div id="blocked-reason-old" class="blocked-reason"></div>
<p style="color:var(--text-muted);font-size:12px;margin-top:20px">If you believe this is an error, please contact support.</p>
</div>
<div class="app-container" style="display:none" id="app-container">
<div class="hud-container">
<div>
<div class="user-name" id="home-username">Explorer</div>
<div class="user-rank" id="home-user-level" style="display:none"></div>
<div style="display:flex;align-items:center;gap:15px;margin-top:5px">
<div class="stats-pill" style="margin:0;padding:6px 12px"><span style="color:var(--gold)">GLX:</span><span id="hud-glx-balance" style="color:#fff;font-weight:700">0</span></div>
<div class="stats-pill" style="margin:0;padding:6px 12px"><span style="color:var(--gold)">TON:</span><span id="hud-ton-balance" style="color:#fff;font-weight:700">0.0000</span></div>
</div>
</div>
<div style="display:flex;align-items:center;gap:10px">
<div class="galaxy-log-icon" id="galaxy-log-button"><span style="font-size:20px">üìú</span></div>
<div class="hud-avatar"><img src="https://i.ibb.co/tTkJX1Qy/logo.png" alt="User"></div>
</div>
</div>
<main id="home" class="content-section active">
<div class="main-coin-section"><img src="https://i.ibb.co/tTkJX1Qy/logo.png" class="main-coin-img" alt="GLX">
<div class="balance-display"><div class="balance-amount" id="total-GLX-balance">0</div><div class="balance-unit">GLX</div></div>
<div class="stats-pill"><span class="ton-val"><img src="https://i.ibb.co/8DsyHqwK/toncoin-ton-logo.png" style="width:16px;border-radius:50%"> <span id="home-ton-balance">0.0000</span> TON</span><span style="opacity:0.3">|</span><span style="font-size:10px;opacity:0.8">100K = 0.01 TON</span></div>
</div>
<div class="action-bar">
<div class="btn btn-action nav-link" data-target="swap-page"><svg viewBox="0 0 24 24"><path d="M7 16V4m0 0L3 8m4-4 4 4m6 0v12m0 0 4-4m-4 4-4-4"/></svg><span>Swap</span></div>
<div class="btn btn-action nav-link" data-target="withdraw"><svg viewBox="0 0 24 24"><path d="M12 5v14m0 0-6-6m6 6 6-6"/></svg><span>Withdraw</span></div>
<div class="btn btn-action nav-link" data-target="user-withdrawals"><svg viewBox="0 0 24 24"><path d="M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z"/><line x1="4" y1="22" x2="4" y2="15"/></svg><span>My Withdrawals</span></div>
<div class="btn btn-action nav-link" data-target="deposit"><svg viewBox="0 0 24 24"><path d="M12 5v14m0 0-6-6m6 6 6-6" transform="rotate(180,12,12)"/></svg><span>Deposit</span></div>
</div>
<div class="card" style="margin-top:15px">
<h2 style="display:flex;align-items:center;gap:8px"><i class="fa-solid fa-credit-card"></i>Payments Channel</h2>
<div class="support-channel-card" onclick="window.open('https://t.me/earnmoney139482','_blank')">
<div style="display:flex;align-items:center;gap:12px">
<div style="width:50px;height:50px;background:linear-gradient(135deg,#a855f7,#7b61ff);border-radius:12px;display:flex;align-items:center;justify-content:center;font-size:24px;color:#fff"><i class="fab fa-telegram"></i></div>
<div style="flex:1"><div style="font-size:14px;font-weight:700;color:#fff;margin-bottom:5px">Payments & Withdrawals Channel</div>
<div style="font-size:11px;color:var(--text-muted)">Track payments, withdrawals, and transaction updates</div>
<div style="font-size:10px;color:#ffb300;margin-top:5px"><i class="fa-solid fa-users"></i> @earnmoney139482</div></div>
<div style="color:var(--primary-green);font-size:18px"><i class="fa-solid fa-arrow-right"></i></div>
</div>
</div>
</div>
<div class="card" style="margin-top:12px">
<h2 style="display:flex;align-items:center;gap:8px"><i class="fa-solid fa-headset"></i>Support & Help</h2>
<div class="support-channel-card" onclick="window.open('https://t.me/aborabie777','_blank')" style="margin-bottom:10px">
<div style="display:flex;align-items:center;gap:12px">
<div style="width:50px;height:50px;background:linear-gradient(135deg,#3498db,#2980b9);border-radius:12px;display:flex;align-items:center;justify-content:center;font-size:24px;color:#fff"><i class="fa-solid fa-user-gear"></i></div>
<div style="flex:1"><div style="font-size:14px;font-weight:700;color:#fff;margin-bottom:5px">Technical Support</div>
<div style="font-size:11px;color:var(--text-muted)">Get help with technical issues and account problems</div></div>
<div style="color:#3498db;font-size:18px"><i class="fa-solid fa-arrow-right"></i></div>
</div>
</div>
<div class="support-channel-card" onclick="window.open('https://t.me/Elsayed_1_Elgohary','_blank')">
<div style="display:flex;align-items:center;gap:12px">
<div style="width:50px;height:50px;background:linear-gradient(135deg,#27ae60,#2ecc71);border-radius:12px;display:flex;align-items:center;justify-content:center;font-size:24px;color:#fff"><i class="fa-solid fa-circle-question"></i></div>
<div style="flex:1"><div style="font-size:14px;font-weight:700;color:#fff;margin-bottom:5px">General Support & FAQ</div>
<div style="font-size:11px;color:var(--text-muted)">Get answers to common questions and general help</div></div>
<div style="color:#27ae60;font-size:18px"><i class="fa-solid fa-arrow-right"></i></div>
</div>
</div>
</div>
<div class="card" style="margin-top:12px">
<h2 style="display:flex;align-items:center;gap:8px"><i class="fa-solid fa-bullhorn"></i>Updates & News</h2>
<div class="support-channel-card" onclick="window.open('https://t.me/earnmoney174688','_blank')" style="margin-bottom:10px">
<div style="display:flex;align-items:center;gap:12px">
<div style="width:50px;height:50px;background:linear-gradient(135deg,#9b59b6,#8e44ad);border-radius:12px;display:flex;align-items:center;justify-content:center;font-size:24px;color:#fff"><i class="fa-solid fa-bell"></i></div>
<div style="flex:1"><div style="font-size:14px;font-weight:700;color:#fff;margin-bottom:5px">Bot Updates & News</div>
<div style="font-size:11px;color:var(--text-muted)">Latest updates, announcements, and news about the bot</div>
<div style="font-size:10px;color:#9b59b6;margin-top:5px"><i class="fa-solid fa-users"></i> @earnmoney174688</div></div>
<div style="color:#9b59b6;font-size:18px"><i class="fa-solid fa-arrow-right"></i></div>
</div>
</div>
<div class="support-channel-card" onclick="window.open('https://t.me/earnmoney1685','_blank')">
<div style="display:flex;align-items:center;gap:12px">
<div style="width:50px;height:50px;background:linear-gradient(135deg,#e74c3c,#c0392b);border-radius:12px;display:flex;align-items:center;justify-content:center;font-size:24px;color:#fff"><i class="fa-solid fa-gift"></i></div>
<div style="flex:1"><div style="font-size:14px;font-weight:700;color:#fff;margin-bottom:5px">Codes & Rewards Channel</div>
<div style="font-size:11px;color:var(--text-muted)">Daily promo codes, rewards, and special bonuses</div>
<div style="font-size:10px;color:#e74c3c;margin-top:5px"><i class="fa-solid fa-users"></i> @earnmoney1685</div></div>
<div style="color:#e74c3c;font-size:18px"><i class="fa-solid fa-arrow-right"></i></div>
</div>
</div>
</div>
</main>
<main id="galaxy-log-page" class="content-section">
<div class="page-header"><h1>Galaxy Log</h1><p>Complete transaction history</p></div>
<div style="display:flex;gap:10px;margin-bottom:20px">
<button class="btn-filter active" onclick="filterLogs('all')">All</button>
<button class="btn-filter" onclick="filterLogs('earn')">Earnings</button>
<button class="btn-filter" onclick="filterLogs('spend')">Spending</button>
<button class="btn-filter" onclick="filterLogs('swap')">Swap</button>
<button class="btn-filter" onclick="filterLogs('withdraw')">Withdrawals</button>
</div>
<div style="display:grid;grid-template-columns:1fr 1fr;gap:10px;margin-bottom:15px">
<div class="log-stat-card"><div style="font-size:12px;color:var(--text-muted)">Total Earned</div><div style="font-size:18px;font-weight:700;color:#27ae60" id="total-earned">0 GLX</div></div>
<div class="log-stat-card"><div style="font-size:12px;color:var(--text-muted)">Total Spent</div><div style="font-size:18px;font-weight:700;color:#e74c3c" id="total-spent">0 GLX</div></div>
</div>
<div id="galaxy-log-filtered-list" style="max-height:500px;overflow-y:auto"></div>
</main>
<main id="deposit" class="content-section">
<div class="page-header"><h1>Deposit TON</h1><p>Add funds to your account</p></div>
<div class="card">
<div style="text-align:center;margin-bottom:20px">
<div style="font-size:16px;font-weight:700;color:var(--gold);margin-bottom:10px;display:flex;align-items:center;justify-content:center;gap:8px"><i class="fa-solid fa-arrow-down-to-line" style="color:#27ae60"></i>Deposit TON</div>
<div style="font-size:12px;color:var(--text-muted)">Add funds for paid tasks & features</div>
</div>
<div style="display:flex;justify-content:space-between;align-items:center;background:rgba(0,0,0,0.3);padding:12px;border-radius:12px;margin-bottom:20px;border:1px solid rgba(255,255,255,0.1)">
<div><div style="font-size:11px;color:var(--text-muted)">Current Balance</div><div style="font-size:20px;font-weight:700;color:#fff"><span class="user-ton-balance">0.0000</span> TON</div></div>
</div>
<div class="input-wrap" style="margin-bottom:20px"><span class="input-label">Deposit Amount (TON)</span><input type="number" id="deposit-amount" class="custom-input" placeholder="0.01" step="0.01" min="0.01" value="0.01">
<div style="text-align:right;font-size:10px;color:var(--text-muted);margin-top:5px">Minimum: 0.01 TON</div></div>
<div class="info-box" style="background:rgba(52,152,219,0.1);border-color:rgba(52,152,219,0.3)">
<div style="display:flex;align-items:flex-start;gap:10px"><div style="color:#3498db;font-size:14px"><i class="fa-solid fa-circle-info"></i></div>
<div style="font-size:11px;line-height:1.5"><strong>Deposit Instructions:</strong><br>‚Ä¢ Send exact amount to wallet address below<br>‚Ä¢ Include the memo/comment in your transfer<br>‚Ä¢ Funds will be added within 10-30 minutes<br>‚Ä¢ Keep transaction proof for support<br>‚Ä¢ For paid tasks only (creating missions)</div></div>
</div>
<div class="input-wrap" style="margin-top:20px;margin-bottom:20px"><span class="input-label">Recipient Wallet Address</span>
<div class="deposit-wallet-address">UQCg1DjKHH1_guXQ0TFmkvj09igxYwEJGfKPijLaHyOHIPTX</div>
<button onclick="copyWalletAddress()" style="margin-top:10px;width:100%;padding:16px;background:linear-gradient(90deg,#a855f7,#7c3aed);border:none;border-radius:18px;color:#fff;font-weight:800;cursor:pointer;display:flex;align-items:center;justify-content:center;gap:8px;font-size:16px"><i class="fa-solid fa-copy"></i> Copy Wallet Address</button></div>
<div class="input-wrap" style="margin-bottom:20px"><span class="input-label">Memo / Comment (Required)</span>
<div style="background:rgba(0,0,0,0.5);padding:15px;border-radius:12px;margin-top:8px;font-family:monospace;font-size:14px;color:#27ae60;text-align:center;font-weight:700;letter-spacing:1px">deposit_<span id="deposit-memo-id">USER_ID</span></div>
<div style="text-align:center;font-size:10px;color:var(--text-muted);margin-top:8px">You MUST include this memo in your transaction</div></div>
<button class="btn btn-primary" id="send-deposit-btn" onclick="sendDepositPayment()"><i class="fa-solid fa-paper-plane"></i> SEND PAYMENT</button>
<div id="verify-deposit-section" style="display:none;margin-top:20px;padding-top:20px;border-top:1px solid rgba(255,255,255,0.1)">
<div style="background:rgba(0,0,0,0.3);border-radius:12px;padding:15px;margin-bottom:15px">
<div style="font-size:10px;color:var(--text-muted);margin-bottom:8px;text-transform:uppercase">Transaction Memo</div>
<div style="font-family:monospace;font-size:14px;color:#27ae60;font-weight:700;letter-spacing:1px" id="deposit-memo-display">deposit_USER_ID</div>
<div style="font-size:10px;color:var(--text-muted);margin-top:5px">You MUST include this memo in your transaction</div>
</div>
<button class="btn btn-primary" id="verify-deposit-btn" onclick="verifyDepositTransaction()" style="background:linear-gradient(90deg,#3498db,#2980b9)"><i class="fa-solid fa-magnifying-glass"></i> CHECK DEPOSIT STATUS</button>
<div id="deposit-status-msg" style="font-size:10px;margin-top:10px;color:var(--text-muted);text-align:center">After sending payment, click here to check status</div>
</div>
</div>
</main>
<main id="user-withdrawals" class="content-section">
<div class="page-header"><h1>My Withdrawals</h1><p>Track your withdrawal requests</p></div>
<div class="card" style="text-align:center;margin-bottom:20px">
<h3 style="color:var(--gold);margin-bottom:15px">üìä Withdrawal Overview</h3>
<div class="stats-grid">
<div class="stat-card"><div class="stat-label">Pending</div><div class="stat-value" id="pending-withdrawals">0</div></div>
<div class="stat-card"><div class="stat-label">Completed</div><div class="stat-value" id="completed-withdrawals">0</div></div>
<div class="stat-card"><div class="stat-label">Total Sent</div><div class="stat-value" id="total-sent-ton">0.0000 TON</div></div>
<div class="stat-card"><div class="stat-label">Success Rate</div><div class="stat-value" id="success-rate">1%</div></div>
</div>
</div>
<div class="card">
<div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:15px">
<h3 style="color:var(--gold);font-size:14px">Withdrawal History</h3>
<div style="display:flex;gap:5px">
<button class="btn-filter small active" onclick="filterUserWithdrawals('all')">All</button>
<button class="btn-filter small" onclick="filterUserWithdrawals('pending')">Pending</button>
<button class="btn-filter small" onclick="filterUserWithdrawals('completed')">Completed</button>
</div>
</div>
<div id="user-withdrawals-list" style="max-height:400px;overflow-y:auto;display:flex;flex-direction:column-reverse"></div>
</div>
</main>
<main id="competition" class="content-section">
<div class="page-header"><h1>Daily Competition</h1><p>Win Big with Tickets</p></div>
<div class="competition-timer-card"><div class="countdown-display" id="countdown-timer">24:00:00</div><div class="timer-label">TIME UNTIL NEXT COMPETITION</div></div>
<div class="status-grid">
<div class="status-card"><div class="status-icon">üèÅ</div><div class="status-value" id="competition-status">ACTIVE</div><div class="status-label">COMPETITION STATUS</div></div>
<div class="status-card"><div class="status-value" id="prize-pool">0.000 TON</div><div class="status-label">TOTAL PRIZE POOL</div></div>
<div class="status-card"><div class="status-value" id="user-tickets">0</div><div class="status-label">YOUR TICKETS</div></div>
<div class="status-card"><div class="status-value" id="total-tickets">0</div><div class="status-label">TOTAL TICKETS</div></div>
</div>
<div class="ticket-price-note"><p>üé´ <strong>Each ticket = 10,000 GLX = 0.001 TON</strong></p><p style="font-size:11px;margin-top:5px">Prize Pool = Total Tickets √ó 0.001 TON</p></div>
<div class="competition-rules-card">
<div class="rules-header"><i class="fa-solid fa-circle-info"></i><span>Competition Rules</span></div>
<ul class="rules-list">
<li><span class="winner-highlight">üèÜ ONLY THE FIRST PLACE WINS!</span> - The user with the most tickets wins the entire prize pool.</li>
<li><span class="loser-note">‚ùå ALL OTHER PARTICIPANTS LOSE</span> - Only #1 gets the prize, others get nothing.</li>
<li>üé´ Each ticket costs <strong>10,000 GLX (0.001 TON)</strong></li>
<li>üí∞ Prize Pool = Total Tickets √ó 0.001 TON</li>
<li>‚è∞ Competition runs for 24 hours, followed by 1 hour break</li>
<li>üìä Winner is automatically selected after competition ends</li>
</ul>
<div class="important-note"><i class="fa-solid fa-exclamation-triangle"></i><strong>Important:</strong> Buy more tickets to increase your chance of winning! Only #1 position matters.</div>
</div>
<div class="card">
<h3 style="color:var(--gold);margin-bottom:15px">üéüÔ∏è Buy Competition Tickets</h3>
<div class="ticket-controls"><input type="number" id="ticket-amount" class="ticket-input" placeholder="Enter tickets amount" min="1" value="1"><button class="max-btn" onclick="setMaxTickets()">MAX</button></div>
<div class="price-info">
<div style="display:flex;justify-content:space-between;margin-bottom:10px;font-size:12px"><span style="color:var(--text-muted)">Tickets:</span><span id="tickets-count-display">1</span></div>
<div style="display:flex;justify-content:space-between;margin-bottom:15px;font-size:12px"><span style="color:var(--text-muted)">Cost:</span><span id="tickets-cost-display">10,000 GLX</span></div>
</div>
<button class="btn btn-primary" id="buy-tickets-btn" onclick="buyTickets()"><i class="fa-solid fa-ticket"></i> BUY TICKETS</button>
<p id="buy-tickets-status" style="text-align:center;font-size:11px;margin-top:10px;color:var(--text-muted)"></p>
</div>
<div class="competition-leaderboard">
<div class="leaderboard-header"><h3 style="font-size:16px;color:var(--gold)">üèÜ Top 10 Leaders</h3><span style="font-size:10px;color:var(--text-muted)">Live Ranking</span></div>
<div id="competition-leaderboard-list" style="max-height:300px;overflow-y:auto;padding-bottom:10px"><p style="text-align:center;padding:20px;color:var(--text-muted)">Loading leaderboard...</p></div>
</div>
<div class="previous-winners-card">
<h3 style="font-size:16px;color:var(--gold);margin-bottom:15px">üìÖ Yesterday's Winners</h3>
<div id="previous-winners-list"><p style="text-align:center;padding:20px;color:var(--text-muted)">No previous winners yet</p></div>
</div>
</main>
<main id="bonus" class="content-section">
<div class="page-header"><h1>Galaxy Bonus</h1><p>Daily rewards & fun games</p></div>
<div class="bonus-grid">
<div class="bonus-game-card" onclick="openGame('coin-flip')"><img src="https://i.ibb.co/gLT3myT3/Coin-Flip-Game.png" alt="Coin Flip Game" class="game-banner">
<div class="game-content"><div class="game-icon">ü™ô</div><div class="game-title">Coin Flip Game</div><div class="game-description">Heads or Tails? Win 2x your bet!</div></div></div>
<div class="bonus-game-card" onclick="openGame('promo-codes')"><img src="https://i.ibb.co/jnp9cTb/Promo-Codes-Rewards.png" alt="Promo Codes & Rewards" class="game-banner">
<div class="game-content"><div class="game-icon">üéÅ</div><div class="game-title">Promo Codes</div><div class="game-description">Redeem codes for free rewards</div></div></div>
<div class="bonus-game-card" onclick="openGame('daily-streak')"><img src="https://i.ibb.co/GQQ0BnsT/Daily-Streak.png" alt="Daily Streak" class="game-banner">
<div class="game-content"><div class="game-icon">üìÖ</div><div class="game-title">Daily Streak</div><div class="game-description">Claim daily rewards up to 7 days</div></div></div>
<div class="bonus-game-card" onclick="openGame('galaxy-slots')"><img src="https://i.ibb.co/204QyBWX/Galaxy-Slots-Game.png" alt="Galaxy Slots Game" class="game-banner">
<div class="game-content"><div class="game-icon">üé∞</div><div class="game-title">Galaxy Slots</div><div class="game-description">Spin the reels & win big jackpots</div></div></div>
</div>
<div id="coin-flip-section" class="card" style="display:none">
<div style="display:flex;align-items:center;justify-content:space-between;margin-bottom:15px">
<h3 style="font-size:14px;color:var(--gold);display:flex;align-items:center;gap:8px"><i class="fa-solid fa-coins" style="color:#a855f7"></i> Coin Flip Game</h3>
<button class="btn btn-action" onclick="closeGame()" style="width:auto;padding:8px 12px;font-size:11px"><i class="fa-solid fa-arrow-left"></i> Back</button>
</div>
<div class="probability-display" style="display:none">
<div class="prob-item"><div class="prob-value win-prob">45%</div><div class="prob-label">Win Chance</div></div>
<div class="prob-item"><div class="prob-value loss-prob">55%</div><div class="prob-label">Loss Chance</div></div>
</div>
<div class="coin-flip-game">
<div class="coin-bet-controls"><input type="number" id="coin-bet-amount" class="bet-input" placeholder="Enter bet amount" min="1000" value="1000"><button class="max-btn" onclick="setMaxBet()" style="width:auto;padding:12px 15px">MAX</button></div>
<div class="bet-buttons">
<button class="bet-btn k-style active" onclick="setBetAmount(1000)">1k</button>
<button class="bet-btn k-style" onclick="setBetAmount(5000)">5k</button>
<button class="bet-btn k-style" onclick="setBetAmount(10000)">10k</button>
<button class="bet-btn k-style" onclick="setBetAmount(25000)">25k</button>
</div>
<div class="side-selection">
<div class="side-btn active" id="choose-glx" onclick="chooseSide('glx')">
<div class="side-icon"><img src="https://i.ibb.co/tTkJX1Qy/logo.png" style="width:70px;height:70px;border-radius:50%"></div>
<div class="side-name">GLX Side</div><div class="side-description">Win 2x if GLX appears</div></div>
<div class="side-btn" id="choose-gold" onclick="chooseSide('gold')">
<div class="side-icon"><img src="https://i.ibb.co/tTkJX1Qy/logo.png" style="width:70px;height:70px;border-radius:50%;filter:sepia(1) saturate(2) hue-rotate(10deg) brightness(1.2)"></div>
<div class="side-name">Gold Side</div><div class="side-description">Win 2x if Gold appears</div></div>
</div>
<div class="coin-container"><div class="coin" id="coin">
<div class="coin-face coin-front"><img src="https://i.ibb.co/tTkJX1Qy/logo.png" alt="GLX Coin"></div>
<div class="coin-face coin-back"><img src="https://i.ibb.co/tTkJX1Qy/logo.png" alt="Gold Coin" class="gold-side"></div>
</div></div>
<button class="btn btn-primary" id="flip-coin-btn" onclick="flipCoin()"><i class="fa-solid fa-play"></i> FLIP COIN</button>
<div class="game-result" id="coin-game-result" style="display:none">
<div class="result-text" id="coin-result-text"></div>
<div class="win-amount" id="coin-win-amount"></div>
<div class="loss-amount" id="coin-loss-amount"></div>
</div>
<div class="coin-game-rules">
<h4><i class="fa-solid fa-circle-info"></i> Game Rules</h4>
<ul>
<li><strong>Minimum bet:</strong> 1,000 GLX</li>
<li><strong>Choose:</strong> GLX Side or Gold Side</li>
<li><strong>If you win:</strong> Get 2x your bet</li>
<li><strong>If you lose:</strong> Lose your bet</li>
<li><strong>Note:</strong> Bet amount is deducted immediately</li>
</ul>
</div>
</div>
</div>
<div id="promo-codes-section" class="card" style="display:none">
<div style="display:flex;align-items:center;justify-content:space-between;margin-bottom:15px">
<h3 style="font-size:14px;color:var(--gold);display:flex;align-items:center;gap:8px"><i class="fa-solid fa-gift" style="color:#a855f7"></i> Promo Codes & Rewards</h3>
<button class="btn btn-action" onclick="closeGame()" style="width:auto;padding:8px 12px;font-size:11px"><i class="fa-solid fa-arrow-left"></i> Back</button>
</div>
<div class="promo-card" style="background:linear-gradient(135deg,rgba(168,85,247,0.2),rgba(123,97,255,0.2));border-radius:20px;padding:20px;margin-bottom:15px;border:2px solid rgba(168,85,247,0.3);position:relative;overflow:hidden">
<div style="position:absolute;top:-50px;right:-50px;width:100px;height:100px;background:rgba(168,85,247,0.1);border-radius:50%"></div>
<div style="position:absolute;bottom:-30px;left:-30px;width:80px;height:80px;background:rgba(123,97,255,0.1);border-radius:50%"></div>
<div style="position:relative;z-index:2">
<div style="display:flex;align-items:center;gap:10px;margin-bottom:15px">
<div style="width:50px;height:50px;background:linear-gradient(135deg,#a855f7,#7b61ff);border-radius:15px;display:flex;align-items:center;justify-content:center;font-size:24px;color:#fff"><i class="fa-solid fa-key"></i></div>
<div><div style="font-size:16px;font-weight:800;color:#fff">Redeem Code</div><div style="font-size:12px;color:rgba(255,255,255,0.7)">Enter promo code for rewards</div></div>
</div>
<div style="display:flex;gap:10px;margin-bottom:15px">
<input type="text" id="promo-code-input" placeholder="Enter promo code..." style="flex:1;padding:12px 15px;border-radius:12px;background:rgba(0,0,0,0.3);border:1px solid rgba(168,85,247,0.5);color:#fff;font-family:inherit;font-size:14px;outline:none">
<button id="redeem-code-btn" style="padding:12px 20px;background:linear-gradient(135deg,#a855f7,#7b61ff);border:none;border-radius:12px;color:#fff;font-weight:700;cursor:pointer;display:flex;align-items:center;gap:8px"><i class="fa-solid fa-gift"></i> Redeem</button>
</div>
<div id="promo-result" style="padding:10px;border-radius:10px;font-size:12px;text-align:center;display:none"></div>
</div>
</div>
<div class="code-channel-card" style="background:linear-gradient(135deg,rgba(255,193,7,0.2),rgba(255,152,0,0.2));border-radius:20px;padding:20px;border:2px solid rgba(255,193,7,0.3);position:relative;overflow:hidden;cursor:pointer" onclick="window.open('https://t.me/earnmoney1685','_blank')">
<div style="position:absolute;top:-30px;right:-30px;width:80px;height:80px;background:rgba(255,193,7,0.1);border-radius:50%"></div>
<div style="position:relative;z-index:2">
<div style="display:flex;align-items:center;gap:15px">
<div style="width:60px;height:60px;background:linear-gradient(135deg,#FFC107,#FF9800);border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:28px;color:#fff"><i class="fab fa-telegram"></i></div>
<div style="flex:1">
<div style="font-size:16px;font-weight:800;color:#fff;margin-bottom:5px"><i class="fa-solid fa-bolt" style="color:#FFC107"></i> Codes Channel</div>
<div style="font-size:12px;color:rgba(255,255,255,0.8);margin-bottom:8px">Get exclusive promo codes & daily rewards</div>
<div style="display:flex;align-items:center;gap:5px">
<span style="font-size:11px;color:#FFC107;font-weight:700"><i class="fa-solid fa-users"></i> Join Now</span>
<span style="font-size:11px;color:rgba(255,255,255,0.6)">@earnmoney1685</span>
</div>
</div>
<div style="width:40px;height:40px;background:rgba(255,255,255,0.1);border-radius:50%;display:flex;align-items:center;justify-content:center;color:#FFC107;font-size:18px"><i class="fa-solid fa-arrow-right"></i></div>
</div>
<div style="display:flex;justify-content:space-between;margin-top:15px;padding-top:15px;border-top:1px solid rgba(255,255,255,0.1)">
<div style="text-align:center"><div style="font-size:20px;font-weight:800;color:#FFC107">5+</div><div style="font-size:10px;color:rgba(255,255,255,0.7)">Active Codes</div></div>
<div style="text-align:center"><div style="font-size:20px;font-weight:800;color:#FFC107">10K+</div><div style="font-size:10px;color:rgba(255,255,255,0.7)">Members</div></div>
<div style="text-align:center"><div style="font-size:20px;font-weight:800;color:#FFC107">24/7</div><div style="font-size:10px;color:rgba(255,255,255,0.7)">Updates</div></div>
</div>
</div>
</div>
</div>
<div id="daily-streak-section" class="card" style="display:none">
<div style="display:flex;align-items:center;justify-content:space-between;margin-bottom:15px">
<h3 style="font-size:14px;color:var(--gold);display:flex;align-items:center;gap:8px"><i class="fa-solid fa-calendar-check" style="color:#a855f7"></i> Daily Streak</h3>
<button class="btn btn-action" onclick="closeGame()" style="width:auto;padding:8px 12px;font-size:11px"><i class="fa-solid fa-arrow-left"></i> Back</button>
</div>
<div class="daily-row" id="daily-checkin-grid"></div>
<button class="btn btn-primary" id="claim-daily-btn">Claim Bonus</button>
<p id="next-claim-timer" style="text-align:center;font-size:11px;margin-top:8px;opacity:0.7"></p>
</div>
<div id="galaxy-slots-section" class="card" style="display:none;text-align:center">
<div style="display:flex;align-items:center;justify-content:space-between;margin-bottom:15px">
<h3 style="font-size:14px;color:var(--gold);display:flex;align-items:center;gap:8px"><i class="fa-solid fa-slot-machine" style="color:#a855f7"></i> Galaxy Slots Game</h3>
<button class="btn btn-action" onclick="closeGame()" style="width:auto;padding:8px 12px;font-size:11px"><i class="fa-solid fa-arrow-left"></i> Back</button>
</div>
<div class="spins-display">
<div><div style="font-size:12px;color:var(--text-muted)">Available Spins</div><div class="spins-count" id="available-spins">1</div></div>
<button class="btn btn-ton" onclick="getExtraSpin()" style="width:auto;padding:8px 15px">üé¨ Watch Ad for Extra Spin</button>
</div>
<div class="slots-machine">
<div class="slots-reels">
<div class="reel-container"><div class="reel" id="reel1"></div></div>
<div class="reel-container"><div class="reel" id="reel2"></div></div>
<div class="reel-container"><div class="reel" id="reel3"></div></div>
</div>
<div class="slots-result">
<div id="slots-result-text" style="font-size:14px;margin-bottom:10px">Press SPIN to play!</div>
<div id="slots-win-amount" style="font-size:24px;font-weight:800;color:var(--primary-green)">0 GLX</div>
</div>
</div>
<button class="btn btn-primary" id="slots-spin-btn" style="margin-bottom:15px">üöÄ SPIN NOW</button>
<div class="payout-table">
<div class="payout-item">3x üåü = <span class="jackpot">10000 GLX</span></div>
<div class="payout-item">3x ü™ê = 5000 GLX</div>
<div class="payout-item">3x üí´ = 2500 GLX</div>
<div class="payout-item">3x ‚≠ê = 1200 GLX</div>
<div class="payout-item">2x üåü = 700 GLX</div>
<div class="payout-item">Any Match = 500 GLX</div>
</div>
</div>
</main>
<main id="tasks" class="content-section">
<div class="page-header"><h1>Missions</h1><p>Complete tasks to earn GLX</p></div>
<div class="card">
<div style="display:flex;justify-content:space-between;margin-bottom:10px;font-size:12px;font-weight:700"><span>Daily Ad Limit</span><span style="color:var(--gold)">650 Total</span></div>
<div id="monetag-ad-task" class="list-card" style="background:rgba(255,255,255,0.08);border-color:var(--primary-green);margin-bottom:10px">
<div class="lc-icon"><img src="https://i.ibb.co/tTkJX1Qy/logo.png" alt="Ad"></div>
<div class="lc-content"><div class="lc-title">Monetag Ad</div><div class="lc-sub"><span id="monetag-count">0</span> / <span id="monetag-limit">50</span></div></div>
<div class="lc-end"><div class="lc-val">+1000</div></div>
</div>
<div id="gigapub-ad-task" class="list-card" style="background:rgba(255,255,255,0.08);border-color:var(--primary-green);margin-bottom:10px">
<div class="lc-icon"><img src="https://i.ibb.co/tTkJX1Qy/logo.png" alt="Ad"></div>
<div class="lc-content"><div class="lc-title">GigaPub Ad</div><div class="lc-sub"><span id="giga-count">0</span> / <span id="giga-limit">300</span></div></div>
<div class="lc-end"><div class="lc-val">+2000</div></div>
</div>
<div id="adsgram-ad-task" class="list-card" style="background:rgba(255,255,255,0.08);border-color:var(--primary-green)">
<div class="lc-icon"><img src="https://i.ibb.co/tTkJX1Qy/logo.png" alt="Ad"></div>
<div class="lc-content"><div class="lc-title">AdsGram Ad</div><div class="lc-sub"><span id="adsgram-count">0</span> / <span id="adsgram-limit">300</span></div></div>
<div class="lc-end"><div class="lc-val">+2000</div></div>
</div>
</div>
<h2>Partners</h2><div id="partner-tasks-card"><div id="partner-tasks-list"></div></div>
<h2>Community</h2><div id="community-tasks-card"><div id="community-tasks-list"></div></div>
</main>
<main id="create-task-page" class="content-section">
<div class="page-header"><h1>Add Mission</h1><p>Promote your channel or bot</p></div>
<div class="card">
<div class="input-wrap"><span class="input-label">Task Name</span><input type="text" id="new-task-name" class="custom-input" placeholder="e.g. Join Galaxy Channel"></div>
<div class="input-wrap"><span class="input-label">Link</span><input type="text" id="new-task-link" class="custom-input" placeholder="https://t.me/..."></div>
<div class="input-label" style="margin-bottom:10px">Category</div>
<div class="cat-select">
<div class="cat-opt active" onclick="selectCat(this,'channel')">Channel / Group</div>
<div class="cat-opt" onclick="selectCat(this,'bot')">Website / Bot</div>
</div>
<div id="admin-required-msg" style="background:rgba(255,179,0,0.15);border:1px solid #ffb300;border-radius:12px;padding:12px;margin-bottom:20px;font-size:12px;color:#ffb300;display:block;line-height:1.5">
<i class="fa-solid fa-triangle-exclamation" style="margin-right:5px"></i>
<strong>Action Required:</strong> You must add <u>@GLXGalaxyBot</u> as an <strong>Admin</strong> in your Channel/Group for tracking to work.
</div>
<div class="input-label" style="margin-bottom:10px">Number of Completions</div>
<div class="price-grid" id="price-options"></div>
<div id="payment-step-1">
<button class="btn btn-ton" id="pay-task-btn" onclick="initiatePayment()">
<img src="https://i.ibb.co/8DsyHqwK/toncoin-ton-logo.png" style="width:20px;border-radius:50%">
Pay <span id="pay-amount-display">0</span> TON
</button>
</div>
<div id="payment-step-2" style="display:none;text-align:center">
<p style="font-size:12px;margin-bottom:10px;color:#fff">Payment sent? Verify below:</p>
<button class="btn btn-check" id="check-payment-btn" onclick="verifyPayment()">Check Payment</button>
<p id="payment-status-msg" style="font-size:11px;margin-top:8px;color:var(--text-muted)">Waiting for transaction...</p>
</div>
</div>
<button class="btn btn-action nav-link" data-target="tasks" style="margin-top:10px">Cancel</button>
</main>
<main id="history" class="content-section">
<div class="page-header"><h1>Ledger</h1><p>Transaction History</p></div>
<div id="full-history-list" style="padding-bottom:20px"></div>
</main>
<main id="withdrawal-history" class="content-section">
<div class="page-header"><h1>Withdrawal History</h1><p>All completed withdrawals</p></div>
<div class="card" style="text-align:center;margin-bottom:20px">
<h3 style="color:var(--gold);margin-bottom:15px">üìä Withdrawal Statistics</h3>
<div class="stats-grid">
<div class="stat-card"><div class="stat-label">Completed Withdrawals</div><div class="stat-value" id="completed-withdrawals-count">0</div></div>
<div class="stat-card"><div class="stat-label">Total Paid (TON)</div><div class="stat-value" id="total-paid-ton">0.0000</div></div>
</div>
</div>
<div class="card" style="padding:0;margin-top:20px">
<div style="display:flex;justify-content:space-between;align-items:center;padding:15px;border-bottom:1px solid var(--glass-border)">
<div style="font-size:12px;font-weight:700;color:var(--gold)">Recent Withdrawals</div>
<div style="font-size:10px;color:var(--text-muted)">Public Records</div>
</div>
<div id="withdrawal-history-list" style="max-height:300px;overflow-y:auto;padding:10px"></div>
</div>
</main>
<main id="swap-page" class="content-section">
<div class="page-header"><h1>Swap Market</h1><p>100K GLX = 0.01 TON</p></div>
<div class="swap-direction-selector">
<div class="swap-direction-btn active" onclick="selectSwapDirection('glx_to_ton')">GLX ‚Üí TON</div>
<div class="swap-direction-btn" onclick="selectSwapDirection('ton_to_glx')">TON ‚Üí GLX</div>
</div>
<div class="card">
<div id="glx-to-ton-section">
<div class="input-wrap"><span class="input-label">You Give (GLX)</span><input type="number" id="swap-input-amount" class="custom-input" placeholder="Min 1,000" oninput="calculateSwap()">
<div style="text-align:right;font-size:10px;color:var(--text-muted);margin-top:5px">Max: <span id="swap-max-GLX">0</span><button onclick="setMaxSwap('glx')" style="margin-left:10px;background:var(--primary-green);color:#000;border:none;padding:4px 8px;border-radius:6px;font-size:10px;cursor:pointer">MAX</button></div></div>
<div class="input-wrap"><span class="input-label">You Get (TON)</span>
<div style="display:flex;align-items:center;gap:10px"><img src="https://i.ibb.co/8DsyHqwK/toncoin-ton-logo.png" style="width:24px"><span id="swap-output-amount" class="custom-input">0.0000000</span></div></div>
<div class="swap-mode-text">Rate: 100,000 GLX = 0.01 TON</div>
</div>
<div id="ton-to-glx-section" style="display:none">
<div class="input-wrap"><span class="input-label">You Give (TON)</span><input type="number" id="ton-input-amount" class="custom-input" placeholder="Min 0.0001" oninput="calculateSwap()">
<div style="text-align:right;font-size:10px;color:var(--text-muted);margin-top:5px">Max: <span id="swap-max-TON">0.0000</span><button onclick="setMaxSwap('ton')" style="margin-left:10px;background:var(--primary-green);color:#000;border:none;padding:4px 8px;border-radius:6px;font-size:10px;cursor:pointer">MAX</button></div></div>
<div class="input-wrap"><span class="input-label">You Get (GLX)</span>
<div style="display:flex;align-items:center;gap:10px"><img src="https://i.ibb.co/tTkJX1Qy/logo.png" style="width:24px;height:24px;border-radius:50%"><span id="ton-output-amount" class="custom-input">0</span></div></div>
<div class="swap-mode-text">Rate: 0.01 TON = 100,000 GLX</div>
</div>
<button class="btn btn-primary" id="execute-swap-btn" onclick="executeSwap()">Confirm Swap</button>
</div>
</main>
<main id="withdraw" class="content-section">
<div class="page-header"><h1>Withdraw</h1><p>GLX out to TON Wallet</p></div>
<div class="withdrawal-type-selector">
<div class="withdrawal-type-btn active" data-type="faucetpay" onclick="selectWithdrawalType('faucetpay')"><i class="fa-solid fa-envelope"></i> FaucetPay</div>
<div class="withdrawal-type-btn" data-type="tonwallet" onclick="selectWithdrawalType('tonwallet')"><i class="fa-solid fa-wallet"></i> TON Wallet</div>
</div>
<div id="faucetpay-form" class="card">
<div class="input-wrap"><span class="input-label">FaucetPay Email Address</span><input type="email" id="faucetpay-email" class="custom-input" placeholder="example@gmail.com" oninput="maskEmail()">
<div id="email-preview" class="email-display masked-email" style="display:none;margin-top:8px;font-size:12px;color:#a855f7;font-family:'Courier New',monospace"></div></div>
<div class="input-wrap withdraw-input-with-max"><span class="input-label">Withdrawal Amount (TON)</span>
<div style="display:flex;align-items:center;gap:8px"><input type="number" id="faucetpay-amount" class="custom-input" placeholder="0.0001" step="0.0001" min="0.0001" value="0.0001" style="flex:1"><button class="max-btn" onclick="setMaxFaucetPay()">MAX</button></div>
<div style="text-align:right;font-size:10px;color:var(--text-muted);margin-top:5px">Minimum: 0.0001 TON</div></div>
<div class="info-box">
<div style="display:flex;align-items:flex-start;gap:8px">
<div class="info-icon">!</div>
<div style="font-size:11px;line-height:1.4">
<strong>Important Information:</strong><br>
‚Ä¢ Enter the email registered with your FaucetPay account<br>
‚Ä¢ Minimum withdrawal: 0.0001 TON<br>
‚Ä¢ <span style="color:#27ae60">‚úÖ No fees</span> - We cover all transaction costs<br>
‚Ä¢ Processing time: Up to 1 minute<br>
‚Ä¢ Your email will be partially hidden for privacy
</div>
</div>
</div>
<button class="btn btn-primary" id="withdraw-faucetpay-btn" onclick="handleFaucetPayWithdraw()"><i class="fa-solid fa-paper-plane"></i> WITHDRAW VIA FAUCETPAY</button>
</div>
<div id="tonwallet-form" class="card" style="display:none">
<div class="input-wrap"><span class="input-label">TON Wallet Address</span><input type="text" id="ton-wallet-address" class="custom-input" placeholder="UQ... or EQ... or kQ...">
<div style="text-align:right;font-size:10px;color:var(--text-muted);margin-top:5px">Enter your TON wallet address (starts with UQ, EQ, or kQ)</div></div>
<div class="input-wrap"><span class="input-label">Memo (Optional)</span><input type="text" id="ton-memo" class="custom-input" placeholder="For exchange deposits only">
<div style="text-align:right;font-size:10px;color:var(--text-muted);margin-top:5px">Optional: Required by some exchanges for deposits</div></div>
<div class="input-wrap withdraw-input-with-max"><span class="input-label">Withdrawal Amount (TON)</span>
<div style="display:flex;align-items:center;gap:8px"><input type="number" id="ton-withdraw-amount" class="custom-input" placeholder="0.05" step="0.01" min="0.05" value="0.05" style="flex:1"><button class="max-btn" onclick="setMaxTonWallet()">MAX</button></div>
<div style="text-align:right;font-size:10px;color:var(--text-muted);margin-top:5px">Minimum: 0.05 TON</div></div>
<div class="info-box success">
<div style="display:flex;align-items:flex-start;gap:8px">
<div class="info-icon">‚úì</div>
<div style="font-size:11px;line-height:1.4">
<strong>Withdrawal Details:</strong><br>
‚Ä¢ Minimum withdrawal: 0.05 TON<br>
‚Ä¢ <span style="color:#27ae60">‚úÖ No fees</span> - We cover all transaction costs<br>
‚Ä¢ Processing time: Up to 24 hours<br>
‚Ä¢ Memo is only needed for exchange deposits<br>
‚Ä¢ Ensure address is correct - transactions are irreversible
</div>
</div>
</div>
<button class="btn btn-primary" id="withdraw-ton-now-btn" onclick="handleTonWalletWithdraw()"><i class="fa-solid fa-wallet"></i> WITHDRAW TO TON WALLET</button>
</div>
</main>
<main id="leaderboard" class="content-section">
<div class="page-header"><h1>Top Kings</h1><p>The richest in the Galaxy</p></div>
<div class="leader-tabs">
<div class="tab-btn active" data-target="invites-leaderboard-list">Invites</div>
<div class="tab-btn" data-target="earnings-leaderboard-list">Holders</div>
</div>
<div class="podium-list" id="invites-leaderboard-list"></div>
<div class="podium-list hidden" id="earnings-leaderboard-list"></div>
</main>
<main id="referrals" class="content-section">
<div class="page-header"><h1>Referrals</h1><p>Invite friends, earn together</p></div>
<div class="card" style="text-align:center">
<img src="https://i.ibb.co/tTkJX1Qy/logo.png" style="width:80px;margin-bottom:15px">
<div style="background:rgba(255,255,255,0.05);padding:10px;border-radius:12px;margin-bottom:20px">
<div style="font-size:12px;color:var(--text-muted)">Total Referrals</div>
<div style="font-size:24px;font-weight:800;color:#fff" id="referral-count-display">0</div>
</div>
<p>Earn <strong>+2000 GLX</strong> for every friend.</p>
<div id="referral-link-display" style="background:#000;padding:10px;border-radius:8px;font-family:monospace;font-size:10px;color:#aaa;margin:15px 0;word-break:break-all">...</div>
<button class="btn btn-primary" id="share-referral-btn">Invite Friends</button>
<button class="btn btn-outline" id="copy-referral-btn" style="margin-top:10px">Copy Link</button>
<div style="margin-top:20px">
<h3 style="font-size:16px;color:var(--gold);margin-bottom:10px">üë• Your Referrals</h3>
<div id="referred-users-container" style="text-align:left">
<div class="referred-users-list" id="referred-users-list"></div>
<p id="no-referrals-msg" style="text-align:center;padding:20px;color:var(--text-muted)">No referrals yet. Invite friends to see them here.</p>
</div>
</div>
</div>
</main>
</div>
<div class="floating-add-task hidden" id="floatingAddTask" onclick="switchTab('create-task-page')">
<div class="floating-add-task-content">
<div class="floating-add-task-icon">+</div>
<div class="floating-add-task-text">Add Task</div>
</div>
</div>
<nav class="bottom-nav">
<div class="nav-item active" data-target="home"><svg viewBox="0 0 24 24"><path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path></svg><span class="nav-text">Home</span></div>
<div class="nav-item" data-target="tasks"><svg viewBox="0 0 24 24"><path d="M9 11l3 3L22 4"/><path d="M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"/></svg><span class="nav-text">Tasks</span></div>
<div class="nav-item" data-target="bonus"><svg viewBox="0 0 24 24"><path d="M20 12V8H6a2 2 0 0 1-2-2c0-1.1.9-2 2-2h12v4"></path><path d="M4 6v12c0 1.1.9 2 2 2h14v-4"></path><path d="M18 12a2 2 0 0 0-2 2c0 1.1.9 2 2 2h4v-4h-4z"></path></svg><span class="nav-text">Bonus</span></div>
<div class="nav-item competition-nav-item" data-target="competition">
<div class="competition-nav-icon">
<svg viewBox="0 0 32 32" width="28" height="28">
<circle cx="16" cy="16" r="14" fill="rgba(255,215,0,0.15)" opacity="0.8"/>
<path d="M9 13 L16 8 L23 13 L21 21 L11 21 Z" fill="none" stroke="#FFD700" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M16 5 L17.5 10 L22 10 L18.5 13 L19.5 18 L16 15 L12.5 18 L13.5 13 L10 10 L14.5 10 Z" fill="#FFD700" stroke="#FFA500" stroke-width="1.5"/>
<circle cx="16" cy="16" r="6" fill="none" stroke="#FFD700" stroke-width="1.5" stroke-dasharray="2 2"/>
<circle cx="16" cy="16" r="8" fill="none" stroke="rgba(255,215,0,0.3)" stroke-width="3"/>
</svg>
</div>
<span class="nav-text">Competition</span>
</div>
<div class="nav-item" data-target="referrals"><svg viewBox="0 0 24 24"><path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M23 21v-2a4 4 0 0 0-3-3.87"/><path d="M16 3.13a4 4 0 0 1 0 7.75"/></svg><span class="nav-text">Referrals</span></div>
<div class="nav-item" data-target="withdrawal-history">
<svg viewBox="0 0 24 24" style="filter:drop-shadow(0 0 8px rgba(168,85,247,0.4))">
<path d="M12 2v20" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
<path d="M8 12l4 4 4-4" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
</svg>
<span class="nav-text">Withdrawals</span>
</div>
</nav>
<script>
function updateSecurityStatus(m){document.getElementById('security-status')&&(document.getElementById('security-status').textContent=m),console.log('üîê Security Check:',m)}
function verifyTelegramMobileEnvironment(){updateSecurityStatus("Checking Telegram environment...");if(!window.Telegram?.WebApp)return{allowed:!1,reason:"‚ùå Telegram WebApp SDK not found - This is not Telegram Mobile App"};const t=window.Telegram.WebApp.initDataUnsafe?.user;if(!t||!t.id)return{allowed:!1,reason:"‚ùå User data not available - Open from Telegram Mobile App"};const n=window.Telegram.WebApp.platform;if(!['ios','android'].includes(n))return{allowed:!1,reason:`‚ùå Platform not allowed: ${n}. Only iOS/Android allowed`};const o=navigator.userAgent.toLowerCase(),i=window.location.hostname.includes('web.telegram.org');if(i)return{allowed:!1,reason:"üö´ Access from Telegram Web is not allowed. Open the app from Telegram Mobile App on your phone"};const a=o.includes('chrome')&&!o.includes('telegram')||o.includes('safari')&&!o.includes('telegram')||o.includes('firefox')||o.includes('edge')||o.includes('opera')||o.includes('mozilla')&&!o.includes('telegram');if(a)return{allowed:!1,reason:"üö´ Regular browsers are not allowed. Use Telegram Mobile App only"};const d=window.Telegram.WebApp.initData&&window.Telegram.WebApp.initData.length>50;if(!d)return{allowed:!1,reason:"üîí Authentication data invalid. Make sure to open the app from inside Telegram"};const r=window.self!==window.top&&window.parent.Telegram?.WebApp;if(!r&&!window.Telegram?.WebApp?.isIframe)return{allowed:!1,reason:"‚ùå Must be opened from inside Telegram interface"};return updateSecurityStatus("‚úÖ Telegram Mobile App verified"),{allowed:!0,userData:t,platform:n}}
function detectBlockedBrowsers(){const t=navigator.userAgent.toLowerCase(),n=[{name:"Telegram Web",pattern:"web.telegram.org",test:()=>window.location.hostname.includes('web.telegram.org')},{name:"Chrome",pattern:"chrome",test:()=>t.includes('chrome')&&!t.includes('telegram')&&!t.includes('edg')},{name:"Safari",pattern:"safari",test:()=>t.includes('safari')&&!t.includes('telegram')},{name:"Firefox",pattern:"firefox",test:()=>t.includes('firefox')},{name:"Edge",pattern:"edg",test:()=>t.includes('edg')},{name:"Opera",pattern:"opr|opera",test:()=>t.includes('opr')||t.includes('opera')},{name:"Desktop Browser",pattern:"mozilla|chrome|safari",test:()=>!t.includes('mobile')&&!t.includes('android')&&!t.includes('iphone')},{name:"Kiwi Browser",pattern:"kiwi",test:()=>t.includes('kiwi')||t.includes('kiwibrowser')}];for(const o of n)if(o.test())return{blocked:!0,browser:o.name,reason:`üö´ ${o.name} is not allowed. Use Telegram Mobile App only`};return{blocked:!1}}
function showBlockedAccessPage(t){document.getElementById('security-check').style.display='none',document.getElementById('blocked-access').style.display='flex',document.getElementById('blocked-reason').innerHTML=t,console.log('%cüö´ GLX Galaxy Security System','color: #e74c3c; font-size: 20px; font-weight: bold;'),console.log('%cThis web app only works inside Telegram Mobile App (iOS/Android)','color: #3498db;'),console.log('%cBlocked access from: '+navigator.userAgent,'color: #aaa;'),console.log('%cBlocked reason: '+t,'color: #e74c3c;')}
function openInTelegram(){window.location.href='tg://resolve?domain=GLXGalaxyBot',setTimeout(()=>{window.open('https://telegram.org/dl','_blank')},500)}
function initializeSecuritySystem(){console.log('%cüîê GLX Galaxy Security System Initializing...','color: #a855f7; font-size: 16px; font-weight: bold;'),updateSecurityStatus("Starting security checks..."),setTimeout(()=>{updateSecurityStatus("Checking browser type...");const t=detectBlockedBrowsers();if(t.blocked)return showBlockedAccessPage(t.reason),!1;updateSecurityStatus("Verifying Telegram Mobile App..."),setTimeout(()=>{const t=verifyTelegramMobileEnvironment();if(!t.allowed)return showBlockedAccessPage(t.reason),!1;const n=window.Telegram.WebApp.version,o='6.0';if(parseFloat(n)<parseFloat(o))return showBlockedAccessPage(`‚ùå Old Telegram version (${n}). Please update`),!1;updateSecurityStatus("‚úÖ Security checks passed!"),setTimeout(()=>{document.getElementById('security-check').style.display='none',startMainSecurityVerification(t.userData)},1e3)},1e3)},1e3);return!0}
const SECURITY_CONFIG={errorStyle:{background:'rgba(231, 76, 60, 0.1)',border:'1px solid rgba(231, 76, 60, 0.3)',color:'#e74c3c',borderRadius:'12px',padding:'15px',margin:'15px 0'},warningStyle:{background:'rgba(255, 193, 7, 0.1)',border:'1px solid rgba(255, 193, 7, 0.3)',color:'#FFC107',borderRadius:'12px',padding:'15px',margin:'15px 0'},successStyle:{background:'rgba(39, 174, 96, 0.1)',border:'1px solid rgba(39, 174, 96, 0.3)',color:'#27ae60',borderRadius:'12px',padding:'15px',margin:'15px 0'},infoStyle:{background:'rgba(52, 152, 219, 0.1)',border:'1px solid rgba(52, 152, 219, 0.3)',color:'#3498db',borderRadius:'12px',padding:'15px',margin:'15px 0'}};
function showStyledMessage(t,n='error',o='app-container'){const i=document.getElementById(o);if(!i)return;const a=i.querySelector('.security-message');a&&a.remove();const d=document.createElement('div');d.className='security-message';const r=SECURITY_CONFIG[n+'Style']||SECURITY_CONFIG.errorStyle;Object.assign(d.style,r);let e='‚ùå';n==='warning'?e='‚ö†Ô∏è':n==='success'?e='‚úÖ':n==='info'&&(e='‚ÑπÔ∏è'),d.innerHTML=`<div style="display: flex; align-items: center; gap: 10px; font-size: 14px;"><div style="font-size: 20px;">${e}</div><div>${t}</div></div>`,i.insertBefore(d,i.firstChild);return d}
function isTelegramMobileApp(){if(!window.Telegram?.WebApp)return!1;const t=navigator.userAgent||navigator.vendor||window.opera,n=t.includes('Telegram')||t.includes('TelegramBot')||window.Telegram.WebApp.platform==='ios'||window.Telegram.WebApp.platform==='android',o=window.Telegram.WebApp.initData&&window.Telegram.WebApp.initData.length>0;return n&&o}
function isTelegramWeb(){const t=window.location.hostname;return t.includes('web.telegram.org')}
function generateDeviceFingerprint(){const t=[];t.push(screen.width),t.push(screen.height),t.push(screen.colorDepth),t.push(navigator.platform),t.push(navigator.hardwareConcurrency||'unknown');const n=t.join('|');let o=0;for(let i=0;i<n.length;i++){const t=n.charCodeAt(i);o=(o<<5)-o+t,o=o&o}return'device_'+Math.abs(o).toString(16)}
function createVerificationStep(t,n,o,i='pending'){let a='üîí',d='<div class="verification-loading"></div>',r='';return i==='completed'?(a='‚úÖ',d='‚úì',r='completed'):i==='failed'?(a='‚ùå',d='‚úó',r='failed'):i==='active'&&(a='‚è≥',r='active'),`<div class="verification-step ${r}"><div class="step-icon">${a}</div><div class="step-info"><div class="step-title">${n}</div><div class="step-description">${o}</div></div><div class="step-status">${d}</div></div>`}
async function detectVPN(t){try{const n=['10.','172.16.','172.17.','172.18.','172.19.','172.20.','172.21.','172.22.','172.23.','172.24.','172.25.','172.26.','172.27.','172.28.','172.29.','172.30.','172.31.','192.168.','100.64.','100.65.','100.66.','100.67.','100.68.','100.69.','100.70.','100.71.','100.72.','100.73.','100.74.','100.75.','100.76.','100.77.','100.78.','100.79.','100.80.'];for(const o of n)if(t.startsWith(o))return!0;return!1}catch(t){return console.error('VPN detection error:',t),!1}}
async function getUserIP(){try{const t=await fetch('https://api.ipify.org?format=json'),n=await t.json();return n.ip}catch(t){return console.error('Error getting IP:',t),'Unknown'}}
async function performSecurityVerification(){const t=document.getElementById('verification-steps'),n=document.getElementById('verification-progress-bar'),o=document.getElementById('verification-result');t.innerHTML=createVerificationStep(1,'Telegram Environment Check','Verifying Telegram Mobile App...','active');if(!isTelegramMobileApp())return isTelegramWeb()?showBlockedAccess('‚ùå Please open this bot inside the official Telegram mobile app only.'):showBlockedAccess('‚ùå Unauthorized access. This bot only works in Telegram mobile app.'),!1;n.style.width='25%',await new Promise(t=>setTimeout(t,800)),t.innerHTML=createVerificationStep(1,'Telegram Environment Check','Verified: Official Telegram Mobile App','completed')+createVerificationStep(2,'User Account Check','Checking existing account...','active');const i=window.Telegram?.WebApp?.initDataUnsafe?.user;if(!i)return showBlockedAccess('‚ùå Unable to verify Telegram user.'),!1;const a={id:i.id.toString(),first_name:i.first_name,last_name:i.last_name||'',username:i.username||''};n.style.width='50%',await new Promise(t=>setTimeout(t,800));const d={apiKey:"AIzaSyC5dwRaz3L-aK7I5CoPkbB31MzXB62lgrU",authDomain:"earnmoney124553.firebaseapp.com",databaseURL:"https://earnmoney124553-default-rtdb.firebaseio.com",projectId:"earnmoney124553",storageBucket:"earnmoney124553.firebasestorage.app",messagingSenderId:"325528918523",appId:"1:325528918523:web:73d84f48a24c1e0cbfd35e",measurementId:"G-G1H96Q5XCJ"};firebase.initializeApp(d);const r=firebase.database();try{const d=await r.ref('users/'+a.id).once('value');if(d.exists()){t.innerHTML=createVerificationStep(1,'Telegram Environment Check','Verified: Official Telegram Mobile App','completed')+createVerificationStep(2,'User Account Check','Existing user detected','completed'),n.style.width='100%',o.innerHTML=`<div style="${SECURITY_CONFIG.successStyle.background}; ${SECURITY_CONFIG.successStyle.border}; border-radius: 12px; padding: 15px; text-align: center;"><div style="font-size: 20px; margin-bottom: 10px;">‚úÖ</div><div style="font-weight: 700; color: #27ae60; margin-bottom: 5px;">Welcome Back!</div><div style="font-size: 12px; color: var(--text-muted);">Security verification passed. Loading your account...</div></div>`,await new Promise(t=>setTimeout(t,1500));return{user:a,isExisting:!0,db:r}}t.innerHTML=createVerificationStep(1,'Telegram Environment Check','Verified: Official Telegram Mobile App','completed')+createVerificationStep(2,'User Account Check','New user detected','completed')+createVerificationStep(3,'IP Address Check','Checking IP address...','active'),n.style.width='66%',await new Promise(t=>setTimeout(t,800));const l=await getUserIP();t.innerHTML=createVerificationStep(1,'Telegram Environment Check','Verified: Official Telegram Mobile App','completed')+createVerificationStep(2,'User Account Check','New user detected','completed')+createVerificationStep(3,'IP Address Check',`Your IP: ${l}`,'completed')+createVerificationStep(4,'VPN Detection','Checking VPN status...','active'),n.style.width='75%',await new Promise(t=>setTimeout(t,800));const c=await detectVPN(l);if(c)return t.innerHTML=createVerificationStep(1,'Telegram Environment Check','Verified: Official Telegram Mobile App','completed')+createVerificationStep(2,'User Account Check','New user detected','completed')+createVerificationStep(3,'IP Address Check',`Your IP: ${l}`,'completed')+createVerificationStep(4,'VPN Detection','VPN detected - Access blocked','failed'),showBlockedAccess('üö´ Access blocked due to VPN usage.'),!1;t.innerHTML=createVerificationStep(1,'Telegram Environment Check','Verified: Official Telegram Mobile App','completed')+createVerificationStep(2,'User Account Check','New user detected','completed')+createVerificationStep(3,'IP Address Check',`Your IP: ${l}`,'completed')+createVerificationStep(4,'VPN Detection','No VPN detected','completed')+createVerificationStep(5,'Device Fingerprint Check','Checking device fingerprint...','active'),n.style.width='90%',await new Promise(t=>setTimeout(t,800));const p=generateDeviceFingerprint(),u=await r.ref('security/device_fingerprints/'+p).once('value');if(u.exists())return t.innerHTML=createVerificationStep(1,'Telegram Environment Check','Verified: Official Telegram Mobile App','completed')+createVerificationStep(2,'User Account Check','New user detected','completed')+createVerificationStep(3,'IP Address Check',`Your IP: ${l}`,'completed')+createVerificationStep(4,'VPN Detection','No VPN detected','completed')+createVerificationStep(5,'Device Fingerprint Check','Device already registered','failed'),showBlockedAccess('üîí This device is already registered.'),!1;t.innerHTML=createVerificationStep(1,'Telegram Environment Check','Verified: Official Telegram Mobile App','completed')+createVerificationStep(2,'User Account Check','New user detected','completed')+createVerificationStep(3,'IP Address Check',`Your IP: ${l}`,'completed')+createVerificationStep(4,'VPN Detection','No VPN detected','completed')+createVerificationStep(5,'Device Fingerprint Check','Device fingerprint verified','completed'),n.style.width='100%';const h={userId:a.id,ipAddress:l,deviceFingerprint:p,telegramId:a.id,registrationDate:Date.now()};await r.ref('security/verified_users/'+a.id).set(h),await r.ref('security/device_fingerprints/'+p).set({userId:a.id,registeredAt:Date.now()}),o.innerHTML=`<div style="${SECURITY_CONFIG.successStyle.background}; ${SECURITY_CONFIG.successStyle.border}; border-radius: 12px; padding: 15px; text-align: center;"><div style="font-size: 20px; margin-bottom: 10px;">‚úÖ</div><div style="font-weight: 700; color: #27ae60; margin-bottom: 5px;">Verification Complete!</div><div style="font-size: 12px; color: var(--text-muted);">All security checks passed. Welcome to GLX Galaxy!</div></div>`,await new Promise(t=>setTimeout(t,1500));return{user:a,isExisting:!1,db:r}}catch(t){return console.error('Security verification error:',t),showBlockedAccess('‚ö†Ô∏è System error during verification. Please try again.'),!1}}
function showBlockedAccess(t){document.getElementById('security-verification').style.display='none',document.getElementById('blocked-access-old').style.display='block',document.getElementById('blocked-reason-old').innerHTML=t}
function showMainApp(){document.getElementById('security-verification').style.display='none',document.getElementById('blocked-access-old').style.display='none',document.getElementById('app-container').style.display='block'}
async function startMainSecurityVerification(t){document.getElementById('security-verification').style.display='block';const n=await performSecurityVerification();if(!n)return;showMainApp();const{user:o,isExisting:i,db:a}=n;initializeMainApplication(o,i,a)}
function initializeMainApplication(t,n,o){const BOT_USERNAME='CashJungleBot',ADMIN_WALLET='UQCg1DjKHH1_guXQ0TFmkvj09igxYwEJGfKPijLaHyOHIPTX',GLX_TO_TON_RATE=1e-7,TON_TO_GLX_RATE=1e7,TICKET_PRICE=1e4,TICKET_TON_VALUE=1e-3,COMPETITION_DURATION=864e5,BREAK_DURATION=36e5,ADSGRAM_BLOCK_ID='int-18879',TG_BOT_TOKEN='8340000265:AAErFZF0d-khnKM8LxU0pU8T140-DdZLncQ';window.Telegram?.WebApp&&(window.Telegram.WebApp.ready(),window.Telegram.WebApp.expand(),window.Telegram.WebApp.headerColor='#202020',window.Telegram.WebApp.backgroundColor='#202020');let appData={},appSettings={},isAdScriptLoaded=!1,isLeaderboardLoaded=!1,AdController=null,selectedCategory='channel',selectedCount=100,selectedCost=.15,currentTaskId='',isSpinning=!1,slotsSymbols=['üåü','ü™ê','üí´','‚≠ê','üöÄ','üåå'],slotsPayouts={'üåüüåüüåü':1e4,'ü™êü™êü™ê':5e3,'üí´üí´üí´':2500,'‚≠ê‚≠ê‚≠ê':1200,'üåüüåü':700,'default':500},coinGame={isFlipping:!1,chosenSide:'glx',betAmount:1e3,lastFlipResult:null,winChance:45,lossChance:55,currentRotation:0,animationId:null},withdrawalType='faucetpay',swapDirection='glx_to_ton',competitionInterval=null,countdownInterval=null,competitionData={isActive:!0,startTime:Date.now(),endTime:Date.now()+COMPETITION_DURATION,totalTickets:0,prizePool:0,userTickets:0,winners:[]},lastAdClickTime=0,AD_CLICK_DELAY=3e3,currentDepositAmount=0,currentDepositMemo='',depositCheckInterval=null;n&&getUserIP().then(n=>{const i=generateDeviceFingerprint();o.ref('security/verified_users/'+t.id).update({lastLogin:Date.now(),lastIP:n,deviceFingerprint:i})}),window.selectSwapDirection=function(t){swapDirection=t,document.querySelectorAll('.swap-direction-btn').forEach(t=>t.classList.remove('active')),document.querySelectorAll('.swap-direction-btn').forEach(n=>{n.textContent.includes(t==='glx_to_ton'?'GLX ‚Üí TON':'TON ‚Üí GLX')&&n.classList.add('active')}),t==='glx_to_ton'?(document.getElementById('glx-to-ton-section').style.display='block',document.getElementById('ton-to-glx-section').style.display='none',document.querySelector('.page-header p').textContent='100K GLX = 0.01 TON'):(document.getElementById('glx-to-ton-section').style.display='none',document.getElementById('ton-to-glx-section').style.display='block',document.querySelector('.page-header p').textContent='0.01 TON = 100K GLX'),calculateSwap()},window.calculateSwap=function(){if(swapDirection==='glx_to_ton'){const t=parseFloat(document.getElementById('swap-input-amount').value)||0,n=t*GLX_TO_TON_RATE;document.getElementById('swap-output-amount').textContent=n.toFixed(7)}else{const t=parseFloat(document.getElementById('ton-input-amount').value)||0,n=t*TON_TO_GLX_RATE;document.getElementById('ton-output-amount').textContent=Math.floor(n).toLocaleString()}},window.setMaxSwap=function(t){if(t==='glx'||swapDirection==='glx_to_ton'){const n=appData.dogsBalance||0;if(n<1e3)return void showStyledMessage("Minimum swap is 1,000 GLX","warning","app-container");document.getElementById('swap-input-amount').value=n,calculateSwap()}else{const n=appData.tonBalance||0;if(n<1e-4)return void showStyledMessage("Minimum swap is 0.0001 TON","warning","app-container");document.getElementById('ton-input-amount').value=n.toFixed(4),calculateSwap()}},window.executeSwap=function(){swapDirection==='glx_to_ton'?executeGLXtoTONSwap():executeTONtoGLXSwap()};function executeGLXtoTONSwap(){const t=parseFloat(document.getElementById('swap-input-amount').value)||0,n=appData.dogsBalance||0;if(t<1e3)return void showStyledMessage("Min swap: 1,000 GLX","warning","app-container");if(t>n)return void showStyledMessage("Insufficient GLX Balance","warning","app-container");const i=t*GLX_TO_TON_RATE;if(!confirm(`Swap ${t.toLocaleString()} GLX for ${i.toFixed(7)} TON?\n\nRate: 100,000 GLX = 0.01 TON`))return;const a={};a[`users/${t.id}/dogsBalance`]=n-t,a[`users/${t.id}/tonBalance`]=(appData.tonBalance||0)+i,o.ref().update(a).then(()=>{addHistory('swap_out','Swap GLX to TON',t,'GLX'),addHistory('swap_in','Received from GLX Swap',i,'TON'),showStyledMessage(`Swap Complete!\n\n-${t.toLocaleString()} GLX\n+${i.toFixed(7)} TON`,"success","app-container"),document.getElementById('swap-input-amount').value='',document.getElementById('swap-output-amount').textContent='0.0000000',switchTab('home')}).catch(t=>{showStyledMessage("Error: "+t.message,"error","app-container")})}function executeTONtoGLXSwap(){const n=parseFloat(document.getElementById('ton-input-amount').value)||0,i=appData.tonBalance||0;if(n<1e-4)return void showStyledMessage("Min swap: 0.0001 TON","warning","app-container");if(n>i)return void showStyledMessage("Insufficient TON Balance","warning","app-container");const a=n*TON_TO_GLX_RATE;if(!confirm(`Swap ${n.toFixed(4)} TON for ${a.toLocaleString()} GLX?\n\nRate: 0.01 TON = 100,000 GLX`))return;const d={};d[`users/${t.id}/tonBalance`]=i-n,d[`users/${t.id}/dogsBalance`]=(appData.dogsBalance||0)+a,o.ref().update(d).then(()=>{addHistory('swap_out','Swap TON to GLX',n,'TON'),addHistory('swap_in','Received from TON Swap',a,'GLX'),showStyledMessage(`Swap Complete!\n\n-${n.toFixed(4)} TON\n+${a.toLocaleString()} GLX`,"success","app-container"),document.getElementById('ton-input-amount').value='',document.getElementById('ton-output-amount').textContent='0',switchTab('home')}).catch(t=>{showStyledMessage("Error: "+t.message,"error","app-container")})}window.openGame=function(t){document.getElementById('coin-flip-section').style.display='none',document.getElementById('promo-codes-section').style.display='none',document.getElementById('daily-streak-section').style.display='none',document.getElementById('galaxy-slots-section').style.display='none',document.querySelector('.bonus-grid').style.display='none',document.getElementById(t+'-section').style.display='block',t==='coin-flip'?resetCoinFlipGame():t==='galaxy-slots'&&(initSlotsGame(),updateAvailableSpins())},window.closeGame=function(){document.getElementById('coin-flip-section').style.display='none',document.getElementById('promo-codes-section').style.display='none',document.getElementById('daily-streak-section').style.display='none',document.getElementById('galaxy-slots-section').style.display='none',document.querySelector('.bonus-grid').style.display='grid'},window.maskEmail=function(){const t=document.getElementById('faucetpay-email'),n=document.getElementById('email-preview');if(!t||!n)return;const o=t.value.trim();o&&o.includes('@')?(([t,i]=o.split('@'),t.length>3?(o=`${t.charAt(0)}${'*'.repeat(Math.max(3,t.length-2))}${t.charAt(t.length-1)}@${i}`,n.textContent=o,n.style.display='block'):n.style.display='none')):n.style.display='none'},window.copyWalletAddress=function(){navigator.clipboard.writeText('UQCg1DjKHH1_guXQ0TFmkvj09igxYwEJGfKPijLaHyOHIPTX'),showStyledMessage('Wallet address copied!','success','app-container')},window.sendDepositPayment=function(){const n=document.getElementById('deposit-amount'),i=parseFloat(n.value);if(!i||i<.01)return void(showStyledMessage("Minimum deposit is 0.01 TON","warning","app-container"),n.focus());currentDepositAmount=i,currentDepositMemo=`deposit_${t.id}_${Date.now()}`,document.getElementById('send-deposit-btn').style.display='none',document.getElementById('verify-deposit-section').style.display='block',document.getElementById('deposit-memo-display').textContent=currentDepositMemo;const a=Math.floor(i*1e9),d=`https://app.tonkeeper.com/transfer/${ADMIN_WALLET}?amount=${a}&text=${currentDepositMemo}`;window.Telegram?.WebApp?window.Telegram.WebApp.openLink(d):window.open(d,'_blank');const r=document.getElementById('verify-deposit-btn');r.onclick=function(){verifyDepositTransaction()},clearInterval(depositCheckInterval),depositCheckInterval=setInterval(()=>{document.getElementById('verify-deposit-section').style.display!=='none'&&verifyDepositTransaction()},3e4)},window.verifyDepositTransaction=async function(){const n=document.getElementById('verify-deposit-btn'),i=document.getElementById('deposit-status-msg');if(n.disabled)return;n.disabled=!0;const a=n.innerHTML;n.innerHTML='<i class="fas fa-spinner fa-spin"></i> Checking...',i.textContent="Connecting to TON blockchain...",i.style.color="#ffb300";try{const d=await fetch(`https://tonapi.io/v2/blockchain/accounts/${ADMIN_WALLET}/transactions?limit=50`),r=await d.json();if(!r.transactions)throw new Error("API Error");let e=!1,l=null;for(const c of r.transactions)if(c.in_msg&&c.in_msg.decoded_body&&c.in_msg.decoded_body.text){const d=c.in_msg.decoded_body.text;if(d===currentDepositMemo){const r=c.in_msg.value/1e9;if(Math.abs(r-currentDepositAmount)<=1e-4){e=!0,l=c;break}}}if(e){clearInterval(depositCheckInterval);await o.ref(`users/${t.id}/tonBalance`).transaction(n=>(n||0)+currentDepositAmount),addHistory('deposit',`TON Deposit #${l.hash.substring(0,8)}`,currentDepositAmount,'TON'),i.innerHTML=`‚úÖ <strong>Deposit Verified!</strong><br>+${currentDepositAmount} TON added to your balance<br><small style="color: #aaa;">TX: ${l.hash.substring(0,12)}...</small>`,i.style.color="#27ae60",n.innerHTML='<i class="fa-solid fa-check"></i> VERIFIED',n.style.background='linear-gradient(135deg, #27ae60, #2ecc71)',setTimeout(()=>{renderUI()},1e3),setTimeout(()=>{document.getElementById('send-deposit-btn').style.display='block',document.getElementById('verify-deposit-section').style.display='none',document.getElementById('deposit-amount').value='0.01',n.disabled=!1,n.innerHTML='<i class="fa-solid fa-magnifying-glass"></i> CHECK DEPOSIT STATUS',n.style.background='linear-gradient(135deg, #3498db, #2980b9)',i.textContent="After sending payment, click here to check status",i.style.color="var(--text-muted)"},5e3)}else i.textContent="Deposit not found yet. Please wait 1-2 minutes and try again.",i.style.color="#e74c3c",n.disabled=!1,n.innerHTML='<i class="fa-solid fa-magnifying-glass"></i> CHECK AGAIN'}catch(n){console.error("Deposit verification error:",n),i.textContent="Error checking blockchain. Please try again.",i.style.color="#e74c3c",n.disabled=!1,n.innerHTML='<i class="fa-solid fa-magnifying-glass"></i> TRY AGAIN'}}function setupGalaxyLogButton(){const t=document.getElementById('galaxy-log-button');t&&t.addEventListener('click',function(){console.log("üìú Galaxy Log button clicked!"),switchTab('galaxy-log-page')})}function initializeCompetition(){o.ref('competition/current').on('value',t=>{if(t.exists()){const n=t.val();competitionData=n,n.userTickets&&typeof n.userTickets=='object'?n.userTickets[t.id]?competitionData.userTickets=parseInt(n.userTickets[t.id])||0:competitionData.userTickets=0:competitionData.userTickets=n.userTickets||0,updateCompetitionUI(),startCountdown()}else{const i={isActive:!0,startTime:Date.now(),endTime:Date.now()+COMPETITION_DURATION,totalTickets:0,prizePool:0,userTickets:{},winners:[],breakMode:!1,breakEndTime:0};o.ref('competition/current').set(i),competitionData=i}}),o.ref(`competition/current/userTickets/${t.id}`).on('value',t=>{const n=t.val()||0;competitionData.userTickets=parseInt(n)||0,document.getElementById('user-tickets').textContent=competitionData.userTickets.toString()}),loadPreviousWinners()}function updateCompetitionUI(){const n=Date.now(),i=competitionData.breakMode||!1;i?(document.getElementById('competition-status').textContent='BREAK',document.getElementById('competition-status').style.color='#FFC107'):(document.getElementById('competition-status').textContent=competitionData.isActive?'ACTIVE':'ENDED',document.getElementById('competition-status').style.color=competitionData.isActive?'#27ae60':'#e74c3c'),document.getElementById('prize-pool').textContent=competitionData.prizePool?competitionData.prizePool.toFixed(3)+' TON':'0.000 TON',document.getElementById('total-tickets').textContent=competitionData.totalTickets||0;let a=0;typeof competitionData.userTickets=='object'?a=competitionData.userTickets[t.id]||0:a=parseInt(competitionData.userTickets)||0,document.getElementById('user-tickets').textContent=a;const d=document.getElementById('ticket-amount');d&&updateTicketCostDisplay();const r=document.getElementById('buy-tickets-btn');r&&(r.disabled=i||!competitionData.isActive,r.style.opacity=i||!competitionData.isActive?'.5':'1'),updateCompetitionLeaderboard()}function startCountdown(){countdownInterval&&clearInterval(countdownInterval),countdownInterval=setInterval(()=>{const n=Date.now();let i=0,a=competitionData.breakMode||!1;a?i=Math.max(0,competitionData.breakEndTime-n):i=Math.max(0,competitionData.endTime-n),i<=0?(a?startNewCompetition():endCompetitionAndStartBreak(),void 0):(d=Math.floor(i/36e5),r=Math.floor(i%36e5/6e4),e=Math.floor(i%6e4/1e3),document.getElementById('countdown-timer').textContent=`${d.toString().padStart(2,'0')}:${r.toString().padStart(2,'0')}:${e.toString().padStart(2,'0')}`);var d,r,e},1e3)}function updateTicketCostDisplay(){const t=document.getElementById('ticket-amount');if(!t)return;const n=parseInt(t.value)||1,i=n*TICKET_PRICE;document.getElementById('tickets-count-display').textContent=n,document.getElementById('tickets-cost-display').textContent=i.toLocaleString()+' GLX'}window.setMaxTickets=function(){const n=appData.dogsBalance||0,i=Math.floor(n/TICKET_PRICE);if(i<1)return void showStyledMessage("You don't have enough GLX to buy a ticket (10,000 GLX required)","warning","app-container");const a=document.getElementById('ticket-amount');a.value=i,updateTicketCostDisplay()},window.buyTickets=function(){if(competitionData.breakMode)return void showStyledMessage("Competition is on break. Please wait for the next round.","warning","app-container");if(!competitionData.isActive)return void showStyledMessage("Competition has ended. Please wait for the next round.","warning","app-container");const n=document.getElementById('ticket-amount'),i=parseInt(n.value)||0;if(i<1)return void showStyledMessage("Please enter at least 1 ticket","warning","app-container");const a=i*TICKET_PRICE,d=appData.dogsBalance||0;if(a>d)return void showStyledMessage(`Insufficient GLX balance. You need ${a.toLocaleString()} GLX`,"warning","app-container");if(!confirm(`Buy ${i} ticket${i>1?'s':''} for ${a.toLocaleString()} GLX?\n\nEach ticket = 10,000 GLX = 0.001 TON\n\nüèÜ Remember: Only #1 wins, all others lose!`))return;const r=document.getElementById('buy-tickets-btn'),e=document.getElementById('buy-tickets-status');r.disabled=!0,r.innerHTML='<i class="fas fa-spinner fa-spin"></i> Processing...',e.textContent="Processing your purchase...",e.style.color="#FFC107",o.ref(`users/${t.id}/dogsBalance`).transaction(n=>(n||0)-a).then(()=>{const l={};o.ref(`competition/current/userTickets/${t.id}`).once('value').then(n=>{const c=parseInt(n.val())||0,d=c+i;l[`competition/current/userTickets/${t.id}`]=d,l[`competition/current/totalTickets`]=(competitionData.totalTickets||0)+i,l[`competition/current/prizePool`]=((competitionData.totalTickets||0)+i)*TICKET_TON_VALUE,o.ref().update(l).then(()=>{addHistory('spend',`Bought ${i} Competition Ticket${i>1?'s':''}`,a,'GLX'),r.disabled=!1,r.innerHTML='<i class="fa-solid fa-ticket"></i> BUY TICKETS',e.textContent=`‚úÖ Successfully purchased ${i} ticket${i>1?'s':''}!`,e.style.color="#27ae60",n.value=1,updateTicketCostDisplay(),setTimeout(()=>{e.textContent=""},3e3),renderUI()}).catch(t=>{console.error("Error updating competition data:",t),showStyledMessage("Error processing purchase. Please try again.","error","app-container"),r.disabled=!1,r.innerHTML='<i class="fa-solid fa-ticket"></i> BUY TICKETS',e.textContent="‚ùå Error processing purchase",e.style.color="#e74c3c"})}).catch(t=>{console.error("Error buying tickets:",t),showStyledMessage("Error processing purchase. Please try again.","error","app-container"),r.disabled=!1,r.innerHTML='<i class="fa-solid fa-ticket"></i> BUY TICKETS',e.textContent="‚ùå Error processing purchase",e.style.color="#e74c3c"})}).catch(t=>{console.error("Error buying tickets:",t),showStyledMessage("Error processing purchase. Please try again.","error","app-container"),r.disabled=!1,r.innerHTML='<i class="fa-solid fa-ticket"></i> BUY TICKETS',e.textContent="‚ùå Error processing purchase",e.style.color="#e74c3c"})}function updateCompetitionLeaderboard(){o.ref('competition/current/userTickets').once('value').then(t=>{const n=t.val()||{},i=document.getElementById('competition-leaderboard-list');if(!n||Object.keys(n).length===0)return i.innerHTML='<p style="text-align:center; padding: 20px; color:var(--text-muted);">No tickets purchased yet</p>',void 0;const a=[];Object.entries(n).forEach(([t,n])=>{const o=typeof n=='number'?n:n&&typeof n=='object'?0:parseInt(n)||0;a.push({userId:t,tickets:o})}),a.sort((t,n)=>n.tickets-t.tickets);const d=a.slice(0,10);if(i.innerHTML='',d.length===0)return i.innerHTML='<p style="text-align:center; padding: 20px; color:var(--text-muted);">No tickets purchased yet</p>',void 0;let r=0;d.forEach((n,a)=>{o.ref(`users/${n.userId}`).once('value').then(t=>{const o=t.val(),d=o?.name||'Anonymous',r=o?.photoUrl||'https://i.ibb.co/tTkJX1Qy/logo.png',e=a===0?'rank-1':a===1?'rank-2':a===2?'rank-3':'',l=`<div class="competition-rank-card ${e}"><div class="competition-rank">#${a+1}</div><img src="${r}" class="competition-user-avatar" alt="${d}"><div class="competition-user-info"><div class="competition-user-name">${d}</div></div><div class="competition-ticket-count">${n.tickets} ticket${n.tickets!==1?'s':''}</div></div>`;i.insertAdjacentHTML('beforeend',l),r++}).catch(()=>{const t=a===0?'rank-1':a===1?'rank-2':a===2?'rank-3':'',o=`<div class="competition-rank-card ${t}"><div class="competition-rank">#${a+1}</div><img src="https://i.ibb.co/tTkJX1Qy/logo.png" class="competition-user-avatar" alt="Anonymous"><div class="competition-user-info"><div class="competition-user-name">Anonymous</div></div><div class="competition-ticket-count">${n.tickets} ticket${n.tickets!==1?'s':''}</div></div>`;i.insertAdjacentHTML('beforeend',l)})})}).catch(t=>{console.error("Error loading leaderboard:",t);const n=document.getElementById('competition-leaderboard-list');n.innerHTML='<p style="text-align:center; padding: 20px; color:var(--text-muted);">Error loading leaderboard</p>'})}function loadPreviousWinners(){o.ref('competition/winners').orderByChild('timestamp').once('value').then(t=>{const n=document.getElementById('previous-winners-list'),i=[];t.forEach(t=>{i.push(t.val())}),i.sort((t,n)=>n.timestamp-t.timestamp),i.length===0&&(n.innerHTML='<p style="text-align:center; padding: 20px; color:var(--text-muted);">No previous winners yet</p>'),n.innerHTML='',i.forEach(t=>{const n=new Date(t.timestamp).toLocaleDateString(),i=t.prize?parseFloat(t.prize).toFixed(3):'0.000';o.ref(`users/${t.userId}`).once('value').then(o=>{const a=o.val(),d=a?.name||'Anonymous',r=a?.photoUrl||'https://i.ibb.co/tTkJX1Qy/logo.png',e=`<div class="winner-item"><div class="winner-rank">üèÜ</div><img src="${r}" class="winner-avatar" alt="${d}"><div class="winner-info"><div class="winner-name">${d}</div><div class="winner-date">${n}</div></div><div class="winner-prize">${i} TON</div></div>`;n.insertAdjacentHTML('beforeend',e)}).catch(()=>{const o=`<div class="winner-item"><div class="winner-rank">üèÜ</div><img src="https://i.ibb.co/tTkJX1Qy/logo.png" class="winner-avatar" alt="Anonymous"><div class="winner-info"><div class="winner-name">Anonymous</div><div class="winner-date">${n}</div></div><div class="winner-prize">${i} TON</div></div>`;n.insertAdjacentHTML('beforeend',o)})})}).catch(t=>{console.error("Error loading previous winners:",t)})}function endCompetitionAndStartBreak(){o.ref('competition/current/userTickets').once('value').then(t=>{const n=t.val()||{};if(Object.keys(n).length===0)return void startBreak();let i='',a=0;Object.entries(n).forEach(([t,n])=>{const o=parseInt(n)||0;o>a&&(a=o,i=t)});if(!i)return void startBreak();const d=competitionData.prizePool||0;o.ref(`users/${i}/tonBalance`).transaction(t=>(t||0)+d).then(()=>{const r={userId:i,tickets:a,prize:d,timestamp:Date.now()};o.ref('competition/winners').push(r),o.ref(`users/${i}/history`).push({type:'prize',description:`Won Daily Competition`,amount:d,currency:'TON',date:new Date().toISOString()}),startBreak(),i===t.id&&setTimeout(()=>{showStyledMessage(`üéâ CONGRATULATIONS! You won the competition!\n\nüèÜ Prize: ${d.toFixed(3)} TON\nüé´ Your tickets: ${a}\n\nüí∞ You are the ONLY winner - all other participants lost!`,"success","app-container")},1e3)}).catch(t=>{console.error("Error awarding prize:",t),startBreak()})}).catch(t=>{console.error("Error ending competition:",t),startBreak()})}function startBreak(){const t=Date.now()+BREAK_DURATION;o.ref('competition/current').update({isActive:!1,breakMode:!0,breakEndTime:t}).then(()=>{updateCompetitionUI()})}function startNewCompetition(){const t={isActive:!0,startTime:Date.now(),endTime:Date.now()+COMPETITION_DURATION,totalTickets:0,prizePool:0,userTickets:{},winners:[],breakMode:!1,breakEndTime:0};o.ref('competition/current').set(t).then(()=>{updateCompetitionUI(),loadPreviousWinners()})}window.setMaxBet=function(){const t=appData.dogsBalance||0,n=Math.floor(t/1e3)*1e3;n<1e3?showStyledMessage("Minimum bet is 1,000 GLX","warning","app-container"):(document.getElementById('coin-bet-amount').value=n,coinGame.betAmount=n)},window.setMaxFaucetPay=function(){const t=appData.tonBalance||0,n=1e-4;t<n?showStyledMessage(`Minimum withdrawal is ${n} TON`,"warning","app-container"):document.getElementById('faucetpay-amount').value=t.toFixed(4)},window.setMaxTonWallet=function(){const t=appData.tonBalance||0,n=.05;t<n?showStyledMessage(`Minimum withdrawal is ${n} TON`,"warning","app-container"):document.getElementById('ton-withdraw-amount').value=t.toFixed(2)},window.renderGalaxyLog=function(){const t=appData.history?Object.values(appData.history).sort((t,n)=>new Date(n.date)-new Date(t.date)):[],n=[0,0];t.forEach(t=>{t.type.includes('earn')||t.type==='referral'?n[0]+=parseFloat(t.amount)||0:t.type.includes('spend')||t.type.includes('loss')||t.type.includes('withdraw')&&(n[1]+=parseFloat(t.amount)||0)}),document.getElementById('total-earned').textContent=Math.floor(n[0]).toLocaleString()+' GLX',document.getElementById('total-spent').textContent=Math.floor(n[1]).toLocaleString()+' GLX',filterLogs('all')},window.filterLogs=function(n){const i=appData.history?Object.values(appData.history).sort((t,n)=>new Date(n.date)-new Date(t.date)):[],a=document.getElementById('galaxy-log-filtered-list');a.innerHTML='';const d=i.filter(t=>{if(n==='all')return!0;if(n==='earn')return t.type.includes('earn')||t.type==='referral';if(n==='spend')return t.type.includes('spend')||t.type.includes('loss');if(n==='swap')return t.type.includes('swap');if(n==='withdraw')return t.type.includes('withdraw');return!0});d.forEach(t=>{let n='üìú',i='#fff',a='';t.type.includes('earn')||t.type==='referral'?(n='üí∞',i='#27ae60',a='earn'):t.type.includes('spend')||t.type.includes('loss')?(n='üìâ',i='#e74c3c',a='spend'):t.type.includes('swap')?(n='üîÑ',i='#3498db',a='swap'):t.type.includes('withdraw')&&(n='üè¶',i='#9b59b6',a='withdraw');const d=t.currency==='TON'?parseFloat(t.amount).toFixed(4)+' TON':Math.floor(t.amount).toLocaleString()+' GLX',r=`<div class="log-item ${a}"><div style="font-size: 20px; margin-right: 12px;">${n}</div><div style="flex: 1;"><div style="font-size: 13px; font-weight: 600; margin-bottom: 2px;">${t.description}</div><div style="font-size: 10px; color: var(--text-muted);">${new Date(t.date).toLocaleString()}</div></div><div style="font-size: 14px; font-weight: 700; color: ${i};">${d}</div></div>`;a.insertAdjacentHTML('beforeend',r)})},window.filterUserWithdrawals=function(t){updateUserWithdrawalsList(t)};function updateUserWithdrawalsStats(){o.ref('withdrawals').orderByChild('timestamp').once('value').then(t=>{let n=0,i=0,a=0,d=[];t.forEach(t=>{const o=t.val();o.userId===t.id&&(d.push({...o,key:t.key}),o.status==='pending'||o.processed===!1?n++:o.status==='completed'||o.processed===!0&&(i++,a+=parseFloat(o.amount||0)))}),d.sort((t,n)=>n.timestamp-t.timestamp),document.getElementById('pending-withdrawals').textContent=n,document.getElementById('completed-withdrawals').textContent=i,document.getElementById('total-sent-ton').textContent=a.toFixed(4)+' TON';const r=n+i,l=r>0?Math.round(i/r*100):100;document.getElementById('success-rate').textContent=l+'%',updateUserWithdrawalsList('all')})}function updateUserWithdrawalsList(t){o.ref('withdrawals').orderByChild('timestamp').once('value').then(n=>{const i=document.getElementById('user-withdrawals-list');i.innerHTML='';const a=[];n.forEach(t=>{const n=t.val();n.userId===t.id&&a.push({...n,key:t.key})}),a.sort((t,n)=>n.timestamp-t.timestamp);const d=a.filter(n=>{if(t==='all')return!0;if(t==='pending')return n.status==='pending'||n.processed===!1;if(t==='completed')return n.status==='completed'||n.processed===!0;return!0});if(d.length===0)return i.innerHTML='<p style="text-align:center; padding: 20px; color:var(--text-muted);">No withdrawals found</p>',void 0;d.forEach(t=>{const n=getTimeAgo(t.timestamp),i=parseFloat(t.amount||0).toFixed(7);let a='',o='',d='';t.status==='rejected'?(a='rejected',o='‚ùå Rejected',d='status-rejected'):t.status==='completed'||t.processed===!0?(a='completed',o='‚úÖ Completed',d='status-completed'):(a='pending',o='‚è≥ Pending',d='status-pending');let r=t.account||'';t.method==='faucetpay'&&r.includes('@')&&(([t,n]=r.split('@'),t.length>3&&(r=t.charAt(0)+'*'.repeat(Math.max(3,t.length-2))+t.charAt(t.length-1)+'@'+n))),t.method==='ton'&&r.length>16&&(r=r.substring(0,8)+'...'+r.substring(r.length-4));const e=`<div class="user-withdrawal-item"><div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 5px;"><div style="font-size: 12px; font-weight: 600;">${t.method==='ton'?'TON Wallet':'FaucetPay'}</div><div class="withdrawal-status ${d}">${o}</div></div><div style="font-size: 11px; color: var(--text-muted); margin-bottom: 5px;" class="masked-email">${r}</div><div style="display: flex; justify-content: space-between; align-items: center;"><div style="font-size: 14px; font-weight: 700; color: var(--primary-green);">${i} TON</div><div style="font-size: 9px; color: var(--text-muted);">${n}</div></div></div>`;i.insertAdjacentHTML('beforeend',e)})})}function getTimeAgo(t){if(!t)return"Unknown time";const n=Date.now(),i=n-t,o=Math.floor(i/1e3),a=Math.floor(o/60),d=Math.floor(a/60),r=Math.floor(d/24);return r>0?`${r} day${r>1?'s':''} ago`:d>0?`${d} hour${d>1?'s':''} ago`:a>0?`${a} minute${a>1?'s':''} ago`:o>0?`${o} second${o!==1?'s':''} ago`:"Just now"}function initializeApp(){const n=`${t.first_name} ${t.last_name}`.trim();document.getElementById('home-username').textContent=n,document.getElementById('referral-link-display').textContent=`https://t.me/${BOT_USERNAME}?startapp=ref${t.id}`,document.getElementById('deposit-memo-id').textContent=t.id,window.Adsgram&&(AdController=window.Adsgram.init({blockId:ADSGRAM_BLOCK_ID})),fetchAppSettings(),setupEventListeners(),setupGalaxyLogButton(),renderCreateTaskUI(),initSlotsGame(),initCoinFlipGame(),initPromoCodes(),initializeCompetition(),setTimeout(()=>{isAdScriptLoaded=typeof show_10286382=="function"},2500),selectWithdrawalType('faucetpay'),selectSwapDirection('glx_to_ton');const i=document.getElementById('ticket-amount');i&&(i.addEventListener('input',updateTicketCostDisplay),updateTicketCostDisplay())}function initializeUser(){o.ref('users/'+t.id).on('value',t=>{const n=t.val();if(n&&n.banned===!0)return document.body.innerHTML=`<div style="background:#000; color:#ff4444; height:100vh; display:flex; flex-direction:column; justify-content:center; align-items:center; text-align:center; font-family:sans-serif;"><div style="font-size:50px;">üö´</div><h2>ACCESS BLOCKED</h2><p>Reason: ${n.banReason||'Violation of rules'}</p></div>`,void 0;const i=`${t.first_name} ${t.last_name}`.trim();if(t.exists()){appData=t.val();const o=new Date().toDateString();if(appData.lastAdDate!==o){const t={adsWatched:0,adsMonetag:0,adsGiga:0,adsAdsgram:0,lastAdDate:o};o.ref('users/'+t.id).update(t),appData.adsWatched=0,appData.adsMonetag=0,appData.adsGiga=0,appData.adsAdsgram=0}appData.name!==i&&o.ref('users/'+t.id).update({name:i})}else appData={id:t.id,name:i,dogsBalance:500,tonBalance:0,adsWatched:0,adsMonetag:0,adsGiga:0,adsAdsgram:0,completedTasks:{},history:{},referrals:0,dailyStreak:0,lastDailyClaim:0,extraSpins:1,referredUsers:[],usedPromoCodes:[]},o.ref('users/'+t.id).set(appData).then(()=>{addHistory('earn','Welcome Bonus',500,'GLX')});handleReferral(),renderUI(),renderDailyBonusUI(),updateAvailableSpins()})}function fetchAppSettings(){o.ref('settings').on('value',t=>{appSettings=t.val()||{adRewardMonetag:1e3,adRewardGiga:2e3,adRewardAdsgram:2e3,limitMonetag:50,limitGiga:300,limitAdsgram:300,minTonWithdrawal:.05,minFaucetPayWithdrawal:1e-4,referralReward:500,pricePerClick:.0015},initializeUser(),calculateCost()})}function getLevel(t){return t>=5e6?10:t>=25e5?9:t>=1e6?8:t>=5e5?7:t>=25e4?6:t>=1e5?5:t>=5e4?4:t>=25e3?3:t>=5e3?2:1}function renderUI(){if(!appData)return;const n=Math.floor(appData.dogsBalance||0),i=(appData.tonBalance||0).toFixed(7),a=getLevel(n);document.getElementById('home-user-level').textContent=`Level ${a}`,document.getElementById('total-GLX-balance').textContent=n.toLocaleString(),document.getElementById('home-ton-balance').textContent=parseFloat(i).toFixed(4),document.getElementById('swap-max-GLX').textContent=n.toLocaleString(),document.getElementById('swap-max-TON').textContent=parseFloat(i).toFixed(4),document.querySelectorAll('.user-ton-balance').forEach(t=>t.textContent=parseFloat(i).toFixed(4)),document.getElementById('referral-count-display').textContent=appData.referrals||0,document.getElementById('hud-glx-balance').textContent=n.toLocaleString(),document.getElementById('hud-ton-balance').textContent=parseFloat(i).toFixed(4);const d=appData.adsMonetag||0,r=appData.adsGiga||0,e=appData.adsAdsgram||0,l=appSettings.limitMonetag||50,c=appSettings.limitGiga||300,p=appSettings.limitAdsgram||300;document.getElementById('monetag-count').textContent=d,document.getElementById('monetag-limit').textContent=l,document.getElementById('giga-count').textContent=r,document.getElementById('giga-limit').textContent=c,document.getElementById('adsgram-count').textContent=e,document.getElementById('adsgram-limit').textContent=p,d>=l&&(n=document.getElementById('monetag-ad-task'),n.style.opacity='.5',n.style.pointerEvents='none'),r>=c&&(n=document.getElementById('gigapub-ad-task'),n.style.opacity='.5',n.style.pointerEvents='none'),e>=p&&(n=document.getElementById('adsgram-ad-task'),n.style.opacity='.5',n.style.pointerEvents='none'),fetchAndRenderTasks(),renderHistory(document.getElementById('full-history-list'),50),renderReferredUsers(),calculateSwap()}function resetCoinFlipGame(){const t=document.getElementById('coin');t.classList.remove('coin-spinning','coin-final'),t.style.transform='rotateY(0deg)',t.style.transition='none',document.getElementById('coin-game-result').style.display='none',document.querySelectorAll('.side-btn').forEach(t=>{t.classList.remove('win','lose'),t.id==='choose-glx'?t.classList.add('active'):t.classList.remove('active')}),coinGame.isFlipping=!1,coinGame.chosenSide='glx',coinGame.betAmount=1e3,coinGame.currentRotation=0,document.getElementById('coin-bet-amount').value=1e3,updateBetButtons()}window.initCoinFlipGame=function(){resetCoinFlipGame()};function updateBetButtons(){const t=[1e3,5e3,1e4,25e3],n=document.querySelectorAll('.bet-btn');n.forEach((n,o)=>{if(o<t.length){n.textContent=t[o]>=1e3?t[o]/1e3+'k':t[o],n.dataset.amount=t[o],t[o]===1e3?n.classList.add('active'):n.classList.remove('active')}})}window.setBetAmount=function(t){coinGame.betAmount=t,document.getElementById('coin-bet-amount').value=t,document.querySelectorAll('.bet-btn').forEach(n=>{n.classList.remove('active');const o=parseInt(n.dataset.amount)||0;o===t&&n.classList.add('active')})},window.chooseSide=function(t){coinGame.chosenSide=t,document.querySelectorAll('.side-btn').forEach(n=>{n.classList.remove('active'),n.classList.remove('win'),n.classList.remove('lose')});const n=t==='glx'?document.getElementById('choose-glx'):document.getElementById('choose-gold');n.classList.add('active')},window.flipCoin=function(){if(coinGame.isFlipping)return;const t=document.getElementById('coin-bet-amount'),n=parseInt(t.value);if(!n||n<1e3)return showStyledMessage("‚ùå Minimum bet is 1,000 GLX","warning","app-container"),void(t.focus(),t.style.borderColor='#e74c3c',setTimeout(()=>t.style.borderColor='',2e3));const i=appData.dogsBalance||0;if(n>i)return void showStyledMessage("üí∞ Insufficient GLX balance!","warning","app-container");coinGame.betAmount=n,coinGame.isFlipping=!0;const a=document.getElementById('coin');a.classList.remove('coin-spinning','coin-final'),a.style.transform='rotateY(0deg)',a.style.transition='none';const d=document.getElementById('coin-game-result');d.style.display='none',document.querySelectorAll('.bet-btn').forEach(t=>{t.style.opacity='.5',t.style.pointerEvents='none'}),document.querySelectorAll('.side-btn').forEach(t=>{t.classList.remove('win','lose')}),o.ref(`users/${t.id}/dogsBalance`).transaction(t=>{const o=(t||0)-n;return o<0?0:o}).then(()=>{addHistory('loss',`Coin Flip Bet (${coinGame.chosenSide.toUpperCase()})`,n,'GLX');const r=document.getElementById('flip-coin-btn');r.disabled=!0,r.innerHTML='<i class="fas fa-spinner fa-spin"></i> FLIPPING...',setTimeout(()=>{const a=Math.random()*100,i=a<coinGame.winChance,o=i?coinGame.chosenSide:coinGame.chosenSide==='glx'?'gold':'glx';let l=0;o==='glx'?l=720+Math.floor(4*Math.random())*360:l=720+180+Math.floor(4*Math.random())*360,a.style.setProperty('--final-rotation',`${l}deg`),a.classList.add('coin-spinning'),setTimeout(()=>{setTimeout(()=>{a.classList.remove('coin-spinning'),a.classList.add('coin-final'),showCoinFlipResult(i,o,n,l),r.disabled=!1,r.innerHTML='<i class="fa-solid fa-play"></i> FLIP COIN',document.querySelectorAll('.bet-btn').forEach(t=>{t.style.opacity='1',t.style.pointerEvents='auto'}),coinGame.isFlipping=!1,coinGame.lastFlipResult=o,coinGame.currentRotation=l%360,setTimeout(()=>{renderUI()},500)},2500)},50)},100)}).catch(t=>{console.error("Error deducting bet:",t),showStyledMessage("Error processing bet. Please try again.","error","app-container"),coinGame.isFlipping=!1;const n=document.getElementById('flip-coin-btn');n.disabled=!1,n.innerHTML='<i class="fa-solid fa-play"></i> FLIP COIN',document.querySelectorAll('.bet-btn').forEach(t=>{t.style.opacity='1',t.style.pointerEvents='auto'})})};function showCoinFlipResult(t,n,i,a){const d=document.getElementById('coin-game-result'),r=document.getElementById('coin-result-text'),e=document.getElementById('coin-win-amount'),l=document.getElementById('coin-loss-amount');e.style.display='none',l.style.display='none',t?(o=2*i,o.ref(`users/${t.id}/dogsBalance`).transaction(t=>(t||0)+o),r.innerHTML=`üéâ <strong>YOU WIN!</strong><br>${coinGame.chosenSide.toUpperCase()} appeared!`,r.style.color='#27ae60',e.textContent=`+${o.toLocaleString()} GLX`,e.style.display='block',addHistory('earn',`Coin Flip Win (${coinGame.chosenSide})`,o,'GLX'),(n=coinGame.chosenSide==='glx'?document.getElementById('choose-glx'):document.getElementById('choose-gold')).classList.add('win'),n.classList.remove('active'),o>=5e3&&setTimeout(()=>{showStyledMessage(`üéä BIG WIN! You won ${o.toLocaleString()} GLX!`,"success","app-container")},500)):(o=i,r.innerHTML=`üò¢ <strong>YOU LOSE</strong><br>${n.toUpperCase()} appeared`,r.style.color='#e74c3c',l.textContent=`-${o.toLocaleString()} GLX`,l.style.display='block',(n=coinGame.chosenSide==='glx'?document.getElementById('choose-glx'):document.getElementById('choose-gold')).classList.add('lose'),n.classList.remove('active')),d.style.display='block';const o=document.getElementById('coin');setTimeout(()=>{o.style.transform=`rotateY(${a}deg)`},100)}function initPromoCodes(){const t=document.getElementById('redeem-code-btn'),n=document.getElementById('promo-code-input');t&&t.addEventListener('click',handlePromoCode),n&&n.addEventListener('keypress',function(t){'Enter'===t.key&&handlePromoCode()})}function handlePromoCode(){const t=document.getElementById('promo-code-input'),n=document.getElementById('promo-result'),o=document.getElementById('redeem-code-btn');if(!t||!n||!o)return;const i=t.value.trim().toUpperCase();if(!i)return void showPromoResult('Please enter a promo code','error');o.disabled=!0,o.innerHTML='<i class="fas fa-spinner fa-spin"></i> Checking...',setTimeout(()=>{const a={'WELCOME100':100,'GALAXY500':500,'STAR1000':1e3,'BONUS2000':2e3,'VIP5000':5e3},d=appData.usedPromoCodes||[];d.includes(i)?showPromoResult('‚ùå This code has already been used','error'):a[i]?(r=a[i],o.ref(`users/${t.id}`).update({dogsBalance:(appData.dogsBalance||0)+r}),o.ref(`users/${t.id}/usedPromoCodes`).transaction(t=>t?t.includes(i)?t:(t.push(i),t):[i]),addHistory('earn',`Promo Code: ${i}`,r,'GLX'),showPromoResult(`üéâ Success! You got +${r} GLX`,'success'),t.value='',renderUI()):showPromoResult('‚ùå Invalid or expired promo code','error'),o.disabled=!1,o.innerHTML='<i class="fa-solid fa-gift"></i> Redeem'},1500);var r}function showPromoResult(t,n){const o=document.getElementById('promo-result');if(!o)return;o.textContent=t,o.style.display='block',n==='success'?(o.style.background='rgba(39, 174, 96, 0.2)',o.style.border='1px solid rgba(39, 174, 96, 0.5)',o.style.color='#27ae60'):n==='error'?(o.style.background='rgba(231, 76, 60, 0.2)',o.style.border='1px solid rgba(231, 76, 60, 0.5)',o.style.color='#e74c3c'):(o.style.background='rgba(255, 193, 7, 0.2)',o.style.border='1px solid rgba(255, 193, 7, 0.5)',o.style.color='#FFC107'),setTimeout(()=>{o.style.display='none'},5e3)}window.selectCat=function(t,n){document.querySelectorAll('.cat-opt').forEach(t=>t.classList.remove('active')),t.classList.add('active'),selectedCategory=n;const o=document.getElementById('admin-required-msg');n==='channel'?o.style.display='block':o.style.display='none'}function renderCreateTaskUI(){const t=document.getElementById('price-options');t.innerHTML='';const n=[100,500,1e3,2e3,5e3,1e4];n.forEach((n,o)=>{const i=`<div class="price-opt ${0===o?'active':''}" data-count="${n}" onclick="selectPrice(this)"><div class="price-count">${n.toLocaleString()}</div><div class="price-cost" id="cost-${n}">Loading...</div></div>`;t.insertAdjacentHTML('beforeend',i)}),calculateCost()}window.selectPrice=function(t){document.querySelectorAll('.price-opt').forEach(t=>t.classList.remove('active')),t.classList.add('active'),selectedCount=parseInt(t.dataset.count),calculateCost()}function calculateCost(){const t=appSettings.pricePerClick||.0015;document.querySelectorAll('.price-opt').forEach(n=>{const o=parseInt(n.dataset.count),i=(o*t).toFixed(4),a=n.querySelector('.price-cost');a&&(a.textContent=`${i} TON`)}),selectedCost=(selectedCount*t).toFixed(4),document.getElementById('pay-amount-display').textContent=selectedCost}window.initiatePayment=function(){const n=document.getElementById('new-task-name').value.trim(),i=document.getElementById('new-task-link').value.trim();if(!n||!i)return void showStyledMessage("Please fill all fields.","warning","app-container");if(!i.startsWith('http'))return void showStyledMessage("Invalid link.","warning","app-container");currentTaskId='task_'+Math.floor(Date.now()/1e3);const a={id:currentTaskId,title:n,description:`Reward: ${selectedCategory.toUpperCase()}`,link:i,reward:2e3,category:'community',total:selectedCount,remaining:selectedCount,status:'pending',creator:t.id,cost:selectedCost};o.ref('tasks/'+currentTaskId).set(a);const d=Math.floor(selectedCost*1e9),r=`https://app.tonkeeper.com/transfer/${ADMIN_WALLET}?amount=${d}&text=${currentTaskId}`;window.Telegram?.WebApp?window.Telegram.WebApp.openLink(r):window.open(r,'_blank'),document.getElementById('payment-step-1').style.display='none',document.getElementById('payment-step-2').style.display='block'}window.verifyPayment=async function(){const n=document.getElementById('check-payment-btn'),i=document.getElementById('payment-status-msg');n.disabled=!0,n.textContent="Checking Blockchain...",i.textContent="Connecting to TON API...",i.style.color="#ffb300";try{const a=await fetch(`https://tonapi.io/v2/blockchain/accounts/${ADMIN_WALLET}/transactions?limit=20`),d=await a.json();if(!d.transactions)throw new Error("API Error");let r=!1;for(const t of d.transactions)if(t.in_msg&&t.in_msg.decoded_body&&t.in_msg.decoded_body.text&&t.in_msg.decoded_body.text===currentTaskId){r=!0;break}r?(i.textContent="Payment Verified! Activating Mission...",i.style.color="#a855f7",o.ref('tasks/'+currentTaskId).update({status:'active'}).then(()=>{showStyledMessage("Success! Your mission is now live.","success","app-container"),document.getElementById('payment-step-1').style.display='block',document.getElementById('payment-step-2').style.display='none',document.getElementById('new-task-name').value='',document.getElementById('new-task-link').value='',n.disabled=!1,n.textContent="Check Payment",switchTab('tasks')})):(i.textContent="Payment not found yet. Please wait 10s and try again.",i.style.color="#e74c3c",n.disabled=!1,n.textContent="Check Again")}catch(t){console.error(t),i.textContent="Error checking payment. Try again.",n.disabled=!1,n.textContent="Check Again"}}function initSlotsGame(){for(let t=1;t<=3;t++){const n=document.getElementById(`reel${t}`);n.innerHTML='';for(let t=0;t<10;t++)slotsSymbols.forEach(t=>{const o=document.createElement('div');o.className='slot-item',o.textContent=t,n.appendChild(o)})}document.getElementById('slots-spin-btn').addEventListener('click',handleSlotsSpin)}function updateAvailableSpins(){const t=appData.extraSpins||0;document.getElementById('available-spins').textContent=t;const n=document.getElementById('slots-spin-btn');t>0?(n.disabled=!1,n.classList.remove('btn-disabled'),n.textContent=`üöÄ SPIN NOW (${t} left)`):(n.disabled=!0,n.classList.add('btn-disabled'),n.textContent="üöÄ NO SPINS LEFT")}function handleSlotsSpin(){if(isSpinning)return;const t=appData.extraSpins||0;if(t<=0)return void showStyledMessage("You don't have any spins left! Watch an ad to get more spins.","warning","app-container");isSpinning=!0;const n=document.getElementById('slots-spin-btn'),o=document.getElementById('slots-result-text'),i=document.getElementById('slots-win-amount');n.disabled=!0,o.textContent="Spinning...",i.textContent="0 GLX";const a=[];for(let t=0;t<3;t++){const n=Math.floor(Math.random()*slotsSymbols.length);a.push(slotsSymbols[n])}const d=[0,0,0];for(let t=0;t<3;t++){const n=slotsSymbols.indexOf(a[t]);d[t]=-(n+5)*80}const r=[document.getElementById('reel1'),document.getElementById('reel2'),document.getElementById('reel3')];r.forEach((t,n)=>{t.style.transition='transform 2s cubic-bezier(0.1, 0, 0.2, 1)',t.style.transform=`translateY(${d[n]}px)`}),setTimeout(()=>{const t=a.join('');let n=0;t==='üåüüåüüåü'?n=1e4:t==='ü™êü™êü™ê'?n=5e3:t==='üí´üí´üí´'?n=2500:t==='‚≠ê‚≠ê‚≠ê'?n=1200:a[0]==='üåü'&&a[1]==='üåü'?n=700:a[1]==='üåü'&&a[2]==='üåü'?n=700:a[0]===a[1]||a[1]===a[2]||a[0]===a[2]&&(n=500),n>0?(o.textContent=`üéâ You won! (${t})`,i.textContent=`+${n} GLX`,o.ref(`users/${t.id}`).update({extraSpins:t-1,dogsBalance:(appData.dogsBalance||0)+n}),addHistory('earn',`Galaxy Slots Win (${t})`,n,'GLX'),n>=1e3&&setTimeout(()=>{showStyledMessage(`üéä JACKPOT! You won ${n} GLX!`,"success","app-container")},500)):(o.textContent=`No win this time (${t})`,i.textContent="0 GLX",o.ref(`users/${t.id}`).update({extraSpins:t-1})),setTimeout(()=>{isSpinning=!1,updateAvailableSpins()},1e3)},2e3)}window.getExtraSpin=function(){typeof window.showGiga=="function"?window.showGiga().then(()=>{o.ref(`users/${t.id}/extraSpins`).transaction(t=>(t||0)+1).then(()=>{showStyledMessage("üéâ You earned an extra spin!","success","app-container"),addHistory('earn','Extra Spin from Ad',1,'Spin'),updateAvailableSpins()}).catch(t=>{console.error("Database error:",t})}).catch(t=>{console.error("Ad error:",t),showStyledMessage("Ad not available.","warning","app-container")}):showStyledMessage("Ads system loading...","info","app-container")}function renderDailyBonusUI(){const n=document.getElementById('daily-checkin-grid');n.innerHTML='';const i=appData.dailyStreak||0,a=appData.lastDailyClaim||0,d=Date.now(),r=864e5,l=d-a>=r,c=[2e3,3e3,5e3,7e3,9e3,12e3,15e3];for(let t=0;t<7;t++){let o='';t<i?o='claimed':t===i&&l&&(o='active');const d=`<div class="daily-box ${o}"> <div style="font-size:9px;">DAY ${t+1}</div> <div style="font-weight:700;">+${c[t]}</div> </div>`;n.insertAdjacentHTML('beforeend',d)}const p=document.getElementById('claim-daily-btn'),u=document.getElementById('next-claim-timer');l?(p.disabled=!1,p.classList.remove('btn-disabled'),p.textContent=`Claim +${c[i]||100}`,u.textContent="Ready to claim!"):(p.disabled=!0,p.classList.add('btn-disabled'),p.textContent="Claimed",e=r-(d-a),h=Math.floor(e/36e5),m=Math.floor(e%36e5/6e4),u.textContent=`Next reward in: ${h}h ${m}m`);var e,h,m}function handleDailyClaim(){const n=Date.now(),i=appData.lastDailyClaim||0;let a=appData.dailyStreak||0;n-i>1728e5&&(a=0),a>=7&&(a=0);const d=[100,200,300,400,500,1e3,2500],r=d[a];o.ref(`users/${t.id}`).update({lastDailyClaim:n,dailyStreak:a+1,dogsBalance:(appData.dogsBalance||0)+r}),addHistory('earn',`Daily Login Day ${a+1}`,r,'GLX')}function addHistory(t,n,o,i){const a=parseFloat(o)||0;if(0===a&&'swap_in'===t){if(n.includes('GLX Swap')){const t=parseFloat(document.getElementById('swap-input-amount').value)||0,o=t*GLX_TO_TON_RATE;a=o}}o.ref(`users/${t.id}/history`).push({type:t,description:n,amount:a,currency:i,date:new Date().toISOString()})}function renderHistory(t,n){t.innerHTML='';const o=appData.history?Object.values(appData.history).sort((t,n)=>new Date(n.date)-new Date(t.date)).slice(0,n):[];if(0===o.length)return t.innerHTML='<p style="text-align:center; padding: 20px 0; font-size:12px; color:var(--text-muted);">No logs yet.</p>',void 0;o.forEach(t=>{const n=t.type.includes('withdraw')||t.type.includes('loss')||t.type.includes('swap_out'),o=n?'-':'+',i=n?'#fff':'var(--primary-green)';let a=t.amount;'TON'===t.currency?a=parseFloat(t.amount).toFixed(7):a=Number(t.amount).toLocaleString();let d='https://i.ibb.co/tTkJX1Qy/logo.png';const r=t.description.toLowerCase();'TON'===t.currency?d='https://i.ibb.co/8DsyHqwK/toncoin-ton-logo.png':r.includes('ad')?d='https://i.ibb.co/tTkJX1Qy/logo.png':r.includes('telegram')||r.includes('channel')||r.includes('group')?d='https://i.ibb.co/s9YygTBd/20251203-195134.png':r.includes('youtube')||r.includes('subscribe')?d='https://i.ibb.co/CSz6kg9/20251203-200546.png':r.includes('twitter')||r.includes('follow')&&(d='https://i.ibb.co/60jp6MsF/20251203-200954.png');const e=`<div class="list-card"><div class="lc-icon"><img src="${d}" alt="icon"></div><div class="lc-content"><div class="lc-title">${t.description}</div><div class="lc-sub">${new Date(t.date).toLocaleString()}</div></div><div class="lc-end"><div class="lc-val" style="color:${i}">${o}${a} ${t.currency}</div></div></div>`;t.insertAdjacentHTML('beforeend',e)})}function fetchAndRenderTasks(){o.ref('tasks').orderByChild('status').equalTo('active').once('value').then(t=>{const n=t.val()||{},i=document.getElementById('partner-tasks-list'),a=document.getElementById('community-tasks-list');i.innerHTML='',a.innerHTML='';for(const t in n){const o=n[t];if(o.remaining>0){const t=Math.floor(1e3*Math.random())+500,n=`<div class="list-card" onclick="doTask('${t}','${o.id}')"><div class="lc-icon"><img src="${o.category==='channel'?'https://i.ibb.co/s9YygTBd/20251203-195134.png':'https://i.ibb.co/tTkJX1Qy/logo.png'}" alt="Task"></div><div class="lc-content"><div class="lc-title">${o.title}</div><div class="lc-sub">${o.description}</div></div><div class="lc-end"><div class="lc-val">+${o.reward}</div><div class="lc-sub">${o.remaining}/${o.total}</div></div></div>`;o.category==='channel'?i.insertAdjacentHTML('beforeend',n):a.insertAdjacentHTML('beforeend',n)}}})}function doTask(t,n){const i=appData.completedTasks||{};if(i[n])return void showStyledMessage("You already completed this task.","warning","app-container");window.open(`https://t.me/${BOT_USERNAME}?startapp=task${n}`,'_blank');const a={};a[`users/${t.id}/dogsBalance`]=(appData.dogsBalance||0)+t,a[`users/${t.id}/completedTasks/${n}`]=!0,o.ref().update(a).then(()=>{addHistory('earn',`Task: ${n}`,t,'GLX'),o.ref('tasks/'+n+'/remaining').transaction(t=>t-1),showStyledMessage(`Task completed! +${t} GLX`,"success","app-container")}).catch(t=>{console.error(t),showStyledMessage("Error","error","app-container")})}function handleReferral(){const n=new URLSearchParams(window.location.search).get('startapp');n&&n.startsWith('ref')&&(i=n.substring(3),i!==t.id&&!appData.referredBy&&(o.ref('users/'+t.id).update({referredBy:i}),o.ref(`users/${i}/referrals`).transaction(t=>(t||0)+1),o.ref(`users/${i}/referredUsers`).transaction(t=>t?t.includes(t.id)?t:(t.push(t.id),t):[t.id]),addHistory('referral','Referral from '+i,2e3,'GLX'),setTimeout(()=>{o.ref(`users/${i}/dogsBalance`).transaction(t=>(t||0)+2e3),addHistory('earn','Referral reward',2e3,'GLX',i)},5e3)));var i}function renderReferredUsers(){const t=appData.referredUsers||[],n=document.getElementById('referred-users-list'),i=document.getElementById('no-referrals-msg');n.innerHTML='',t.length>0?(i.style.display='none',t.forEach(t=>{o.ref('users/'+t).once('value').then(t=>{if(t.exists()){const o=t.val(),i=o.name||'Anonymous',a=o.photoUrl||'https://i.ibb.co/tTkJX1Qy/logo.png',d=new Date(o.joinDate||Date.now()).toLocaleDateString(),r=`<div class="referred-user-item"><img src="${a}" class="referred-user-avatar"><div class="referred-user-info"><div class="referred-user-name">${i}</div><div class="referred-user-date">Joined: ${d}</div></div><div class="referred-user-status">ACTIVE</div></div>`;n.insertAdjacentHTML('beforeend',r)}})})):i.style.display='block'}function setupEventListeners(){document.querySelectorAll('.nav-link').forEach(t=>{t.addEventListener('click',function(){const t=this.dataset.target;switchTab(t)})}),document.querySelectorAll('.nav-item').forEach(t=>{t.addEventListener('click',function(){const t=this.dataset.target;switchTab(t)})}),document.getElementById('share-referral-btn')&&document.getElementById('share-referral-btn').addEventListener('click',function(){const t=`https://t.me/${BOT_USERNAME}?startapp=ref${t.id}`,n=`Join GLX Galaxy and earn with me! üöÄ\n\n${t}`;window.Telegram?.WebApp?window.Telegram.WebApp.switchInlineQuery(n,''):navigator.share?navigator.share({title:'GLX Galaxy',text:n,url:t}).catch(()=>{navigator.clipboard.writeText(t),showStyledMessage('Referral link copied!','success','app-container')}):(navigator.clipboard.writeText(t),showStyledMessage('Referral link copied!','success','app-container'))}),document.getElementById('copy-referral-btn')&&document.getElementById('copy-referral-btn').addEventListener('click',function(){const t=`https://t.me/${BOT_USERNAME}?startapp=ref${t.id}`;navigator.clipboard.writeText(t),showStyledMessage('Referral link copied!','success','app-container')}),document.getElementById('claim-daily-btn')&&document.getElementById('claim-daily-btn').addEventListener('click',handleDailyClaim),document.getElementById('monetag-ad-task')&&document.getElementById('monetag-ad-task').addEventListener('click',function(){const n=appData.adsMonetag||0,i=appSettings.limitMonetag||50;if(n>=i)return void showStyledMessage("Daily limit reached","warning","app-container");const a=Date.now();if(a-lastAdClickTime<AD_CLICK_DELAY)return void showStyledMessage("Please wait a few seconds","warning","app-container");lastAdClickTime=a;const d=appSettings.adRewardMonetag||1e3;o.ref(`users/${t.id}`).update({adsMonetag:n+1,dogsBalance:(appData.dogsBalance||0)+d}),addHistory('earn','Monetag Ad',d,'GLX'),typeof show_10286382=="function"?show_10286382().then(()=>{showStyledMessage(`Ad watched! +${d} GLX`,"success","app-container")}).catch(t=>{console.error("Ad error:",t),showStyledMessage("Ad not available","warning","app-container")}):showStyledMessage("Ad system loading...","info","app-container")}),document.getElementById('gigapub-ad-task')&&document.getElementById('gigapub-ad-task').addEventListener('click',function(){const n=appData.adsGiga||0,i=appSettings.limitGiga||300;if(n>=i)return void showStyledMessage("Daily limit reached","warning","app-container");const a=Date.now();if(a-lastAdClickTime<AD_CLICK_DELAY)return void showStyledMessage("Please wait a few seconds","warning","app-container");lastAdClickTime=a;const d=appSettings.adRewardGiga||2e3;o.ref(`users/${t.id}`).update({adsGiga:n+1,dogsBalance:(appData.dogsBalance||0)+d}),addHistory('earn','GigaPub Ad',d,'GLX'),typeof window.showGiga=="function"?window.showGiga().then(()=>{showStyledMessage(`Ad watched! +${d} GLX`,"success","app-container")}).catch(t=>{console.error("Ad error:",t),showStyledMessage("Ad not available","warning","app-container")}):showStyledMessage("Ad system loading...","info","app-container")}),document.getElementById('adsgram-ad-task')&&document.getElementById('adsgram-ad-task').addEventListener('click',function(){const n=appData.adsAdsgram||0,i=appSettings.limitAdsgram||300;if(n>=i)return void showStyledMessage("Daily limit reached","warning","app-container");const a=Date.now();if(a-lastAdClickTime<AD_CLICK_DELAY)return void showStyledMessage("Please wait a few seconds","warning","app-container");lastAdClickTime=a;const d=appSettings.adRewardAdsgram||2e3;o.ref(`users/${t.id}`).update({adsAdsgram:n+1,dogsBalance:(appData.dogsBalance||0)+d}),addHistory('earn','AdsGram Ad',d,'GLX'),AdController?AdController.show().then(()=>{showStyledMessage(`Ad watched! +${d} GLX`,"success","app-container")}).catch(t=>{console.error("Ad error:",t),showStyledMessage("Ad not available","warning","app-container")}):showStyledMessage("Ad system loading...","info","app-container")}),document.getElementById('floatingAddTask')&&(document.getElementById('floatingAddTask').addEventListener('click',function(){switchTab('create-task-page')}),document.addEventListener('scroll',function(){const t=document.getElementById('floatingAddTask');t&&(window.scrollY>100?t.classList.remove('hidden'):t.classList.add('hidden'))}))}window.selectWithdrawalType=function(t){withdrawalType=t,document.querySelectorAll('.withdrawal-type-btn').forEach(n=>n.classList.remove('active')),document.querySelectorAll('.withdrawal-type-btn').forEach(n=>{n.dataset.type===t&&n.classList.add('active')}),t==='faucetpay'?(document.getElementById('faucetpay-form').style.display='block',document.getElementById('tonwallet-form').style.display='none'):(document.getElementById('faucetpay-form').style.display='none',document.getElementById('tonwallet-form').style.display='block')},window.handleFaucetPayWithdraw=function(){const n=document.getElementById('faucetpay-email').value.trim(),i=parseFloat(document.getElementById('faucetpay-amount').value);if(!n||!n.includes('@'))return void showStyledMessage("Please enter a valid email address","warning","app-container");if(i<1e-4)return void showStyledMessage("Minimum withdrawal is 0.0001 TON","warning","app-container");const a=appData.tonBalance||0;if(i>a)return void showStyledMessage("Insufficient TON balance","warning","app-container");const d=document.getElementById('withdraw-faucetpay-btn'),r=Date.now();d.disabled=!0,d.innerHTML='<i class="fas fa-spinner fa-spin"></i> Processing...';const e={userId:t.id,email:n,amount:i,method:'faucetpay',timestamp:r,status:'pending'};o.ref('withdrawals').push(e).then(()=>{o.ref(`users/${t.id}/tonBalance`).transaction(t=>(t||0)-i),addHistory('withdraw',`FaucetPay: ${n.substring(0,3)}***`,i,'TON'),showStyledMessage(`Withdrawal request submitted!\n\n‚Ä¢ Amount: ${i} TON\n‚Ä¢ Email: ${n.substring(0,3)}***${n.substring(n.indexOf('@'))}\n‚Ä¢ Status: Pending\n\nProcessing time: Up to 1 minute`,"success","app-container"),document.getElementById('faucetpay-email').value='',document.getElementById('faucetpay-amount').value='0.0001',setTimeout(()=>{d.disabled=!1,d.innerHTML='<i class="fa-solid fa-paper-plane"></i> WITHDRAW VIA FAUCETPAY',renderUI(),updateUserWithdrawalsStats()},2e3)}).catch(t=>{console.error("Withdrawal error:",t),showStyledMessage("Error processing withdrawal. Please try again.","error","app-container"),d.disabled=!1,d.innerHTML='<i class="fa-solid fa-paper-plane"></i> WITHDRAW VIA FAUCETPAY'})},window.handleTonWalletWithdraw=function(){const n=document.getElementById('ton-wallet-address').value.trim(),i=document.getElementById('ton-memo').value.trim(),a=parseFloat(document.getElementById('ton-withdraw-amount').value);if(!n||!n.startsWith('UQ')&&!n.startsWith('EQ')&&!n.startsWith('kQ'))return void showStyledMessage("Please enter a valid TON wallet address","warning","app-container");if(a<.05)return void showStyledMessage("Minimum withdrawal is 0.05 TON","warning","app-container");const d=appData.tonBalance||0;if(a>d)return void showStyledMessage("Insufficient TON balance","warning","app-container");const r=document.getElementById('withdraw-ton-now-btn'),e=Date.now();r.disabled=!0,r.innerHTML='<i class="fas fa-spinner fa-spin"></i> Processing...';const l={userId:t.id,wallet:n,memo:i,amount:a,method:'ton',timestamp:e,status:'pending'};o.ref('withdrawals').push(l).then(()=>{o.ref(`users/${t.id}/tonBalance`).transaction(t=>(t||0)-a),addHistory('withdraw',`TON Wallet: ${n.substring(0,8)}...`,a,'TON'),showStyledMessage(`Withdrawal request submitted!\n\n‚Ä¢ Amount: ${a} TON\n‚Ä¢ Address: ${n.substring(0,8)}...${n.substring(n.length-4)}\n‚Ä¢ Status: Pending\n\nProcessing time: Up to 24 hours`,"success","app-container"),document.getElementById('ton-wallet-address').value='',document.getElementById('ton-memo').value='',document.getElementById('ton-withdraw-amount').value='0.05',setTimeout(()=>{r.disabled=!1,r.innerHTML='<i class="fa-solid fa-wallet"></i> WITHDRAW TO TON WALLET',renderUI(),updateUserWithdrawalsStats()},2e3)}).catch(t=>{console.error("Withdrawal error:",t),showStyledMessage("Error processing withdrawal. Please try again.","error","app-container"),r.disabled=!1,r.innerHTML='<i class="fa-solid fa-wallet"></i> WITHDRAW TO TON WALLET'})},window.switchTab=function(t){document.querySelectorAll('.content-section').forEach(n=>n.classList.remove('active')),document.querySelectorAll('.nav-item').forEach(n=>n.classList.remove('active')),document.querySelectorAll('.nav-item').forEach(n=>{n.dataset.target===t&&n.classList.add('active')}),document.querySelectorAll('.tab-btn').forEach(n=>{n.dataset.target===t&&n.classList.add('active'),n.dataset.target!==t&&n.classList.remove('active')}),document.getElementById(t)&&document.getElementById(t).classList.add('active'),'home'===t&&renderUI(),'leaderboard'===t&&!isLeaderboardLoaded&&loadLeaderboards(),'competition'===t&&updateCompetitionUI(),'galaxy-log-page'===t&&renderGalaxyLog(),'user-withdrawals'===t&&updateUserWithdrawalsStats(),'withdrawal-history'===t&&loadWithdrawalHistory(),window.scrollTo(0,0)};function loadLeaderboards(){isLeaderboardLoaded||(isLeaderboardLoaded=!0,o.ref('users').orderByChild('referrals').limitToLast(10).once('value').then(t=>{const n=t.val()||{},i=Object.entries(n).map(([t,n])=>({id:t,...n})).sort((t,n)=>(n.referrals||0)-(t.referrals||0)).slice(0,10),a=document.getElementById('invites-leaderboard-list');a.innerHTML='',i.forEach((t,n)=>{const o=`<div class="list-card"><div class="lc-icon"><img src="${t.photoUrl||'https://i.ibb.co/tTkJX1Qy/logo.png'}" alt="${t.name}"></div><div class="lc-content"><div class="lc-title">${t.name||'Anonymous'}</div><div class="lc-sub">Level ${getLevel(t.dogsBalance||0)}</div></div><div class="lc-end"><div class="lc-val">${t.referrals||0} üë•</div></div></div>`;a.insertAdjacentHTML('beforeend',o)})}),o.ref('users').orderByChild('dogsBalance').limitToLast(10).once('value').then(t=>{const n=t.val()||{},i=Object.entries(n).map(([t,n])=>({id:t,...n})).sort((t,n)=>(n.dogsBalance||0)-(t.dogsBalance||0)).slice(0,10),a=document.getElementById('earnings-leaderboard-list');a.innerHTML='',i.forEach((t,n)=>{const o=`<div class="list-card"><div class="lc-icon"><img src="${t.photoUrl||'https://i.ibb.co/tTkJX1Qy/logo.png'}" alt="${t.name}"></div><div class="lc-content"><div class="lc-title">${t.name||'Anonymous'}</div><div class="lc-sub">Level ${getLevel(t.dogsBalance||0)}</div></div><div class="lc-end"><div class="lc-val">${Math.floor(t.dogsBalance||0).toLocaleString()} GLX</div></div></div>`;a.insertAdjacentHTML('beforeend',o)})}))}function loadWithdrawalHistory(){o.ref('withdrawals').orderByChild('timestamp').limitToLast(50).once('value').then(t=>{const n=t.val()||{},i=document.getElementById('withdrawal-history-list'),a=Object.entries(n).map(([t,n])=>({key:t,...n})).sort((t,n)=>n.timestamp-t.timestamp),d=[];a.forEach(t=>{(t.status==='completed'||t.processed===!0)&&d.push(t)});const r=d.length,l=d.reduce((t,n)=>t+parseFloat(n.amount||0),0);document.getElementById('completed-withdrawals-count').textContent=r,document.getElementById('total-paid-ton').textContent=l.toFixed(4),i.innerHTML='',d.forEach(t=>{const n=getTimeAgo(t.timestamp),o=parseFloat(t.amount||0).toFixed(7),a=t.method==='ton'?t.wallet:t.email;let d='';t.method==='faucetpay'&&a.includes('@')&&(([t,n]=a.split('@'),t.length>3&&(d=t.charAt(0)+'*'.repeat(Math.max(3,t.length-2))+t.charAt(t.length-1)+'@'+n))),t.method==='ton'&&a.length>16&&(d=a.substring(0,8)+'...'+a.substring(a.length-4));const r=`<div class="user-withdrawal-item"><div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 5px;"><div style="font-size: 12px; font-weight: 600;">${t.method==='ton'?'TON Wallet':'FaucetPay'}</div><div class="withdrawal-status status-completed">‚úÖ Completed</div></div><div style="font-size: 11px; color: var(--text-muted); margin-bottom: 5px;" class="masked-email">${d||a}</div><div style="display: flex; justify-content: space-between; align-items: center;"><div style="font-size: 14px; font-weight: 700; color: var(--primary-green);">${o} TON</div><div style="font-size: 9px; color: var(--text-muted);">${n}</div></div></div>`;i.insertAdjacentHTML('beforeend',r)})})}initializeSecuritySystem()</script>
</body>
</html>

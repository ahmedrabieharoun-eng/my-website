<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>GLX Galaxy</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>
    <script src="//libtl.com/sdk.js" data-zone="10286382" data-sdk="show_10286382" async></script>
    <script src="https://ad.gigapub.tech/script?id=4102"></script>
    <script src="https://sad.adsgram.ai/js/sad.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Outfit:wght@400;600;800&display=swap');
        :root {--primary-green:#a855f7;--deep-Galaxy:#202020;--gold:#d6bcfa;--gold-glow:rgba(168,85,247,0.4);--glass-bg:rgba(32,32,32,0.7);--glass-border:rgba(255,255,255,0.1);--text-color:#fff;--text-muted:#b0b0b0;--nav-bg:rgba(40,40,40,0.98);--success-color:#a855f7;}
        *{margin:0;padding:0;box-sizing:border-box;-webkit-tap-highlight-color:transparent;}
        body{font-family:'Outfit',sans-serif;color:var(--text-color);overflow-x:hidden;background:url('https://i.ibb.co/RGFp67kJ/121.jpg') center/cover fixed;min-height:100vh;}
        body::before{content:'';position:fixed;top:0;left:0;width:100%;height:100%;background:radial-gradient(circle at center,rgba(50,50,50,0.3) 0%,rgba(30,30,30,0.85) 100%);z-index:-1;}
        .app-container{padding:20px;padding-bottom:110px;max-width:500px;margin:0 auto;min-height:100vh;display:flex;flex-direction:column;}
        .content-section{display:none;animation:fadeIn .4s ease;}
        .content-section.active{display:flex;flex-direction:column;flex:1;}
        @keyframes fadeIn{from{opacity:0;transform:translateY(10px);}to{opacity:1;transform:translateY(0);}}
        h1{font-size:26px;font-weight:800;color:#fff;margin-bottom:5px;text-transform:uppercase;letter-spacing:1px;}
        h2{font-size:18px;font-weight:700;margin:20px 0 10px;color:var(--gold);display:flex;align-items:center;gap:8px;}
        p{font-size:13px;color:var(--text-muted);line-height:1.4;}
        .page-header{text-align:center;margin-bottom:20px;padding-top:10px;}
        .card{background:var(--glass-bg);backdrop-filter:blur(15px);-webkit-backdrop-filter:blur(15px);border-radius:24px;padding:20px;margin-bottom:12px;border:1px solid var(--glass-border);box-shadow:0 4px 20px rgba(0,0,0,0.4);}
        .btn{display:flex;align-items:center;justify-content:center;width:100%;padding:16px;border-radius:18px;font-size:16px;font-weight:800;cursor:pointer;border:none;outline:none;gap:8px;text-transform:uppercase;letter-spacing:.5px;transition:transform .1s;}
        .btn:active{transform:scale(0.96);}
        .btn:disabled{opacity:0.5;cursor:not-allowed;filter:grayscale(1);}
        .btn-primary{background:linear-gradient(90deg,#a855f7,#7c3aed);color:#fff;box-shadow:0 0 15px rgba(168,85,247,0.4);}
        .btn-ton{background:linear-gradient(90deg,#0088cc,#0099ff);color:#fff;box-shadow:0 0 15px rgba(0,136,204,0.4);}
        .btn-check{background:linear-gradient(90deg,#a855f7,#7c3aed);color:#fff;box-shadow:0 0 15px rgba(168,85,247,0.4);}
        .btn-action{background:rgba(0,0,0,0.3)!important;backdrop-filter:blur(15px);-webkit-backdrop-filter:blur(15px);border:1px solid rgba(255,255,255,0.1)!important;color:#b0b0b0!important;flex-direction:column;padding:12px;font-size:12px;gap:5px;border-radius:12px;box-shadow:0 4px 15px rgba(0,0,0,0.2);transition:all .3s ease;}
        .btn-action svg{width:24px;height:24px;stroke:#b0b0b0!important;fill:none;stroke-width:2.5;transition:all .3s ease;}
        .btn-action:active{background:rgba(0,0,0,0.4)!important;transform:scale(0.98);}
        .hud-container{display:flex;justify-content:space-between;align-items:center;background:rgba(0,0,0,0.5);border-radius:50px;padding:10px 15px;margin-bottom:20px;border:1px solid rgba(255,255,255,0.05);}
        .user-name{font-weight:700;font-size:14px;}
        .user-rank{font-size:10px;color:var(--primary-green);text-transform:uppercase;}
        .hud-avatar{width:50px;height:50px;border-radius:50%;overflow:hidden;border:2px solid var(--primary-green);}
        .hud-avatar img{width:100%;height:100%;object-fit:cover;}
        .hud-balance{display:flex;flex-direction:column;align-items:flex-end;gap:5px;}
        .hud-balance-item{display:flex;align-items:center;gap:5px;font-size:12px;font-weight:600;}
        .hud-glx{color:var(--gold);}
        .hud-ton{color:#0088cc;}
        .main-coin-section{text-align:center;margin:10px 0 30px;position:relative;}
        .main-coin-img{width:160px;height:160px;border-radius:50%;box-shadow:0 0 50px rgba(168,85,247,0.3);animation:float 4s ease-in-out infinite;object-fit:cover;border:4px solid var(--primary-green);}
        @keyframes float{0%,100%{transform:translateY(0px);}50%{transform:translateY(-10px);}}
        .balance-display{margin-top:15px;}
        .balance-amount{font-size:48px;font-weight:800;background:linear-gradient(to bottom,#fff,#b3b3b3);-webkit-background-clip:text;-webkit-text-fill-color:transparent;line-height:1;}
        .balance-unit{font-size:16px;color:var(--primary-green);font-weight:700;letter-spacing:2px;}
        .stats-pill{display:inline-flex;align-items:center;gap:15px;background:rgba(255,255,255,0.05);padding:8px 16px;border-radius:20px;margin-top:10px;font-size:12px;font-weight:600;}
        .ton-val{color:var(--primary-green);display:flex;align-items:center;gap:4px;}
        .action-bar{display:grid;grid-template-columns:1fr 1fr;gap:12px;margin-bottom:25px;}
        .list-card{display:flex;align-items:center;background:rgba(0,0,0,0.3);border-radius:16px;padding:12px;margin-bottom:8px;border:1px solid rgba(255,255,255,0.05);cursor:pointer;}
        .lc-icon{width:42px;height:42px;border-radius:12px;background:rgba(255,255,255,0.05);display:flex;align-items:center;justify-content:center;margin-right:12px;flex-shrink:0;}
        .lc-icon img{width:100%;height:100%;object-fit:cover;border-radius:12px;}
        .lc-content{flex:1;}
        .lc-title{font-size:14px;font-weight:600;margin-bottom:2px;}
        .lc-sub{font-size:11px;color:var(--text-muted);}
        .lc-end{text-align:right;}
        .lc-val{font-weight:700;color:var(--primary-green);font-size:14px;}
        .daily-row{display:flex;overflow-x:auto;gap:8px;padding-bottom:10px;margin-bottom:15px;scrollbar-width:none;}
        .daily-box{min-width:70px;background:rgba(255,255,255,0.05);border-radius:12px;padding:10px 5px;text-align:center;border:1px solid transparent;opacity:0.5;}
        .daily-box.active{opacity:1;border-color:var(--gold);background:rgba(255,215,0,0.1);}
        .daily-box.claimed{opacity:1;background:var(--primary-green);color:#000;}
        .slots-machine{background:rgba(0,0,0,0.6);border-radius:20px;padding:20px;margin-bottom:20px;border:2px solid var(--primary-green);box-shadow:0 0 25px rgba(168,85,247,0.4);}
        .slots-reels{display:flex;justify-content:space-around;margin:20px 0;gap:10px;}
        .reel-container{position:relative;width:80px;height:80px;overflow:hidden;border-radius:15px;background:rgba(0,0,0,0.7);border:2px solid rgba(255,255,255,0.2);}
        .reel{display:flex;flex-direction:column;transition:transform 2s cubic-bezier(0.1,0,0.2,1);}
        .slot-item{width:80px;height:80px;display:flex;align-items:center;justify-content:center;font-size:40px;}
        .slots-result{background:rgba(0,0,0,0.8);border-radius:15px;padding:15px;margin-top:20px;border:1px solid rgba(255,255,255,0.1);text-align:center;}
        .payout-table{display:grid;grid-template-columns:repeat(2,1fr);gap:10px;margin-top:15px;font-size:11px;}
        .payout-item{background:rgba(255,255,255,0.05);border-radius:8px;padding:8px;text-align:center;}
        .jackpot{color:#FFD700;font-weight:800;text-shadow:0 0 10px rgba(255,215,0,0.8);}
        .podium-list .list-card:nth-child(1){border-color:#FFD700;background:rgba(255,215,0,0.1);}
        .podium-list .list-card:nth-child(2){border-color:#C0C0C0;background:rgba(192,192,192,0.1);}
        .podium-list .list-card:nth-child(3){border-color:#CD7F32;background:rgba(205,127,50,0.1);}
        .podium-list .list-card:nth-child(1) .lc-val{color:#FFD700;}
        .podium-list .list-card:nth-child(2) .lc-val{color:#C0C0C0;}
        .podium-list .list-card:nth-child(3) .lc-val{color:#CD7F32;}
        .input-wrap{background:rgba(0,0,0,0.4);border-radius:16px;padding:15px;margin-bottom:15px;border:1px solid rgba(255,255,255,0.1);}
        .input-label{font-size:11px;color:var(--text-muted);display:block;margin-bottom:5px;text-transform:uppercase;}
        .custom-input{width:100%;background:transparent;border:none;color:#fff;font-size:16px;font-weight:600;outline:none;font-family:inherit;}
        .cat-select{display:flex;gap:10px;margin-bottom:20px;}
        .cat-opt{flex:1;padding:12px;text-align:center;background:rgba(255,255,255,0.05);border-radius:12px;font-size:12px;cursor:pointer;border:1px solid transparent;}
        .cat-opt.active{background:var(--primary-green);color:#000;border-color:var(--primary-green);font-weight:700;}
        .price-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:8px;margin-bottom:15px;}
        .price-opt{padding:10px;background:rgba(255,255,255,0.05);border-radius:10px;text-align:center;cursor:pointer;border:1px solid transparent;}
        .price-opt.active{border-color:var(--gold);background:rgba(255,215,0,0.1);}
        .price-count{font-size:14px;font-weight:700;color:#fff;}
        .price-cost{font-size:10px;color:var(--primary-green);margin-top:2px;}
        .terms-box{background:rgba(0,0,0,0.3);border-radius:16px;padding:15px;height:300px;overflow-y:auto;font-size:12px;color:var(--text-muted);border:1px solid rgba(255,255,255,0.05);line-height:1.6;}
        .terms-box h3{color:#fff;font-size:14px;margin-top:15px;margin-bottom:5px;}
        .terms-box h3:first-child{margin-top:0;}
        .bottom-nav{position:fixed;bottom:20px;left:50%;transform:translateX(-50%);width:90%;max-width:400px;height:65px;background:var(--nav-bg);border-radius:32px;display:flex;justify-content:space-around;align-items:center;box-shadow:0 10px 30px rgba(0,0,0,0.5);z-index:100;border:1px solid rgba(255,255,255,0.1);}
        .nav-item{display:flex;flex-direction:column;align-items:center;color:#666;transition:.3s;cursor:pointer;position:relative;width:50px;}
        .nav-item svg{width:22px;height:22px;margin-bottom:4px;stroke:currentColor;fill:none;stroke-width:2.5;transition:all .3s;}
        .nav-item.active{color:var(--primary-green);transform:translateY(-2px);}
        .nav-item.active svg{stroke:var(--primary-green);filter:drop-shadow(0 0 8px rgba(168,85,247,0.6));}
        .nav-text{font-size:9px;font-weight:700;text-transform:uppercase;}
        .hidden{display:none!important;}
        .leader-tabs{display:flex;background:rgba(0,0,0,0.3);border-radius:50px;padding:4px;margin-bottom:20px;}
        .tab-btn{flex:1;text-align:center;padding:10px;border-radius:50px;font-size:12px;font-weight:700;cursor:pointer;transition:all .3s;}
        .tab-btn.active{background:var(--primary-green);color:#000;}
        .withdrawal-type-selector{display:flex;background:rgba(0,0,0,0.3);border-radius:50px;padding:4px;margin-bottom:20px;}
        .withdrawal-type-btn{flex:1;text-align:center;padding:12px;border-radius:50px;font-size:12px;font-weight:700;cursor:pointer;transition:all .3s;border:1px solid transparent;}
        .withdrawal-type-btn.active{background:var(--primary-green);color:#000;border-color:var(--primary-green);}
        .info-box{background:rgba(255,179,0,0.1);border:1px solid var(--gold);border-radius:12px;padding:12px;margin-bottom:15px;font-size:11px;line-height:1.5;}
        .info-box.success{background:rgba(39,174,96,0.1);border-color:#27ae60;}
        .info-icon{display:inline-flex;align-items:center;justify-content:center;width:16px;height:16px;margin-right:5px;border-radius:50%;background:var(--gold);color:#000;font-size:10px;font-weight:bold;}
        .info-box.success .info-icon{background:#27ae60;color:#fff;}
        .floating-add-task{position:fixed;bottom:85px;left:50%;transform:translateX(-50%);width:auto!important;min-width:180px!important;max-width:250px!important;background:var(--glass-bg);backdrop-filter:blur(20px);-webkit-backdrop-filter:blur(20px);border-radius:20px;padding:12px 20px!important;border:1px solid var(--primary-green);box-shadow:0 5px 30px rgba(168,85,247,0.3);z-index:99;display:flex;align-items:center;justify-content:center;cursor:pointer;transition:all .3s;}
        .floating-add-task:active{transform:translateX(-50%) scale(0.98);}
        .floating-add-task-content{display:flex;align-items:center;justify-content:center;gap:8px!important;}
        .floating-add-task-icon{width:36px;height:36px;background:var(--primary-green);border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:20px;font-weight:bold;color:#000;}
        .floating-add-task-text{font-size:14px!important;font-weight:700;color:#fff;text-transform:uppercase;letter-spacing:.5px;white-space:nowrap!important;}
        .spins-display{display:flex;align-items:center;justify-content:space-between;background:rgba(255,255,255,0.08);border-radius:15px;padding:12px 15px;margin-bottom:15px;border:1px solid var(--glass-border);}
        .spins-count{font-size:20px;font-weight:800;color:var(--primary-green);}
        .referred-users-list{max-height:300px;overflow-y:auto;margin-top:15px;}
        .referred-user-item{display:flex;align-items:center;padding:10px;background:rgba(255,255,255,0.05);border-radius:12px;margin-bottom:8px;}
        .referred-user-avatar{width:40px;height:40px;border-radius:50%;margin-right:12px;border:2px solid var(--primary-green);}
        .referred-user-info{flex:1;}
        .referred-user-name{font-size:14px;font-weight:600;}
        .referred-user-date{font-size:11px;color:var(--text-muted);}
        .referred-user-status{font-size:10px;padding:2px 8px;border-radius:10px;background:var(--primary-green);color:#000;font-weight:700;}
        .stats-grid{display:grid;grid-template-columns:1fr 1fr;gap:15px;margin-bottom:20px;}
        .stat-card{background:rgba(168,85,247,0.1);padding:15px;border-radius:12px;text-align:center;border:1px solid rgba(168,85,247,0.3);}
        .stat-value{font-size:24px;font-weight:800;color:var(--primary-green);margin-top:5px;}
        .stat-label{font-size:12px;color:var(--text-muted);}
        .promo-card,.code-channel-card{transition:all .3s ease;animation:cardFloat 3s ease-in-out infinite alternate;}
        @keyframes cardFloat{0%{transform:translateY(0);}100%{transform:translateY(-5px);}}
        .code-channel-card:active{transform:scale(0.98);}
        #promo-code-input:focus{box-shadow:0 0 15px rgba(168,85,247,0.4);border-color:#a855f7;}
        .max-btn,.withdraw-max-btn{min-width:60px!important;height:44px!important;padding:10px 15px!important;font-size:12px!important;font-weight:800!important;white-space:nowrap!important;border:2px solid rgba(168,85,247,0.5)!important;background:rgba(168,85,247,0.2)!important;color:white!important;border-radius:12px!important;cursor:pointer!important;}
        @keyframes cupShine{0%,100%{filter:drop-shadow(0 0 5px rgba(255,215,0,0.7));}50%{filter:drop-shadow(0 0 15px rgba(255,215,0,0.9));}}
        @keyframes pulseArrow{0%,100%{transform:translateY(0);opacity:1;}50%{transform:translateY(-2px);opacity:0.7;}}
        @media (max-width:480px){
            .max-btn,.withdraw-max-btn{min-width:50px!important;padding:8px 12px!important;font-size:11px!important;height:42px!important;}
            .ticket-input,.bet-input{font-size:16px!important;padding:12px!important;height:44px!important;}
            .coin-bet-controls,.ticket-controls{display:flex!important;align-items:center!important;gap:8px!important;width:100%!important;}
            .bet-input,.ticket-input{flex:1!important;min-width:0!important;font-size:16px!important;padding:12px!important;height:44px!important;}
            .app-container{padding:10px;padding-bottom:80px;}
            .main-coin-img{width:120px;height:120px;}
            .balance-amount{font-size:36px;}
            .bottom-nav{width:95%;height:60px;}
            .nav-text{font-size:8px;}
            .bottom-nav{width:96%;padding:0 5px;}
            .nav-item{width:45px;}
            .nav-text{font-size:7px;}
        }
        input[type="number"]{-webkit-appearance:none;-moz-appearance:textfield;appearance:none;font-size:18px!important;}
        input[type="number"]::-webkit-inner-spin-button,
        input[type="number"]::-webkit-outer-spin-button{-webkit-appearance:none;margin:0;}
        .coin-flip-game{background:rgba(0,0,0,0.6);border-radius:20px;padding:20px;margin-bottom:20px;border:2px solid var(--primary-green);box-shadow:0 0 25px rgba(168,85,247,0.4);}
        .coin-bet-controls{display:flex;align-items:center;gap:10px;margin-bottom:20px;}
        .bet-input{flex:1;padding:12px 15px;border-radius:12px;background:rgba(0,0,0,0.3);border:2px solid rgba(168,85,247,0.6);color:white;font-family:inherit;font-size:16px;font-weight:700;text-align:center;outline:none;min-height:44px;}
        .bet-input:focus{box-shadow:0 0 15px rgba(168,85,247,0.6);border-color:#a855f7;}
        .bet-buttons{display:flex;gap:8px;margin-top:15px;}
        .bet-btn{padding:12px 15px;background:rgba(168,85,247,0.2);border:2px solid rgba(168,85,247,0.5);border-radius:10px;color:white;cursor:pointer;font-size:14px;font-weight:700;min-width:65px;text-align:center;flex:1;}
        .bet-btn.active{background:linear-gradient(135deg,#a855f7,#7c3aed);border-color:#a855f7;box-shadow:0 5px 15px rgba(168,85,247,0.4);}
        .coin-container{width:150px;height:150px;margin:0 auto 20px;perspective:1000px;}
        .coin{width:100%;height:100%;position:relative;transform-style:preserve-3d;transform:rotateY(0deg);transition:none;}
        .coin-face{position:absolute;width:100%;height:100%;backface-visibility:hidden;border-radius:50%;display:flex;align-items:center;justify-content:center;box-shadow:0 0 20px rgba(0,0,0,0.5);overflow:hidden;}
        .coin-face img{width:100%;height:100%;object-fit:cover;}
        .coin-front{background:linear-gradient(45deg,#a855f7,#7c3aed);transform:rotateY(0deg);}
        .coin-back{background:linear-gradient(45deg,#7c3aed,#a855f7);transform:rotateY(180deg);}
        .gold-side{filter:sepia(1) saturate(2) hue-rotate(10deg) brightness(1.2);}
        @keyframes coinSpin{0%{transform:rotateY(0);}25%{transform:rotateY(180deg) translateY(-20px);}50%{transform:rotateY(360deg) translateY(0);}75%{transform:rotateY(540deg) translateY(-10px);}100%{transform:rotateY(var(--final-rotation,720deg)) translateY(0);}}
        .coin-spinning{animation:coinSpin 2.5s cubic-bezier(0.4,2.4,0.8,0.9) forwards;}
        .coin-final{animation:none!important;transform:rotateY(var(--final-rotation,0deg))!important;}
        .game-result{background:rgba(0,0,0,0.8);border-radius:15px;padding:15px;margin-top:20px;text-align:center;}
        .result-text{font-size:18px;font-weight:700;margin-bottom:10px;}
        .win-amount{font-size:24px;font-weight:800;color:#27ae60;}
        .loss-amount{font-size:24px;font-weight:800;color:#e74c3c;}
        .bonus-grid{display:grid;grid-template-columns:1fr 1fr;gap:12px;margin-bottom:20px;}
        .bonus-game-card{background:var(--glass-bg);backdrop-filter:blur(15px);-webkit-backdrop-filter:blur(15px);border-radius:16px;overflow:hidden;border:1px solid var(--glass-border);cursor:pointer;transition:all .3s ease;box-shadow:0 4px 15px rgba(0,0,0,0.3);}
        .bonus-game-card:active{transform:scale(0.97);}
        .game-banner{width:100%;height:120px;object-fit:cover;display:block;}
        .game-content{padding:12px;}
        .game-title{font-size:14px;font-weight:700;color:white;margin-bottom:4px;text-align:center;}
        .game-description{font-size:11px;color:var(--text-muted);text-align:center;line-height:1.3;}
        .game-icon{font-size:20px;margin-bottom:8px;text-align:center;color:var(--primary-green);}
        .side-selection{display:flex;gap:10px;margin-bottom:20px;}
        .side-btn{flex:1;padding:20px 15px;border-radius:15px;background:rgba(255,255,255,0.05);border:2px solid transparent;cursor:pointer;text-align:center;transition:all .3s;min-height:140px;display:flex;flex-direction:column;justify-content:center;align-items:center;}
        .side-btn.active{border-color:var(--primary-green);background:rgba(168,85,247,0.2);box-shadow:0 5px 20px rgba(168,85,247,0.3);}
        .side-btn.win{border-color:#27ae60;background:rgba(39,174,96,0.2);}
        .side-btn.lose{border-color:#e74c3c;background:rgba(231,76,60,0.2);}
        .side-icon{font-size:24px;margin-bottom:10px;width:70px;height:70px;display:flex;align-items:center;justify-content:center;}
        .side-name{font-size:16px;font-weight:700;margin-bottom:5px;}
        .side-description{font-size:12px;color:var(--text-muted);text-align:center;}
        .probability-display{display:none!important;}
        .competition-nav-item{position:relative;}
        .competition-nav-icon{position:relative;display:flex;align-items:center;justify-content:center;}
        @keyframes trophyGlow{0%,100%{filter:drop-shadow(0 0 8px rgba(255,215,0,0.7));}50%{filter:drop-shadow(0 0 20px rgba(255,215,0,0.9));}}
        .nav-item.competition-nav-item.active svg{animation:trophyGlow 2s infinite alternate;}
        .nav-item[data-target="withdrawal-history"] svg{filter:drop-shadow(0 0 8px rgba(168,85,247,0.4));animation:none;}
        .galaxy-log-icon{width:40px;height:40px;background:rgba(168,85,247,0.2);border-radius:12px;display:flex;align-items:center;justify-content:center;cursor:pointer;border:1px solid rgba(168,85,247,0.4);transition:all .3s;}
        .galaxy-log-icon:hover{transform:scale(1.05);background:rgba(168,85,247,0.3);border-color:#a855f7;}
        .btn-filter{padding:8px 15px;background:rgba(255,255,255,0.05);border:1px solid rgba(255,255,255,0.1);border-radius:8px;color:var(--text-muted);font-size:12px;cursor:pointer;transition:all .3s;}
        .btn-filter.active{background:var(--primary-green);color:#000;font-weight:700;border-color:var(--primary-green);}
        .btn-filter.small{padding:5px 10px;font-size:10px;}
        .log-stat-card{background:rgba(0,0,0,0.3);border-radius:12px;padding:12px;text-align:center;border:1px solid rgba(255,255,255,0.1);}
        .log-item{display:flex;align-items:center;padding:12px;background:rgba(255,255,255,0.05);border-radius:12px;margin-bottom:8px;border-left:4px solid transparent;}
        .log-item.earn{border-left-color:#27ae60;background:rgba(39,174,96,0.1);}
        .log-item.spend{border-left-color:#e74c3c;background:rgba(231,76,60,0.1);}
        .log-item.swap{border-left-color:#3498db;background:rgba(52,152,219,0.1);}
        .log-item.withdraw{border-left-color:#9b59b6;background:rgba(155,89,182,0.1);}
        .support-channel-card{background:rgba(255,255,255,0.05);border-radius:12px;padding:15px;margin-bottom:10px;cursor:pointer;transition:all .3s;border:1px solid rgba(255,255,255,0.1);}
        .support-channel-card:hover{background:rgba(255,255,255,0.08);transform:translateY(-2px);border-color:rgba(168,85,247,0.4);}
        .deposit-wallet-address{background:rgba(0,0,0,0.5);padding:12px;border-radius:10px;font-family:monospace;font-size:11px;color:#fff;word-break:break-all;margin-top:8px;}
        .withdrawal-overview{text-align:center;margin-bottom:20px;}
        .coin-game-rules{margin-top:25px;padding:20px;background:rgba(0,0,0,0.4);border-radius:15px;border:1px solid rgba(255,255,255,0.1);}
        .coin-game-rules h4{font-size:14px;color:var(--gold);margin-bottom:15px;}
        .coin-game-rules ul{font-size:12px;color:var(--text-muted);padding-left:20px;}
        .coin-game-rules li{margin-bottom:8px;}
        .competition-timer-card{background:linear-gradient(135deg,rgba(168,85,247,0.2),rgba(123,97,255,0.2));border:2px solid rgba(168,85,247,0.3);border-radius:20px;padding:25px;margin-bottom:20px;text-align:center;box-shadow:0 10px 30px rgba(168,85,247,0.2);}
        .countdown-display{font-size:36px;font-weight:800;color:#fff;text-shadow:0 0 15px rgba(168,85,247,0.8);margin-bottom:8px;font-family:'Courier New',monospace;}
        .timer-label{font-size:12px;color:var(--text-muted);text-transform:uppercase;letter-spacing:1px;}
        .status-grid{display:grid;grid-template-columns:repeat(2,1fr);gap:12px;margin-bottom:20px;}
        .status-card{background:var(--glass-bg);backdrop-filter:blur(15px);-webkit-backdrop-filter:blur(15px);border-radius:16px;padding:20px;text-align:center;border:1px solid var(--glass-border);}
        .status-icon{font-size:30px;margin-bottom:10px;}
        .status-value{font-size:24px;font-weight:800;color:#fff;margin-bottom:5px;}
        .status-label{font-size:10px;color:var(--text-muted);text-transform:uppercase;letter-spacing:.5px;}
        .ticket-price-note{background:rgba(168,85,247,0.1);border-radius:12px;padding:15px;margin-bottom:20px;text-align:center;font-size:12px;border:1px solid rgba(168,85,247,0.3);}
        .ticket-controls{display:flex;align-items:center;gap:10px;margin-bottom:20px;}
        .ticket-input{flex:1;padding:15px;border-radius:12px;background:rgba(0,0,0,0.3);border:2px solid rgba(168,85,247,0.5);color:white;font-size:18px;font-weight:700;text-align:center;outline:none;min-height:44px;}
        .competition-leaderboard{margin-top:25px;}
        .leaderboard-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:15px;padding-bottom:10px;border-bottom:1px solid rgba(255,255,255,0.1);}
        .previous-winners-card{background:var(--glass-bg);backdrop-filter:blur(15px);-webkit-backdrop-filter:blur(15px);border-radius:16px;padding:20px;margin-top:20px;border:1px solid var(--glass-border);}
        .winner-item{display:flex;align-items:center;padding:12px;background:rgba(255,255,255,0.05);border-radius:12px;margin-bottom:10px;}
        .winner-rank{width:30px;height:30px;background:var(--primary-green);border-radius:50%;display:flex;align-items:center;justify-content:center;font-weight:800;margin-right:15px;}
        .winner-avatar{width:40px;height:40px;border-radius:50%;margin-right:12px;border:2px solid var(--primary-green);}
        .winner-info{flex:1;}
        .winner-name{font-size:14px;font-weight:600;margin-bottom:2px;}
        .winner-date{font-size:10px;color:var(--text-muted);}
        .winner-prize{font-size:14px;font-weight:700;color:var(--primary-green);}
        .withdraw-max-btn{position:absolute;right:15px;top:50%;transform:translateY(-50%);background:rgba(168,85,247,0.2);border:1px solid rgba(168,85,247,0.5);border-radius:8px;padding:6px 12px;color:white;font-size:10px;cursor:pointer;font-weight:700;z-index:10;}
        .bet-btn.k-style{min-width:55px;padding:10px 12px;font-size:13px;flex:1;}
        .user-withdrawal-item{background:rgba(255,255,255,0.05);border-radius:12px;padding:12px;margin-bottom:8px;border:1px solid rgba(255,255,255,0.1);}
        .withdrawal-status{font-size:10px;padding:3px 10px;border-radius:20px;font-weight:700;}
        .status-completed{background:rgba(39,174,96,0.2);color:#27ae60;}
        .status-pending{background:rgba(255,193,7,0.2);color:#FFC107;}
        .status-rejected{background:rgba(231,76,60,0.2);color:#e74c3c;}
        .masked-email{font-family:'Courier New',monospace;letter-spacing:1px;}
        .competition-rank-card{display:flex;align-items:center;padding:12px;background:rgba(255,255,255,0.05);border-radius:12px;margin-bottom:8px;border:1px solid rgba(255,255,255,0.1);}
        .competition-rank{width:30px;font-weight:800;font-size:14px;text-align:center;margin-right:10px;}
        .rank-1 .competition-rank{color:#27ae60;font-weight:900;}
        .rank-2 .competition-rank{color:#C0C0C0;}
        .rank-3 .competition-rank{color:#CD7F32;}
        .competition-user-avatar{width:36px;height:36px;border-radius:50%;margin-right:12px;border:2px solid var(--primary-green);}
        .competition-user-info{flex:1;}
        .competition-user-name{font-size:13px;font-weight:600;margin-bottom:2px;}
        .competition-ticket-count{font-size:14px;font-weight:700;color:var(--primary-green);}
        .competition-rules-card{background:rgba(0,0,0,0.4);border-radius:16px;padding:20px;margin-bottom:20px;border:1px solid rgba(255,255,255,0.1);}
        .rules-header{display:flex;align-items:center;gap:10px;margin-bottom:15px;color:var(--gold);font-size:16px;font-weight:700;}
        .rules-list{font-size:12px;color:var(--text-muted);line-height:1.6;padding-left:20px;}
        .rules-list li{margin-bottom:8px;}
        .winner-highlight{color:#27ae60;font-weight:700;}
        .loser-note{color:#e74c3c;font-weight:600;}
        .important-note{background:rgba(255,193,7,0.1);border-left:3px solid #FFC107;padding:10px;margin-top:15px;border-radius:5px;font-size:11px;}
        .swap-direction-selector{display:flex;background:rgba(0,0,0,0.3);border-radius:50px;padding:4px;margin-bottom:20px;}
        .swap-direction-btn{flex:1;text-align:center;padding:12px;border-radius:50px;font-size:12px;font-weight:700;cursor:pointer;transition:all .3s;border:1px solid transparent;}
        .swap-direction-btn.active{background:var(--primary-green);color:#000;border-color:var(--primary-green);}
        .withdraw-input-with-max{position:relative;}
        .withdraw-input-with-max .custom-input{padding-right:70px;}
        .email-display{font-family:'Courier New',monospace;background:rgba(255,255,255,0.1);padding:15px;border-radius:12px;border:1px solid rgba(255,255,255,0.2);font-size:16px;letter-spacing:2px;color:white;text-align:center;margin-top:10px;}
        .swap-mode-text{font-size:12px;color:var(--text-muted);text-align:center;margin:10px 0;}
        .verification-container{background:var(--glass-bg);backdrop-filter:blur(20px);-webkit-backdrop-filter:blur(20px);border-radius:24px;padding:30px;margin:20px;text-align:center;border:2px solid rgba(168,85,247,0.3);box-shadow:0 10px 40px rgba(0,0,0,0.5);}
        .verification-step{display:flex;align-items:center;justify-content:space-between;background:rgba(0,0,0,0.3);border-radius:12px;padding:15px;margin-bottom:10px;border:1px solid rgba(255,255,255,0.1);transition:all .3s ease;}
        .verification-step.active{border-color:var(--primary-green);background:rgba(168,85,247,0.1);}
        .verification-step.completed{border-color:#27ae60;background:rgba(39,174,96,0.1);}
        .verification-step.failed{border-color:#e74c3c;background:rgba(231,76,60,0.1);}
        .step-icon{width:40px;height:40px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:18px;font-weight:bold;}
        .step-info{flex:1;text-align:left;padding:0 15px;}
        .step-title{font-size:14px;font-weight:600;color:white;margin-bottom:3px;}
        .step-description{font-size:11px;color:var(--text-muted);}
        .step-status{width:40px;height:40px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:18px;}
        .security-message{background:rgba(231,76,60,0.1);border:1px solid rgba(231,76,60,0.3);border-radius:12px;padding:15px;margin:15px 0;color:#e74c3c;font-size:14px;}
        .verification-progress{width:100%;height:8px;background:rgba(255,255,255,0.1);border-radius:4px;margin:20px 0;overflow:hidden;}
        .progress-bar{height:100%;background:linear-gradient(90deg,var(--primary-green),#7c3aed);border-radius:4px;transition:width .5s ease;}
        .blocked-container{background:rgba(0,0,0,0.8);border-radius:24px;padding:40px 30px;text-align:center;margin:20px;border:2px solid rgba(231,76,60,0.3);animation:pulse 2s infinite;}
        @keyframes pulse{0%{box-shadow:0 0 0 0 rgba(231,76,60,0.4);}70%{box-shadow:0 0 0 10px rgba(231,76,60,0);}100%{box-shadow:0 0 0 0 rgba(231,76,60,0);}}
        .blocked-icon{font-size:60px;margin-bottom:20px;color:#e74c3c;}
        .blocked-title{font-size:24px;font-weight:800;color:#e74c3c;margin-bottom:15px;}
        .blocked-reason{background:rgba(231,76,60,0.1);border-radius:12px;padding:15px;margin:20px 0;font-size:14px;line-height:1.5;}
        .verification-loading{display:inline-block;width:20px;height:20px;border:3px solid rgba(255,255,255,0.3);border-radius:50%;border-top-color:var(--primary-green);animation:spin 1s ease-in-out infinite;}
        @keyframes spin{to{transform:rotate(360deg);}}
        .ip-display{background:rgba(0,0,0,0.5);padding:10px;border-radius:8px;font-family:'Courier New',monospace;font-size:12px;color:#fff;margin-top:5px;}
    </style>
</head>
<body>
    <div id="security-verification" class="verification-container">
        <div style="margin-bottom:25px;">
            <img src="https://i.ibb.co/tTkJX1Qy/logo.png" alt="GLX Galaxy" style="width:80px;height:80px;border-radius:50%;margin-bottom:15px;border:3px solid var(--primary-green);">
            <h1 style="font-size:24px;margin-bottom:8px;color:#fff;">GLX Galaxy Security</h1>
            <p style="color:var(--text-muted);font-size:13px;">Secure verification process in progress</p>
        </div>
        <div class="verification-progress"><div id="verification-progress-bar" class="progress-bar" style="width:0%"></div></div>
        <div id="verification-steps"></div>
        <div id="verification-result" style="display:none;margin-top:20px;"></div>
    </div>
    <div id="blocked-access" class="blocked-container" style="display:none;">
        <div class="blocked-icon">üö´</div>
        <div class="blocked-title">ACCESS BLOCKED</div>
        <div id="blocked-reason" class="blocked-reason"></div>
        <p style="color:var(--text-muted);font-size:12px;margin-top:20px;">If you believe this is an error, please contact support.</p>
    </div>
    <div class="app-container" style="display:none;" id="app-container">
        <div class="hud-container">
            <div><div class="user-name" id="home-username">Explorer</div><div class="user-rank" id="home-user-level" style="display:none;"></div><div style="display:flex;align-items:center;gap:15px;margin-top:5px;"><div class="stats-pill" style="margin:0;padding:6px 12px;"><span style="color:var(--gold);">GLX:</span><span id="hud-glx-balance" style="color:#fff;font-weight:700;">0</span></div><div class="stats-pill" style="margin:0;padding:6px 12px;"><span style="color:var(--gold);">TON:</span><span id="hud-ton-balance" style="color:#fff;font-weight:700;">0.0000</span></div></div></div>
            <div style="display:flex;align-items:center;gap:10px;"><div class="galaxy-log-icon" id="galaxy-log-button"><span style="font-size:20px;">üìú</span></div><div class="hud-avatar"><img src="https://i.ibb.co/tTkJX1Qy/logo.png" alt="User"></div></div>
        </div>
        <main id="home" class="content-section active">
            <div class="main-coin-section"><img src="https://i.ibb.co/tTkJX1Qy/logo.png" class="main-coin-img" alt="GLX"><div class="balance-display"><div class="balance-amount" id="total-GLX-balance">0</div><div class="balance-unit">GLX</div></div><div class="stats-pill"><span class="ton-val"><img src="https://i.ibb.co/8DsyHqwK/toncoin-ton-logo.png" style="width:16px;border-radius:50%;"> <span id="home-ton-balance">0.0000</span> TON</span><span style="opacity:0.3">|</span><span style="font-size:10px;opacity:0.8;">100K = 0.01 TON</span></div></div>
            <div class="action-bar">
                <div class="btn btn-action nav-link" data-target="swap-page"><svg viewBox="0 0 24 24"><path d="M7 16V4m0 0L3 8m4-4 4 4m6 0v12m0 0 4-4m-4 4-4-4"/></svg><span>Swap</span></div>
                <div class="btn btn-action nav-link" data-target="withdraw"><svg viewBox="0 0 24 24"><path d="M12 5v14m0 0-6-6m6 6 6-6"/></svg><span>Withdraw</span></div>
                <div class="btn btn-action nav-link" data-target="user-withdrawals"><svg viewBox="0 0 24 24"><path d="M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z"/><line x1="4" y1="22" x2="4" y2="15"/></svg><span>My Withdrawals</span></div>
                <div class="btn btn-action nav-link" data-target="deposit"><svg viewBox="0 0 24 24"><path d="M12 5v14m0 0-6-6m6 6 6-6" transform="rotate(180,12,12)"/></svg><span>Deposit</span></div>
            </div>
            <div class="card" style="margin-top:15px;"><h2 style="display:flex;align-items:center;gap:8px;"><i class="fa-solid fa-credit-card"></i>Payments Channel</h2>
                <div class="support-channel-card" onclick="window.open('https://t.me/earnmoney139482','_blank')"><div style="display:flex;align-items:center;gap:12px;"><div style="width:50px;height:50px;background:linear-gradient(135deg,#a855f7,#7b61ff);border-radius:12px;display:flex;align-items:center;justify-content:center;font-size:24px;color:white;"><i class="fab fa-telegram"></i></div><div style="flex:1;"><div style="font-size:14px;font-weight:700;color:white;margin-bottom:5px;">Payments & Withdrawals Channel</div><div style="font-size:11px;color:var(--text-muted);">Track payments, withdrawals, and transaction updates</div><div style="font-size:10px;color:#ffb300;margin-top:5px;"><i class="fa-solid fa-users"></i> @earnmoney139482</div></div><div style="color:var(--primary-green);font-size:18px;"><i class="fa-solid fa-arrow-right"></i></div></div></div>
            </div>
            <div class="card" style="margin-top:12px;"><h2 style="display:flex;align-items:center;gap:8px;"><i class="fa-solid fa-headset"></i>Support & Help</h2>
                <div class="support-channel-card" onclick="window.open('https://t.me/aborabie777','_blank')" style="margin-bottom:10px;"><div style="display:flex;align-items:center;gap:12px;"><div style="width:50px;height:50px;background:linear-gradient(135deg,#3498db,#2980b9);border-radius:12px;display:flex;align-items:center;justify-content:center;font-size:24px;color:white;"><i class="fa-solid fa-user-gear"></i></div><div style="flex:1;"><div style="font-size:14px;font-weight:700;color:white;margin-bottom:5px;">Technical Support</div><div style="font-size:11px;color:var(--text-muted);">Get help with technical issues and account problems</div></div><div style="color:#3498db;font-size:18px;"><i class="fa-solid fa-arrow-right"></i></div></div></div>
                <div class="support-channel-card" onclick="window.open('https://t.me/Elsayed_1_Elgohary','_blank')"><div style="display:flex;align-items:center;gap:12px;"><div style="width:50px;height:50px;background:linear-gradient(135deg,#27ae60,#2ecc71);border-radius:12px;display:flex;align-items:center;justify-content:center;font-size:24px;color:white;"><i class="fa-solid fa-circle-question"></i></div><div style="flex:1;"><div style="font-size:14px;font-weight:700;color:white;margin-bottom:5px;">General Support & FAQ</div><div style="font-size:11px;color:var(--text-muted);">Get answers to common questions and general help</div></div><div style="color:#27ae60;font-size:18px;"><i class="fa-solid fa-arrow-right"></i></div></div></div>
            </div>
            <div class="card" style="margin-top:12px;"><h2 style="display:flex;align-items:center;gap:8px;"><i class="fa-solid fa-bullhorn"></i>Updates & News</h2>
                <div class="support-channel-card" onclick="window.open('https://t.me/earnmoney174688','_blank')" style="margin-bottom:10px;"><div style="display:flex;align-items:center;gap:12px;"><div style="width:50px;height:50px;background:linear-gradient(135deg,#9b59b6,#8e44ad);border-radius:12px;display:flex;align-items:center;justify-content:center;font-size:24px;color:white;"><i class="fa-solid fa-bell"></i></div><div style="flex:1;"><div style="font-size:14px;font-weight:700;color:white;margin-bottom:5px;">Bot Updates & News</div><div style="font-size:11px;color:var(--text-muted);">Latest updates, announcements, and news about the bot</div><div style="font-size:10px;color:#9b59b6;margin-top:5px;"><i class="fa-solid fa-users"></i> @earnmoney174688</div></div><div style="color:#9b59b6;font-size:18px;"><i class="fa-solid fa-arrow-right"></i></div></div></div>
                <div class="support-channel-card" onclick="window.open('https://t.me/earnmoney1685','_blank')"><div style="display:flex;align-items:center;gap:12px;"><div style="width:50px;height:50px;background:linear-gradient(135deg,#e74c3c,#c0392b);border-radius:12px;display:flex;align-items:center;justify-content:center;font-size:24px;color:white;"><i class="fa-solid fa-gift"></i></div><div style="flex:1;"><div style="font-size:14px;font-weight:700;color:white;margin-bottom:5px;">Codes & Rewards Channel</div><div style="font-size:11px;color:var(--text-muted);">Daily promo codes, rewards, and special bonuses</div><div style="font-size:10px;color:#e74c3c;margin-top:5px;"><i class="fa-solid fa-users"></i> @earnmoney1685</div></div><div style="color:#e74c3c;font-size:18px;"><i class="fa-solid fa-arrow-right"></i></div></div></div>
            </div>
        </main>
        <main id="galaxy-log-page" class="content-section">
            <div class="page-header"><h1>Galaxy Log</h1><p>Complete transaction history</p></div>
            <div style="display:flex;gap:10px;margin-bottom:20px;">
                <button class="btn-filter active" onclick="filterLogs('all')">All</button>
                <button class="btn-filter" onclick="filterLogs('earn')">Earnings</button>
                <button class="btn-filter" onclick="filterLogs('spend')">Spending</button>
                <button class="btn-filter" onclick="filterLogs('swap')">Swap</button>
                <button class="btn-filter" onclick="filterLogs('withdraw')">Withdrawals</button>
            </div>
            <div style="display:grid;grid-template-columns:1fr 1fr;gap:10px;margin-bottom:15px;">
                <div class="log-stat-card"><div style="font-size:12px;color:var(--text-muted);">Total Earned</div><div style="font-size:18px;font-weight:700;color:#27ae60;" id="total-earned">0 GLX</div></div>
                <div class="log-stat-card"><div style="font-size:12px;color:var(--text-muted);">Total Spent</div><div style="font-size:18px;font-weight:700;color:#e74c3c;" id="total-spent">0 GLX</div></div>
            </div>
            <div id="galaxy-log-filtered-list" style="max-height:500px;overflow-y:auto;"></div>
        </main>
        <main id="deposit" class="content-section">
            <div class="page-header"><h1>Deposit TON</h1><p>Add funds to your account</p></div>
            <div class="card">
                <div style="text-align:center;margin-bottom:20px;"><div style="font-size:16px;font-weight:700;color:var(--gold);margin-bottom:10px;display:flex;align-items:center;justify-content:center;gap:8px;"><i class="fa-solid fa-arrow-down-to-line" style="color:#27ae60;"></i>Deposit TON</div><div style="font-size:12px;color:var(--text-muted);">Add funds for paid tasks & features</div></div>
                <div style="display:flex;justify-content:space-between;align-items:center;background:rgba(0,0,0,0.3);padding:12px;border-radius:12px;margin-bottom:20px;border:1px solid rgba(255,255,255,0.1);"><div><div style="font-size:11px;color:var(--text-muted);">Current Balance</div><div style="font-size:20px;font-weight:700;color:#fff;"><span class="user-ton-balance">0.0000</span> TON</div></div></div>
                <div class="input-wrap" style="margin-bottom:20px;"><span class="input-label">Deposit Amount (TON)</span><input type="number" id="deposit-amount" class="custom-input" placeholder="0.01" step="0.01" min="0.01" value="0.01"><div style="text-align:right;font-size:10px;color:var(--text-muted);margin-top:5px;">Minimum: 0.01 TON</div></div>
                <div class="info-box" style="background:rgba(52,152,219,0.1);border-color:rgba(52,152,219,0.3);"><div style="display:flex;align-items:flex-start;gap:10px;"><div style="color:#3498db;font-size:14px;"><i class="fa-solid fa-circle-info"></i></div><div style="font-size:11px;line-height:1.5;"><strong>Deposit Instructions:</strong><br>‚Ä¢ Send exact amount to wallet address below<br>‚Ä¢ Include the memo/comment in your transfer<br>‚Ä¢ Funds will be added within 10-30 minutes<br>‚Ä¢ Keep transaction proof for support<br>‚Ä¢ For paid tasks only (creating missions)</div></div></div>
                <div class="input-wrap" style="margin-top:20px;margin-bottom:20px;"><span class="input-label">Recipient Wallet Address</span><div class="deposit-wallet-address">UQCg1DjKHH1_guXQ0TFmkvj09igxYwEJGfKPijLaHyOHIPTX</div><button onclick="copyWalletAddress()" style="margin-top:10px;width:100%;padding:16px;background:linear-gradient(90deg,#a855f7,#7c3aed);border:none;border-radius:18px;color:#fff;font-weight:800;cursor:pointer;display:flex;align-items:center;justify-content:center;gap:8px;font-size:16px;"><i class="fa-solid fa-copy"></i> Copy Wallet Address</button></div>
                <div class="input-wrap" style="margin-bottom:20px;"><span class="input-label">Memo / Comment (Required)</span><div style="background:rgba(0,0,0,0.5);padding:15px;border-radius:12px;margin-top:8px;font-family:monospace;font-size:14px;color:#27ae60;text-align:center;font-weight:700;letter-spacing:1px;">deposit_<span id="deposit-memo-id">USER_ID</span></div><div style="text-align:center;font-size:10px;color:var(--text-muted);margin-top:8px;">You MUST include this memo in your transaction</div></div>
                <button class="btn btn-primary" id="send-deposit-btn" onclick="sendDepositPayment()"><i class="fa-solid fa-paper-plane"></i> SEND PAYMENT</button>
                <div id="verify-deposit-section" style="display:none;margin-top:20px;padding-top:20px;border-top:1px solid rgba(255,255,255,0.1);">
                    <div style="background:rgba(0,0,0,0.3);border-radius:12px;padding:15px;margin-bottom:15px;"><div style="font-size:10px;color:var(--text-muted);margin-bottom:8px;text-transform:uppercase;">Transaction Memo</div><div style="font-family:monospace;font-size:14px;color:#27ae60;font-weight:700;letter-spacing:1px;" id="deposit-memo-display">deposit_USER_ID</div><div style="font-size:10px;color:var(--text-muted);margin-top:5px;">You MUST include this memo in your transaction</div></div>
                    <button class="btn btn-primary" id="verify-deposit-btn" onclick="verifyDepositTransaction()" style="background:linear-gradient(90deg,#3498db,#2980b9);"><i class="fa-solid fa-magnifying-glass"></i> CHECK DEPOSIT STATUS</button>
                    <div id="deposit-status-msg" style="font-size:10px;margin-top:10px;color:var(--text-muted);text-align:center;">After sending payment, click here to check status</div>
                </div>
            </div>
        </main>
        <main id="user-withdrawals" class="content-section">
            <div class="page-header"><h1>My Withdrawals</h1><p>Track your withdrawal requests</p></div>
            <div class="card" style="text-align:center;margin-bottom:20px;"><h3 style="color:var(--gold);margin-bottom:15px;">üìä Withdrawal Overview</h3><div class="stats-grid">
                <div class="stat-card"><div class="stat-label">Pending</div><div class="stat-value" id="pending-withdrawals">0</div></div>
                <div class="stat-card"><div class="stat-label">Completed</div><div class="stat-value" id="completed-withdrawals">0</div></div>
                <div class="stat-card"><div class="stat-label">Total Sent</div><div class="stat-value" id="total-sent-ton">0.0000 TON</div></div>
                <div class="stat-card"><div class="stat-label">Success Rate</div><div class="stat-value" id="success-rate">1%</div></div>
            </div></div>
            <div class="card"><div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:15px;"><h3 style="color:var(--gold);font-size:14px;">Withdrawal History</h3><div style="display:flex;gap:5px;"><button class="btn-filter small active" onclick="filterUserWithdrawals('all')">All</button><button class="btn-filter small" onclick="filterUserWithdrawals('pending')">Pending</button><button class="btn-filter small" onclick="filterUserWithdrawals('completed')">Completed</button></div></div>
                <div id="user-withdrawals-list" style="max-height:400px;overflow-y:auto;display:flex;flex-direction:column-reverse;"></div>
            </div>
        </main>
        <main id="competition" class="content-section">
            <div class="page-header"><h1>Daily Competition</h1><p>Win Big with Tickets</p></div>
            <div class="competition-timer-card"><div class="countdown-display" id="countdown-timer">24:00:00</div><div class="timer-label">TIME UNTIL NEXT COMPETITION</div></div>
            <div class="status-grid">
                <div class="status-card"><div class="status-icon">üèÅ</div><div class="status-value" id="competition-status">ACTIVE</div><div class="status-label">COMPETITION STATUS</div></div>
                <div class="status-card"><div class="status-value" id="prize-pool">0.000 TON</div><div class="status-label">TOTAL PRIZE POOL</div></div>
                <div class="status-card"><div class="status-value" id="user-tickets">0</div><div class="status-label">YOUR TICKETS</div></div>
                <div class="status-card"><div class="status-value" id="total-tickets">0</div><div class="status-label">TOTAL TICKETS</div></div>
            </div>
            <div class="ticket-price-note"><p>üé´ <strong>Each ticket = 10,000 GLX = 0.001 TON</strong></p><p style="font-size:11px;margin-top:5px;">Prize Pool = Total Tickets √ó 0.001 TON</p></div>
            <div class="competition-rules-card"><div class="rules-header"><i class="fa-solid fa-circle-info"></i><span>Competition Rules</span></div><ul class="rules-list">
                <li><span class="winner-highlight">üèÜ ONLY THE FIRST PLACE WINS!</span> - The user with the most tickets wins the entire prize pool.</li>
                <li><span class="loser-note">‚ùå ALL OTHER PARTICIPANTS LOSE</span> - Only #1 gets the prize, others get nothing.</li>
                <li>üé´ Each ticket costs <strong>10,000 GLX (0.001 TON)</strong></li>
                <li>üí∞ Prize Pool = Total Tickets √ó 0.001 TON</li>
                <li>‚è∞ Competition runs for 24 hours, followed by 1 hour break</li>
                <li>üìä Winner is automatically selected after competition ends</li>
            </ul><div class="important-note"><i class="fa-solid fa-exclamation-triangle"></i><strong>Important:</strong> Buy more tickets to increase your chance of winning! Only #1 position matters.</div></div>
            <div class="card"><h3 style="color:var(--gold);margin-bottom:15px;">üéüÔ∏è Buy Competition Tickets</h3>
                <div class="ticket-controls"><input type="number" id="ticket-amount" class="ticket-input" placeholder="Enter tickets amount" min="1" value="1"><button class="max-btn" onclick="setMaxTickets()">MAX</button></div>
                <div class="price-info"><div style="display:flex;justify-content:space-between;margin-bottom:10px;font-size:12px;"><span style="color:var(--text-muted);">Tickets:</span><span id="tickets-count-display">1</span></div><div style="display:flex;justify-content:space-between;margin-bottom:15px;font-size:12px;"><span style="color:var(--text-muted);">Cost:</span><span id="tickets-cost-display">10,000 GLX</span></div></div>
                <button class="btn btn-primary" id="buy-tickets-btn" onclick="buyTickets()"><i class="fa-solid fa-ticket"></i> BUY TICKETS</button><p id="buy-tickets-status" style="text-align:center;font-size:11px;margin-top:10px;color:var(--text-muted);"></p>
            </div>
            <div class="competition-leaderboard"><div class="leaderboard-header"><h3 style="font-size:16px;color:var(--gold);">üèÜ Top 10 Leaders</h3><span style="font-size:10px;color:var(--text-muted);">Live Ranking</span></div><div id="competition-leaderboard-list" style="max-height:300px;overflow-y:auto;padding-bottom:10px;"><p style="text-align:center;padding:20px;color:var(--text-muted);">Loading leaderboard...</p></div></div>
            <div class="previous-winners-card"><h3 style="font-size:16px;color:var(--gold);margin-bottom:15px;">üìÖ Yesterday's Winners</h3><div id="previous-winners-list"><p style="text-align:center;padding:20px;color:var(--text-muted);">No previous winners yet</p></div></div>
        </main>
        <main id="bonus" class="content-section">
            <div class="page-header"><h1>Galaxy Bonus</h1><p>Daily rewards & fun games</p></div>
            <div class="bonus-grid">
                <div class="bonus-game-card" onclick="openGame('coin-flip')"><img src="https://i.ibb.co/gLT3myT3/Coin-Flip-Game.png" alt="Coin Flip Game" class="game-banner"><div class="game-content"><div class="game-icon">ü™ô</div><div class="game-title">Coin Flip Game</div><div class="game-description">Heads or Tails? Win 2x your bet!</div></div></div>
                <div class="bonus-game-card" onclick="openGame('promo-codes')"><img src="https://i.ibb.co/jnp9cTb/Promo-Codes-Rewards.png" alt="Promo Codes & Rewards" class="game-banner"><div class="game-content"><div class="game-icon">üéÅ</div><div class="game-title">Promo Codes</div><div class="game-description">Redeem codes for free rewards</div></div></div>
                <div class="bonus-game-card" onclick="openGame('daily-streak')"><img src="https://i.ibb.co/GQQ0BnsT/Daily-Streak.png" alt="Daily Streak" class="game-banner"><div class="game-content"><div class="game-icon">üìÖ</div><div class="game-title">Daily Streak</div><div class="game-description">Claim daily rewards up to 7 days</div></div></div>
                <div class="bonus-game-card" onclick="openGame('galaxy-slots')"><img src="https://i.ibb.co/204QyBWX/Galaxy-Slots-Game.png" alt="Galaxy Slots Game" class="game-banner"><div class="game-content"><div class="game-icon">üé∞</div><div class="game-title">Galaxy Slots</div><div class="game-description">Spin the reels & win big jackpots</div></div></div>
            </div>
            <div id="coin-flip-section" class="card" style="display:none;">
                <div style="display:flex;align-items:center;justify-content:space-between;margin-bottom:15px;"><h3 style="font-size:14px;color:var(--gold);display:flex;align-items:center;gap:8px;"><i class="fa-solid fa-coins" style="color:#a855f7;"></i> Coin Flip Game</h3><button class="btn btn-action" onclick="closeGame()" style="width:auto;padding:8px 12px;font-size:11px;"><i class="fa-solid fa-arrow-left"></i> Back</button></div>
                <div class="probability-display" style="display:none;"><div class="prob-item"><div class="prob-value win-prob">45%</div><div class="prob-label">Win Chance</div></div><div class="prob-item"><div class="prob-value loss-prob">55%</div><div class="prob-label">Loss Chance</div></div></div>
                <div class="coin-flip-game">
                    <div class="coin-bet-controls"><input type="number" id="coin-bet-amount" class="bet-input" placeholder="Enter bet amount" min="1000" value="1000"><button class="max-btn" onclick="setMaxBet()" style="width:auto;padding:12px 15px;">MAX</button></div>
                    <div class="bet-buttons"><button class="bet-btn k-style active" onclick="setBetAmount(1000)">1k</button><button class="bet-btn k-style" onclick="setBetAmount(5000)">5k</button><button class="bet-btn k-style" onclick="setBetAmount(10000)">10k</button><button class="bet-btn k-style" onclick="setBetAmount(25000)">25k</button></div>
                    <div class="side-selection">
                        <div class="side-btn active" id="choose-glx" onclick="chooseSide('glx')"><div class="side-icon"><img src="https://i.ibb.co/tTkJX1Qy/logo.png" style="width:70px;height:70px;border-radius:50%;"></div><div class="side-name">GLX Side</div><div class="side-description">Win 2x if GLX appears</div></div>
                        <div class="side-btn" id="choose-gold" onclick="chooseSide('gold')"><div class="side-icon"><img src="https://i.ibb.co/tTkJX1Qy/logo.png" style="width:70px;height:70px;border-radius:50%;filter:sepia(1) saturate(2) hue-rotate(10deg) brightness(1.2);"></div><div class="side-name">Gold Side</div><div class="side-description">Win 2x if Gold appears</div></div>
                    </div>
                    <div class="coin-container"><div class="coin" id="coin"><div class="coin-face coin-front"><img src="https://i.ibb.co/tTkJX1Qy/logo.png" alt="GLX Coin"></div><div class="coin-face coin-back"><img src="https://i.ibb.co/tTkJX1Qy/logo.png" alt="Gold Coin" class="gold-side"></div></div></div>
                    <button class="btn btn-primary" id="flip-coin-btn" onclick="flipCoin()"><i class="fa-solid fa-play"></i> FLIP COIN</button>
                    <div class="game-result" id="coin-game-result" style="display:none;"><div class="result-text" id="coin-result-text"></div><div class="win-amount" id="coin-win-amount"></div><div class="loss-amount" id="coin-loss-amount"></div></div>
                    <div class="coin-game-rules"><h4><i class="fa-solid fa-circle-info"></i> Game Rules</h4><ul>
                        <li><strong>Minimum bet:</strong> 1,000 GLX</li>
                        <li><strong>Choose:</strong> GLX Side or Gold Side</li>
                        <li><strong>If you win:</strong> Get 2x your bet</li>
                        <li><strong>If you lose:</strong> Lose your bet</li>
                        <li><strong>Note:</strong> Bet amount is deducted immediately</li>
                    </ul></div>
                </div>
            </div>
            <div id="promo-codes-section" class="card" style="display:none;">
                <div style="display:flex;align-items:center;justify-content:space-between;margin-bottom:15px;"><h3 style="font-size:14px;color:var(--gold);display:flex;align-items:center;gap:8px;"><i class="fa-solid fa-gift" style="color:#a855f7;"></i> Promo Codes & Rewards</h3><button class="btn btn-action" onclick="closeGame()" style="width:auto;padding:8px 12px;font-size:11px;"><i class="fa-solid fa-arrow-left"></i> Back</button></div>
                <div class="promo-card" style="background:linear-gradient(135deg,rgba(168,85,247,0.2),rgba(123,97,255,0.2));border-radius:20px;padding:20px;margin-bottom:15px;border:2px solid rgba(168,85,247,0.3);position:relative;overflow:hidden;">
                    <div style="position:absolute;top:-50px;right:-50px;width:100px;height:100px;background:rgba(168,85,247,0.1);border-radius:50%;"></div><div style="position:absolute;bottom:-30px;left:-30px;width:80px;height:80px;background:rgba(123,97,255,0.1);border-radius:50%;"></div>
                    <div style="position:relative;z-index:2;"><div style="display:flex;align-items:center;gap:10px;margin-bottom:15px;"><div style="width:50px;height:50px;background:linear-gradient(135deg,#a855f7,#7b61ff);border-radius:15px;display:flex;align-items:center;justify-content:center;font-size:24px;color:white;"><i class="fa-solid fa-key"></i></div><div><div style="font-size:16px;font-weight:800;color:white;">Redeem Code</div><div style="font-size:12px;color:rgba(255,255,255,0.7);">Enter promo code for rewards</div></div></div>
                        <div style="display:flex;gap:10px;margin-bottom:15px;"><input type="text" id="promo-code-input" placeholder="Enter promo code..." style="flex:1;padding:12px 15px;border-radius:12px;background:rgba(0,0,0,0.3);border:1px solid rgba(168,85,247,0.5);color:white;font-family:inherit;font-size:14px;outline:none;"><button id="redeem-code-btn" style="padding:12px 20px;background:linear-gradient(135deg,#a855f7,#7b61ff);border:none;border-radius:12px;color:white;font-weight:700;cursor:pointer;display:flex;align-items:center;gap:8px;"><i class="fa-solid fa-gift"></i> Redeem</button></div>
                        <div id="promo-result" style="padding:10px;border-radius:10px;font-size:12px;text-align:center;display:none;"></div>
                    </div>
                </div>
                <div class="code-channel-card" style="background:linear-gradient(135deg,rgba(255,193,7,0.2),rgba(255,152,0,0.2));border-radius:20px;padding:20px;border:2px solid rgba(255,193,7,0.3);position:relative;overflow:hidden;cursor:pointer;" onclick="window.open('https://t.me/earnmoney1685','_blank')">
                    <div style="position:absolute;top:-30px;right:-30px;width:80px;height:80px;background:rgba(255,193,7,0.1);border-radius:50%;"></div>
                    <div style="position:relative;z-index:2;"><div style="display:flex;align-items:center;gap:15px;"><div style="width:60px;height:60px;background:linear-gradient(135deg,#FFC107,#FF9800);border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:28px;color:white;"><i class="fab fa-telegram"></i></div>
                        <div style="flex:1;"><div style="font-size:16px;font-weight:800;color:white;margin-bottom:5px;"><i class="fa-solid fa-bolt" style="color:#FFC107;"></i> Codes Channel</div><div style="font-size:12px;color:rgba(255,255,255,0.8);margin-bottom:8px;">Get exclusive promo codes & daily rewards</div><div style="display:flex;align-items:center;gap:5px;"><span style="font-size:11px;color:#FFC107;font-weight:700;"><i class="fa-solid fa-users"></i> Join Now</span><span style="font-size:11px;color:rgba(255,255,255,0.6);">@earnmoney1685</span></div></div>
                        <div style="width:40px;height:40px;background:rgba(255,255,255,0.1);border-radius:50%;display:flex;align-items:center;justify-content:center;color:#FFC107;font-size:18px;"><i class="fa-solid fa-arrow-right"></i></div>
                    </div>
                    <div style="display:flex;justify-content:space-between;margin-top:15px;padding-top:15px;border-top:1px solid rgba(255,255,255,0.1);">
                        <div style="text-align:center;"><div style="font-size:20px;font-weight:800;color:#FFC107;">5+</div><div style="font-size:10px;color:rgba(255,255,255,0.7);">Active Codes</div></div>
                        <div style="text-align:center;"><div style="font-size:20px;font-weight:800;color:#FFC107;">10K+</div><div style="font-size:10px;color:rgba(255,255,255,0.7);">Members</div></div>
                        <div style="text-align:center;"><div style="font-size:20px;font-weight:800;color:#FFC107;">24/7</div><div style="font-size:10px;color:rgba(255,255,255,0.7);">Updates</div></div>
                    </div>
                </div>
            </div>
            <div id="daily-streak-section" class="card" style="display:none;">
                <div style="display:flex;align-items:center;justify-content:space-between;margin-bottom:15px;"><h3 style="font-size:14px;color:var(--gold);display:flex;align-items:center;gap:8px;"><i class="fa-solid fa-calendar-check" style="color:#a855f7;"></i> Daily Streak</h3><button class="btn btn-action" onclick="closeGame()" style="width:auto;padding:8px 12px;font-size:11px;"><i class="fa-solid fa-arrow-left"></i> Back</button></div>
                <div class="daily-row" id="daily-checkin-grid"></div><button class="btn btn-primary" id="claim-daily-btn">Claim Bonus</button><p id="next-claim-timer" style="text-align:center;font-size:11px;margin-top:8px;opacity:0.7;"></p>
            </div>
            <div id="galaxy-slots-section" class="card" style="display:none;text-align:center;">
                <div style="display:flex;align-items:center;justify-content:space-between;margin-bottom:15px;"><h3 style="font-size:14px;color:var(--gold);display:flex;align-items:center;gap:8px;"><i class="fa-solid fa-slot-machine" style="color:#a855f7;"></i> Galaxy Slots Game</h3><button class="btn btn-action" onclick="closeGame()" style="width:auto;padding:8px 12px;font-size:11px;"><i class="fa-solid fa-arrow-left"></i> Back</button></div>
                <div class="spins-display"><div><div style="font-size:12px;color:var(--text-muted);">Available Spins</div><div class="spins-count" id="available-spins">1</div></div><button class="btn btn-ton" onclick="getExtraSpin()" style="width:auto;padding:8px 15px;">üé¨ Watch Ad for Extra Spin</button></div>
                <div class="slots-machine">
                    <div class="slots-reels"><div class="reel-container"><div class="reel" id="reel1"></div></div><div class="reel-container"><div class="reel" id="reel2"></div></div><div class="reel-container"><div class="reel" id="reel3"></div></div></div>
                    <div class="slots-result"><div id="slots-result-text" style="font-size:14px;margin-bottom:10px;">Press SPIN to play!</div><div id="slots-win-amount" style="font-size:24px;font-weight:800;color:var(--primary-green);">0 GLX</div></div>
                </div>
                <button class="btn btn-primary" id="slots-spin-btn" style="margin-bottom:15px;">üöÄ SPIN NOW</button>
                <div class="payout-table"><div class="payout-item">3x üåü = <span class="jackpot">10000 GLX</span></div><div class="payout-item">3x ü™ê = 5000 GLX</div><div class="payout-item">3x üí´ = 2500 GLX</div><div class="payout-item">3x ‚≠ê = 1200 GLX</div><div class="payout-item">2x üåü = 700 GLX</div><div class="payout-item">Any Match = 500 GLX</div></div>
            </div>
        </main>
        <main id="tasks" class="content-section">
            <div class="page-header"><h1>Missions</h1><p>Complete tasks to earn GLX</p></div>
            <div class="card">
                <div style="display:flex;justify-content:space-between;margin-bottom:10px;font-size:12px;font-weight:700;"><span>Daily Ad Limit</span><span style="color:var(--gold);">650 Total</span></div>
                <div id="monetag-ad-task" class="list-card" style="background:rgba(255,255,255,0.08);border-color:var(--primary-green);margin-bottom:10px;"><div class="lc-icon"><img src="https://i.ibb.co/tTkJX1Qy/logo.png" alt="Ad"></div><div class="lc-content"><div class="lc-title">Monetag Ad</div><div class="lc-sub"><span id="monetag-count">0</span> / <span id="monetag-limit">50</span></div></div><div class="lc-end"><div class="lc-val">+1000</div></div></div>
                <div id="gigapub-ad-task" class="list-card" style="background:rgba(255,255,255,0.08);border-color:var(--primary-green);margin-bottom:10px;"><div class="lc-icon"><img src="https://i.ibb.co/tTkJX1Qy/logo.png" alt="Ad"></div><div class="lc-content"><div class="lc-title">GigaPub Ad</div><div class="lc-sub"><span id="giga-count">0</span> / <span id="giga-limit">300</span></div></div><div class="lc-end"><div class="lc-val">+2000</div></div></div>
                <div id="adsgram-ad-task" class="list-card" style="background:rgba(255,255,255,0.08);border-color:var(--primary-green);"><div class="lc-icon"><img src="https://i.ibb.co/tTkJX1Qy/logo.png" alt="Ad"></div><div class="lc-content"><div class="lc-title">AdsGram Ad</div><div class="lc-sub"><span id="adsgram-count">0</span> / <span id="adsgram-limit">300</span></div></div><div class="lc-end"><div class="lc-val">+2000</div></div></div>
            </div>
            <h2>Partners</h2><div id="partner-tasks-card"><div id="partner-tasks-list"></div></div>
            <h2>Community</h2><div id="community-tasks-card"><div id="community-tasks-list"></div></div>
        </main>
        <main id="create-task-page" class="content-section">
            <div class="page-header"><h1>Add Mission</h1><p>Promote your channel or bot</p></div>
            <div class="card">
                <div class="input-wrap"><span class="input-label">Task Name</span><input type="text" id="new-task-name" class="custom-input" placeholder="e.g. Join Galaxy Channel"></div>
                <div class="input-wrap"><span class="input-label">Link</span><input type="text" id="new-task-link" class="custom-input" placeholder="https://t.me/..."></div>
                <div class="input-label" style="margin-bottom:10px;">Category</div><div class="cat-select"><div class="cat-opt active" onclick="selectCat(this,'channel')">Channel / Group</div><div class="cat-opt" onclick="selectCat(this,'bot')">Website / Bot</div></div>
                <div id="admin-required-msg" style="background:rgba(255,179,0,0.15);border:1px solid #ffb300;border-radius:12px;padding:12px;margin-bottom:20px;font-size:12px;color:#ffb300;display:block;line-height:1.5;"><i class="fa-solid fa-triangle-exclamation" style="margin-right:5px;"></i><strong>Action Required:</strong> You must add <u>@GLXGalaxyBot</u> as an <strong>Admin</strong> in your Channel/Group for tracking to work.</div>
                <div class="input-label" style="margin-bottom:10px;">Number of Completions</div><div class="price-grid" id="price-options"></div>
                <div id="payment-step-1"><button class="btn btn-ton" id="pay-task-btn" onclick="initiatePayment()"><img src="https://i.ibb.co/8DsyHqwK/toncoin-ton-logo.png" style="width:20px;border-radius:50%;">Pay <span id="pay-amount-display">0</span> TON</button></div>
                <div id="payment-step-2" style="display:none;text-align:center;"><p style="font-size:12px;margin-bottom:10px;color:#fff;">Payment sent? Verify below:</p><button class="btn btn-check" id="check-payment-btn" onclick="verifyPayment()">Check Payment</button><p id="payment-status-msg" style="font-size:11px;margin-top:8px;color:var(--text-muted);">Waiting for transaction...</p></div>
            </div>
            <button class="btn btn-action nav-link" data-target="tasks" style="margin-top:10px;">Cancel</button>
        </main>
        <main id="history" class="content-section">
            <div class="page-header"><h1>Ledger</h1><p>Transaction History</p></div>
            <div id="full-history-list" style="padding-bottom:20px;"></div>
        </main>
        <main id="withdrawal-history" class="content-section">
            <div class="page-header"><h1>Withdrawal History</h1><p>All completed withdrawals</p></div>
            <div class="card" style="text-align:center;margin-bottom:20px;"><h3 style="color:var(--gold);margin-bottom:15px;">üìä Withdrawal Statistics</h3><div class="stats-grid">
                <div class="stat-card"><div class="stat-label">Completed Withdrawals</div><div class="stat-value" id="completed-withdrawals-count">0</div></div>
                <div class="stat-card"><div class="stat-label">Total Paid (TON)</div><div class="stat-value" id="total-paid-ton">0.0000</div></div>
            </div></div>
            <div class="card" style="padding:0;margin-top:20px;">
                <div style="display:flex;justify-content:space-between;align-items:center;padding:15px;border-bottom:1px solid var(--glass-border);"><div style="font-size:12px;font-weight:700;color:var(--gold);">Recent Withdrawals</div><div style="font-size:10px;color:var(--text-muted);">Public Records</div></div>
                <div id="withdrawal-history-list" style="max-height:300px;overflow-y:auto;padding:10px;"></div>
            </div>
        </main>
        <main id="swap-page" class="content-section">
            <div class="page-header"><h1>Swap Market</h1><p>100K GLX = 0.01 TON</p></div>
            <div class="swap-direction-selector"><div class="swap-direction-btn active" onclick="selectSwapDirection('glx_to_ton')">GLX ‚Üí TON</div><div class="swap-direction-btn" onclick="selectSwapDirection('ton_to_glx')">TON ‚Üí GLX</div></div>
            <div class="card">
                <div id="glx-to-ton-section"><div class="input-wrap"><span class="input-label">You Give (GLX)</span><input type="number" id="swap-input-amount" class="custom-input" placeholder="Min 1,000" oninput="calculateSwap()"><div style="text-align:right;font-size:10px;color:var(--text-muted);margin-top:5px;">Max: <span id="swap-max-GLX">0</span><button onclick="setMaxSwap('glx')" style="margin-left:10px;background:var(--primary-green);color:#000;border:none;padding:4px 8px;border-radius:6px;font-size:10px;cursor:pointer;">MAX</button></div></div>
                    <div class="input-wrap"><span class="input-label">You Get (TON)</span><div style="display:flex;align-items:center;gap:10px;"><img src="https://i.ibb.co/8DsyHqwK/toncoin-ton-logo.png" style="width:24px;"><span id="swap-output-amount" class="custom-input">0.0000000</span></div></div><div class="swap-mode-text">Rate: 100,000 GLX = 0.01 TON</div></div>
                <div id="ton-to-glx-section" style="display:none;"><div class="input-wrap"><span class="input-label">You Give (TON)</span><input type="number" id="ton-input-amount" class="custom-input" placeholder="Min 0.0001" oninput="calculateSwap()"><div style="text-align:right;font-size:10px;color:var(--text-muted);margin-top:5px;">Max: <span id="swap-max-TON">0.0000</span><button onclick="setMaxSwap('ton')" style="margin-left:10px;background:var(--primary-green);color:#000;border:none;padding:4px 8px;border-radius:6px;font-size:10px;cursor:pointer;">MAX</button></div></div>
                    <div class="input-wrap"><span class="input-label">You Get (GLX)</span><div style="display:flex;align-items:center;gap:10px;"><img src="https://i.ibb.co/tTkJX1Qy/logo.png" style="width:24px;height:24px;border-radius:50%;"><span id="ton-output-amount" class="custom-input">0</span></div></div><div class="swap-mode-text">Rate: 0.01 TON = 100,000 GLX</div></div>
                <button class="btn btn-primary" id="execute-swap-btn" onclick="executeSwap()">Confirm Swap</button>
            </div>
        </main>
        <main id="withdraw" class="content-section">
            <div class="page-header"><h1>Withdraw</h1><p>GLX out to TON Wallet</p></div>
            <div class="withdrawal-type-selector">
                <div class="withdrawal-type-btn active" data-type="faucetpay" onclick="selectWithdrawalType('faucetpay')"><i class="fa-solid fa-envelope"></i> FaucetPay</div>
                <div class="withdrawal-type-btn" data-type="tonwallet" onclick="selectWithdrawalType('tonwallet')"><i class="fa-solid fa-wallet"></i> TON Wallet</div>
            </div>
            <div id="faucetpay-form" class="card">
                <div class="input-wrap"><span class="input-label">FaucetPay Email Address</span><input type="email" id="faucetpay-email" class="custom-input" placeholder="example@gmail.com" oninput="maskEmail()"><div id="email-preview" class="email-display masked-email" style="display:none;margin-top:8px;font-size:12px;color:#a855f7;font-family:'Courier New',monospace;"></div></div>
                <div class="input-wrap withdraw-input-with-max"><span class="input-label">Withdrawal Amount (TON)</span><div style="display:flex;align-items:center;gap:8px;"><input type="number" id="faucetpay-amount" class="custom-input" placeholder="0.0001" step="0.0001" min="0.0001" value="0.0001" style="flex:1;"><button class="max-btn" onclick="setMaxFaucetPay()">MAX</button></div><div style="text-align:right;font-size:10px;color:var(--text-muted);margin-top:5px;">Minimum: 0.0001 TON</div></div>
                <div class="info-box"><div style="display:flex;align-items:flex-start;gap:8px;"><div class="info-icon">!</div><div style="font-size:11px;line-height:1.4;"><strong>Important Information:</strong><br>‚Ä¢ Enter the email registered with your FaucetPay account<br>‚Ä¢ Minimum withdrawal: 0.0001 TON<br>‚Ä¢ <span style="color:#27ae60;">‚úÖ No fees</span> - We cover all transaction costs<br>‚Ä¢ Processing time: Up to 1 minute<br>‚Ä¢ Your email will be partially hidden for privacy</div></div></div>
                <button class="btn btn-primary" id="withdraw-faucetpay-btn" onclick="handleFaucetPayWithdraw()"><i class="fa-solid fa-paper-plane"></i> WITHDRAW VIA FAUCETPAY</button>
            </div>
            <div id="tonwallet-form" class="card" style="display:none;">
                <div class="input-wrap"><span class="input-label">TON Wallet Address</span><input type="text" id="ton-wallet-address" class="custom-input" placeholder="UQ... or EQ... or kQ..."><div style="text-align:right;font-size:10px;color:var(--text-muted);margin-top:5px;">Enter your TON wallet address (starts with UQ, EQ, or kQ)</div></div>
                <div class="input-wrap"><span class="input-label">Memo (Optional)</span><input type="text" id="ton-memo" class="custom-input" placeholder="For exchange deposits only"><div style="text-align:right;font-size:10px;color:var(--text-muted);margin-top:5px;">Optional: Required by some exchanges for deposits</div></div>
                <div class="input-wrap withdraw-input-with-max"><span class="input-label">Withdrawal Amount (TON)</span><div style="display:flex;align-items:center;gap:8px;"><input type="number" id="ton-withdraw-amount" class="custom-input" placeholder="0.05" step="0.01" min="0.05" value="0.05" style="flex:1;"><button class="max-btn" onclick="setMaxTonWallet()">MAX</button></div><div style="text-align:right;font-size:10px;color:var(--text-muted);margin-top:5px;">Minimum: 0.05 TON</div></div>
                <div class="info-box success"><div style="display:flex;align-items:flex-start;gap:8px;"><div class="info-icon">‚úì</div><div style="font-size:11px;line-height:1.4;"><strong>Withdrawal Details:</strong><br>‚Ä¢ Minimum withdrawal: 0.05 TON<br>‚Ä¢ <span style="color:#27ae60;">‚úÖ No fees</span> - We cover all transaction costs<br>‚Ä¢ Processing time: Up to 24 hours<br>‚Ä¢ Memo is only needed for exchange deposits<br>‚Ä¢ Ensure address is correct - transactions are irreversible</div></div></div>
                <button class="btn btn-primary" id="withdraw-ton-now-btn" onclick="handleTonWalletWithdraw()"><i class="fa-solid fa-wallet"></i> WITHDRAW TO TON WALLET</button>
            </div>
        </main>
        <main id="leaderboard" class="content-section">
            <div class="page-header"><h1>Top Kings</h1><p>The richest in the Galaxy</p></div>
            <div class="leader-tabs"><div class="tab-btn active" data-target="invites-leaderboard-list">Invites</div><div class="tab-btn" data-target="earnings-leaderboard-list">Holders</div></div>
            <div class="podium-list" id="invites-leaderboard-list"></div><div class="podium-list hidden" id="earnings-leaderboard-list"></div>
        </main>
        <main id="referrals" class="content-section">
            <div class="page-header"><h1>Referrals</h1><p>Invite friends, earn together</p></div>
            <div class="card" style="text-align:center;"><img src="https://i.ibb.co/tTkJX1Qy/logo.png" style="width:80px;margin-bottom:15px;"><div style="background:rgba(255,255,255,0.05);padding:10px;border-radius:12px;margin-bottom:20px;"><div style="font-size:12px;color:var(--text-muted);">Total Referrals</div><div style="font-size:24px;font-weight:800;color:#fff;" id="referral-count-display">0</div></div><p>Earn <strong>+2000 GLX</strong> for every friend.</p>
                <div id="referral-link-display" style="background:#000;padding:10px;border-radius:8px;font-family:monospace;font-size:10px;color:#aaa;margin:15px 0;word-break:break-all;">...</div>
                <button class="btn btn-primary" id="share-referral-btn">Invite Friends</button><button class="btn btn-outline" id="copy-referral-btn" style="margin-top:10px;">Copy Link</button>
                <div style="margin-top:20px;"><h3 style="font-size:16px;color:var(--gold);margin-bottom:10px;">üë• Your Referrals</h3><div id="referred-users-container" style="text-align:left;"><div class="referred-users-list" id="referred-users-list"></div><p id="no-referrals-msg" style="text-align:center;padding:20px;color:var(--text-muted);">No referrals yet. Invite friends to see them here.</p></div></div>
            </div>
        </main>
    </div>
    <div class="floating-add-task hidden" id="floatingAddTask" onclick="switchTab('create-task-page')"><div class="floating-add-task-content"><div class="floating-add-task-icon">+</div><div class="floating-add-task-text">Add Task</div></div></div>
    <nav class="bottom-nav">
        <div class="nav-item active" data-target="home"><svg viewBox="0 0 24 24"><path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path></svg><span class="nav-text">Home</span></div>
        <div class="nav-item" data-target="tasks"><svg viewBox="0 0 24 24"><path d="M9 11l3 3L22 4"/><path d="M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"/></svg><span class="nav-text">Tasks</span></div>
        <div class="nav-item" data-target="bonus"><svg viewBox="0 0 24 24"><path d="M20 12V8H6a2 2 0 0 1-2-2c0-1.1.9-2 2-2h12v4"></path><path d="M4 6v12c0 1.1.9 2 2 2h14v-4"></path><path d="M18 12a2 2 0 0 0-2 2c0 1.1.9 2 2 2h4v-4h-4z"></path></svg><span class="nav-text">Bonus</span></div>
        <div class="nav-item competition-nav-item" data-target="competition"><div class="competition-nav-icon"><svg viewBox="0 0 32 32" width="28" height="28"><circle cx="16" cy="16" r="14" fill="rgba(255,215,0,0.15)" opacity="0.8"/><path d="M9 13 L16 8 L23 13 L21 21 L11 21 Z" fill="none" stroke="#FFD700" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M16 5 L17.5 10 L22 10 L18.5 13 L19.5 18 L16 15 L12.5 18 L13.5 13 L10 10 L14.5 10 Z" fill="#FFD700" stroke="#FFA500" stroke-width="1.5"/><circle cx="16" cy="16" r="6" fill="none" stroke="#FFD700" stroke-width="1.5" stroke-dasharray="2 2"/><circle cx="16" cy="16" r="8" fill="none" stroke="rgba(255,215,0,0.3)" stroke-width="3"/></svg></div><span class="nav-text">Competition</span></div>
        <div class="nav-item" data-target="referrals"><svg viewBox="0 0 24 24"><path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M23 21v-2a4 4 0 0 0-3-3.87"/><path d="M16 3.13a4 4 0 0 1 0 7.75"/></svg><span class="nav-text">Referrals</span></div>
        <div class="nav-item" data-target="withdrawal-history"><svg viewBox="0 0 24 24" style="filter:drop-shadow(0 0 8px rgba(168,85,247,0.4));"><path d="M12 2v20" stroke="currentColor" stroke-width="2" stroke-linecap="round"/><path d="M8 12l4 4 4-4" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg><span class="nav-text">Withdrawals</span></div>
    </nav>
    <script>
        // JavaScript code will be compressed similarly
        // For brevity, I'll show the compressed version of the main functions
        
        const SECURITY_CONFIG={errorStyle:{background:'rgba(231,76,60,0.1)',border:'1px solid rgba(231,76,60,0.3)',color:'#e74c3c',borderRadius:'12px',padding:'15px',margin:'15px 0'},warningStyle:{background:'rgba(255,193,7,0.1)',border:'1px solid rgba(255,193,7,0.3)',color:'#FFC107',borderRadius:'12px',padding:'15px',margin:'15px 0'},successStyle:{background:'rgba(39,174,96,0.1)',border:'1px solid rgba(39,174,96,0.3)',color:'#27ae60',borderRadius:'12px',padding:'15px',margin:'15px 0'},infoStyle:{background:'rgba(52,152,219,0.1)',border:'1px solid rgba(52,152,219,0.3)',color:'#3498db',borderRadius:'12px',padding:'15px',margin:'15px 0'}};
        function showStyledMessage(m,t,c){const e=document.getElementById(c);if(!e)return;const n=e.querySelector('.security-message');if(n)n.remove();const o=document.createElement('div');o.className='security-message';const r=SECURITY_CONFIG[t+'Style']||SECURITY_CONFIG.errorStyle;Object.assign(o.style,r);let i='‚ùå';if(t==='warning')i='‚ö†Ô∏è';if(t==='success')i='‚úÖ';if(t==='info')i='‚ÑπÔ∏è';o.innerHTML=`<div style="display:flex;align-items:center;gap:10px;font-size:14px;"><div style="font-size:20px;">${i}</div><div>${m}</div></div>`;e.insertBefore(o,e.firstChild);return o;}
        function isTelegramMobileApp(){if(!window.Telegram?.WebApp)return false;const e=navigator.userAgent||navigator.vendor||window.opera;const t=e.includes('Telegram')||e.includes('TelegramBot')||window.Telegram.WebApp.platform==='ios'||window.Telegram.WebApp.platform==='android';const n=window.Telegram.WebApp.initData&&window.Telegram.WebApp.initData.length>0;return t&&n;}
        function isTelegramWeb(){return window.location.hostname.includes('web.telegram.org');}
        function generateDeviceFingerprint(){const e=[];e.push(screen.width);e.push(screen.height);e.push(screen.colorDepth);e.push(navigator.platform);e.push(navigator.hardwareConcurrency||'unknown');const t=e.join('|');let n=0;for(let o=0;o<t.length;o++){const r=t.charCodeAt(o);n=((n<<5)-n)+r;n=n&n;}return'device_'+Math.abs(n).toString(16);}
        function createVerificationStep(e,t,n,o='pending'){let r='üîí',c='<div class="verification-loading"></div>',i='';if(o==='completed'){r='‚úÖ';c='‚úì';i='completed';}else if(o==='failed'){r='‚ùå';c='‚úó';i='failed';}else if(o==='active'){r='‚è≥';i='active';}return`<div class="verification-step ${i}"><div class="step-icon">${r}</div><div class="step-info"><div class="step-title">${t}</div><div class="step-description">${n}</div></div><div class="step-status">${c}</div></div>`;}
        async function detectVPN(e){try{const t=['10.','172.16.','172.17.','172.18.','172.19.','172.20.','172.21.','172.22.','172.23.','172.24.','172.25.','172.26.','172.27.','172.28.','172.29.','172.30.','172.31.','192.168.','100.64.','100.65.','100.66.','100.67.','100.68.','100.69.','100.70.','100.71.','100.72.','100.73.','100.74.','100.75.','100.76.','100.77.','100.78.','100.79.','100.80.'];for(const n of t){if(e.startsWith(n))return true;}const n=['vpn','proxy','tor','anonymizer','hide','privacy','secure','shield','guard','mask'];return false;}catch(e){console.error('VPN detection error:',e);return false;}}
        async function getUserIP(){try{const e=await fetch('https://api.ipify.org?format=json');const t=await e.json();return t.ip;}catch(e){console.error('Error getting IP:',e);return'Unknown';}}
        async function performSecurityVerification(){const e=document.getElementById('verification-steps'),t=document.getElementById('verification-progress-bar'),n=document.getElementById('verification-result');e.innerHTML=createVerificationStep(1,'Telegram Environment Check','Verifying Telegram Mobile App...','active');if(!isTelegramMobileApp()){if(isTelegramWeb()){showBlockedAccess('‚ùå Please open this bot inside the official Telegram mobile app only.');}else{showBlockedAccess('‚ùå Unauthorized access. This bot only works in Telegram mobile app.');}return false;}
        t.style.width='25%';await new Promise(e=>setTimeout(e,800));e.innerHTML=createVerificationStep(1,'Telegram Environment Check','Verified: Official Telegram Mobile App','completed')+createVerificationStep(2,'User Account Check','Checking existing account...','active');const o=window.Telegram?.WebApp?.initDataUnsafe?.user;if(!o){showBlockedAccess('‚ùå Unable to verify Telegram user.');return false;}
        const r={id:o.id.toString(),first_name:o.first_name,last_name:o.last_name||'',username:o.username||''};t.style.width='50%';await new Promise(e=>setTimeout(e,800));const c={apiKey:"AIzaSyC5dwRaz3L-aK7I5CoPkbB31MzXB62lgrU",authDomain:"earnmoney124553.firebaseapp.com",databaseURL:"https://earnmoney124553-default-rtdb.firebaseio.com",projectId:"earnmoney124553",storageBucket:"earnmoney124553.firebasestorage.app",messagingSenderId:"325528918523",appId:"1:325528918523:web:73d84f48a24c1e0cbfd35e",measurementId:"G-G1H96Q5XCJ"};firebase.initializeApp(c);const i=firebase.database();try{const c=await i.ref('users/'+r.id).once('value');if(c.exists()){e.innerHTML=createVerificationStep(1,'Telegram Environment Check','Verified: Official Telegram Mobile App','completed')+createVerificationStep(2,'User Account Check','Existing user detected','completed');t.style.width='100%';n.innerHTML=`<div style="${SECURITY_CONFIG.successStyle.background};${SECURITY_CONFIG.successStyle.border};border-radius:12px;padding:15px;text-align:center;"><div style="font-size:20px;margin-bottom:10px;">‚úÖ</div><div style="font-weight:700;color:#27ae60;margin-bottom:5px;">Welcome Back!</div><div style="font-size:12px;color:var(--text-muted);">Security verification passed. Loading your account...</div></div>`;await new Promise(e=>setTimeout(e,1500));return{user:r,isExisting:true,db:i};}
        e.innerHTML=createVerificationStep(1,'Telegram Environment Check','Verified: Official Telegram Mobile App','completed')+createVerificationStep(2,'User Account Check','New user detected','completed')+createVerificationStep(3,'IP Address Check','Checking IP address...','active');t.style.width='66%';await new Promise(e=>setTimeout(e,800));const a=await getUserIP();e.innerHTML=createVerificationStep(1,'Telegram Environment Check','Verified: Official Telegram Mobile App','completed')+createVerificationStep(2,'User Account Check','New user detected','completed')+createVerificationStep(3,'IP Address Check',`Your IP: ${a}`,'completed')+createVerificationStep(4,'VPN Detection','Checking VPN status...','active');t.style.width='75%';await new Promise(e=>setTimeout(e,800));const s=await detectVPN(a);if(s){e.innerHTML=createVerificationStep(1,'Telegram Environment Check','Verified: Official Telegram Mobile App','completed')+createVerificationStep(2,'User Account Check','New user detected','completed')+createVerificationStep(3,'IP Address Check',`Your IP: ${a}`,'completed')+createVerificationStep(4,'VPN Detection','VPN detected - Access blocked','failed');showBlockedAccess('üö´ Access blocked due to VPN usage.');return false;}
        e.innerHTML=createVerificationStep(1,'Telegram Environment Check','Verified: Official Telegram Mobile App','completed')+createVerificationStep(2,'User Account Check','New user detected','completed')+createVerificationStep(3,'IP Address Check',`Your IP: ${a}`,'completed')+createVerificationStep(4,'VPN Detection','No VPN detected','completed')+createVerificationStep(5,'Device Fingerprint Check','Checking device fingerprint...','active');t.style.width='90%';await new Promise(e=>setTimeout(e,800));const d=generateDeviceFingerprint();const l=await i.ref('security/device_fingerprints/'+d).once('value');if(l.exists()){e.innerHTML=createVerificationStep(1,'Telegram Environment Check','Verified: Official Telegram Mobile App','completed')+createVerificationStep(2,'User Account Check','New user detected','completed')+createVerificationStep(3,'IP Address Check',`Your IP: ${a}`,'completed')+createVerificationStep(4,'VPN Detection','No VPN detected','completed')+createVerificationStep(5,'Device Fingerprint Check','Device already registered','failed');showBlockedAccess('üîí This device is already registered.');return false;}
        e.innerHTML=createVerificationStep(1,'Telegram Environment Check','Verified: Official Telegram Mobile App','completed')+createVerificationStep(2,'User Account Check','New user detected','completed')+createVerificationStep(3,'IP Address Check',`Your IP: ${a}`,'completed')+createVerificationStep(4,'VPN Detection','No VPN detected','completed')+createVerificationStep(5,'Device Fingerprint Check','Device fingerprint verified','completed');t.style.width='100%';const u={userId:r.id,ipAddress:a,deviceFingerprint:d,telegramId:r.id,registrationDate:Date.now()};await i.ref('security/verified_users/'+r.id).set(u);await i.ref('security/device_fingerprints/'+d).set({userId:r.id,registeredAt:Date.now()});n.innerHTML=`<div style="${SECURITY_CONFIG.successStyle.background};${SECURITY_CONFIG.successStyle.border};border-radius:12px;padding:15px;text-align:center;"><div style="font-size:20px;margin-bottom:10px;">‚úÖ</div><div style="font-weight:700;color:#27ae60;margin-bottom:5px;">Verification Complete!</div><div style="font-size:12px;color:var(--text-muted);">All security checks passed. Welcome to GLX Galaxy!</div></div>`;await new Promise(e=>setTimeout(e,1500));return{user:r,isExisting:false,db:i};}catch(e){console.error('Security verification error:',e);showBlockedAccess('‚ö†Ô∏è System error during verification. Please try again.');return false;}}
        function showBlockedAccess(e){document.getElementById('security-verification').style.display='none';document.getElementById('blocked-access').style.display='block';document.getElementById('blocked-reason').innerHTML=e;}
        function showMainApp(){document.getElementById('security-verification').style.display='none';document.getElementById('blocked-access').style.display='none';document.getElementById('app-container').style.display='block';}
        document.addEventListener('DOMContentLoaded',async function(){const e=await performSecurityVerification();if(!e)return;showMainApp();const{user:t,isExisting:n,db:o}=e;const r='CashJungleBot',c='UQCg1DjKHH1_guXQ0TFmkvj09igxYwEJGfKPijLaHyOHIPTX',i=0.0000001,a=10000000,s=10000,d=0.001,u=24*60*60*1000,l=60*60*1000,p='int-18879',m='8340000265:AAErFZF0d-khnKM8LxU0pU8T140-DdZLncQ';if(window.Telegram?.WebApp){window.Telegram.WebApp.ready();window.Telegram.WebApp.expand();window.Telegram.WebApp.headerColor='#202020';window.Telegram.WebApp.backgroundColor='#202020';}
        let h={},g={},f=!1,v=!1,b=null;let C='channel',w=100,y=0.15,T='';let S=!1;const x=['üåü','ü™ê','üí´','‚≠ê','üöÄ','üåå'];const L={'üåüüåüüåü':10000,'ü™êü™êü™ê':5000,'üí´üí´üí´':2500,'‚≠ê‚≠ê‚≠ê':1200,'üåüüåü':700,'default':500};let _={isFlipping:!1,chosenSide:'glx',betAmount:1000,lastFlipResult:null,winChance:45,lossChance:55,currentRotation:0,animationId:null};let N='faucetpay';let A='glx_to_ton';let M=null,O=null,E={isActive:!0,startTime:Date.now(),endTime:Date.now()+u,totalTickets:0,prizePool:0,userTickets:0,winners:[]};let R=0;const D=3000;let I=0,F='',P=null;if(n){const e=await getUserIP();const n=generateDeviceFingerprint();await o.ref('security/verified_users/'+t.id).update({lastLogin:Date.now(),lastIP:e,deviceFingerprint:n});}
        window.selectSwapDirection=function(e){A=e;document.querySelectorAll('.swap-direction-btn').forEach(e=>e.classList.remove('active'));document.querySelectorAll('.swap-direction-btn').forEach(t=>{if(t.textContent.includes(e==='glx_to_ton'?'GLX ‚Üí TON':'TON ‚Üí GLX'))t.classList.add('active');});if(e==='glx_to_ton'){document.getElementById('glx-to-ton-section').style.display='block';document.getElementById('ton-to-glx-section').style.display='none';document.querySelector('.page-header p').textContent='100K GLX = 0.01 TON';}else{document.getElementById('glx-to-ton-section').style.display='none';document.getElementById('ton-to-glx-section').style.display='block';document.querySelector('.page-header p').textContent='0.01 TON = 100K GLX';}
        calculateSwap();};window.calculateSwap=function(){if(A==='glx_to_ton'){const e=parseFloat(document.getElementById('swap-input-amount').value)||0;const t=e*i;document.getElementById('swap-output-amount').textContent=t.toFixed(7);}else{const e=parseFloat(document.getElementById('ton-input-amount').value)||0;const t=e*a;document.getElementById('ton-output-amount').textContent=Math.floor(t).toLocaleString();}};window.setMaxSwap=function(e){if(e==='glx'||A==='glx_to_ton'){const e=h.dogsBalance||0;if(e<1000){showStyledMessage("Minimum swap is 1,000 GLX","warning","app-container");return;}
        document.getElementById('swap-input-amount').value=e;calculateSwap();}else{const e=h.tonBalance||0;if(e<0.0001){showStyledMessage("Minimum swap is 0.0001 TON","warning","app-container");return;}
        document.getElementById('ton-input-amount').value=e.toFixed(4);calculateSwap();}};window.executeSwap=function(){if(A==='glx_to_ton')executeGLXtoTONSwap();else executeTONtoGLXSwap();};function executeGLXtoTONSwap(){const e=parseFloat(document.getElementById('swap-input-amount').value)||0;const n=h.dogsBalance||0;if(e<1000){showStyledMessage("Min swap: 1,000 GLX","warning","app-container");return;}if(e>n){showStyledMessage("Insufficient GLX Balance","warning","app-container");return;}
        const r=e*i;if(!confirm(`Swap ${e.toLocaleString()} GLX for ${r.toFixed(7)} TON?\n\nRate: 100,000 GLX = 0.01 TON`))return;const c={};c[`users/${t.id}/dogsBalance`]=n-e;c[`users/${t.id}/tonBalance`]=(h.tonBalance||0)+r;o.ref().update(c).then(()=>{addHistory('swap_out','Swap GLX to TON',e,'GLX');addHistory('swap_in','Received from GLX Swap',r,'TON');showStyledMessage(`Swap Complete!\n\n-${e.toLocaleString()} GLX\n+${r.toFixed(7)} TON`,"success","app-container");document.getElementById('swap-input-amount').value='';document.getElementById('swap-output-amount').textContent='0.0000000';switchTab('home');}).catch(e=>{showStyledMessage("Error: "+e.message,"error","app-container");});}
        function executeTONtoGLXSwap(){const e=parseFloat(document.getElementById('ton-input-amount').value)||0;const n=h.tonBalance||0;if(e<0.0001){showStyledMessage("Min swap: 0.0001 TON","warning","app-container");return;}if(e>n){showStyledMessage("Insufficient TON Balance","warning","app-container");return;}
        const r=e*a;if(!confirm(`Swap ${e.toFixed(4)} TON for ${r.toLocaleString()} GLX?\n\nRate: 0.01 TON = 100,000 GLX`))return;const c={};c[`users/${t.id}/tonBalance`]=n-e;c[`users/${t.id}/dogsBalance`]=(h.dogsBalance||0)+r;o.ref().update(c).then(()=>{addHistory('swap_out','Swap TON to GLX',e,'TON');addHistory('swap_in','Received from TON Swap',r,'GLX');showStyledMessage(`Swap Complete!\n\n-${e.toFixed(4)} TON\n+${r.toLocaleString()} GLX`,"success","app-container");document.getElementById('ton-input-amount').value='';document.getElementById('ton-output-amount').textContent='0';switchTab('home');}).catch(e=>{showStyledMessage("Error: "+e.message,"error","app-container");});}
        window.openGame=function(e){document.getElementById('coin-flip-section').style.display='none';document.getElementById('promo-codes-section').style.display='none';document.getElementById('daily-streak-section').style.display='none';document.getElementById('galaxy-slots-section').style.display='none';const n=document.querySelector('.bonus-grid');n.style.display='none';document.getElementById(e+'-section').style.display='block';if(e==='coin-flip')resetCoinFlipGame();else if(e==='galaxy-slots'){initSlotsGame();updateAvailableSpins();}else if(e==='daily-streak')renderDailyBonusUI();};window.closeGame=function(){document.getElementById('coin-flip-section').style.display='none';document.getElementById('promo-codes-section').style.display='none';document.getElementById('daily-streak-section').style.display='none';document.getElementById('galaxy-slots-section').style.display='none';const e=document.querySelector('.bonus-grid');e.style.display='grid';};window.maskEmail=function(){const e=document.getElementById('faucetpay-email');const t=document.getElementById('email-preview');if(!e||!t)return;const n=e.value.trim();if(n&&n.includes('@')){const[e,r]=n.split('@');if(e.length>3){const n=e.charAt(0)+'*'.repeat(Math.max(3,e.length-2))+e.charAt(e.length-1);const o=`${n}@${r}`;t.textContent=o;t.style.display='block';}else t.style.display='none';}else t.style.display='none';};window.copyWalletAddress=function(){navigator.clipboard.writeText('UQCg1DjKHH1_guXQ0TFmkvj09igxYwEJGfKPijLaHyOHIPTX');showStyledMessage('Wallet address copied!','success','app-container');};window.sendDepositPayment=function(){const e=document.getElementById('deposit-amount');const n=parseFloat(e.value);if(!n||n<0.01){showStyledMessage("Minimum deposit is 0.01 TON","warning","app-container");e.focus();return;}
        I=n;F=`deposit_${t.id}_${Date.now()}`;document.getElementById('send-deposit-btn').style.display='none';document.getElementById('verify-deposit-section').style.display='block';document.getElementById('deposit-memo-display').textContent=F;const r=Math.floor(n*1e9);const c=`https://app.tonkeeper.com/transfer/${c}?amount=${r}&text=${F}`;if(window.Telegram?.WebApp)window.Telegram.WebApp.openLink(c);else window.open(c,'_blank');const i=document.getElementById('verify-deposit-btn');i.onclick=function(){verifyDepositTransaction();};clearInterval(P);P=setInterval(()=>{if(document.getElementById('verify-deposit-section').style.display!=='none')verifyDepositTransaction();},3e4);};window.verifyDepositTransaction=async function(){const e=document.getElementById('verify-deposit-btn');const n=document.getElementById('deposit-status-msg');if(e.disabled)return;e.disabled=!0;const r=e.innerHTML;e.innerHTML='<i class="fas fa-spinner fa-spin"></i> Checking...';n.textContent="Connecting to TON blockchain...";n.style.color="#ffb300";try{const o=await fetch(`https://tonapi.io/v2/blockchain/accounts/${c}/transactions?limit=50`);const i=await o.json();if(!i.transactions)throw new Error("API Error");let a=!1,s=null;for(const e of i.transactions){if(e.in_msg&&e.in_msg.decoded_body&&e.in_msg.decoded_body.text){const t=e.in_msg.decoded_body.text;if(t===F){const o=e.in_msg.value/1e9;if(Math.abs(o-I)<=0.0001){a=!0;s=e;break;}}}}
        if(a){clearInterval(P);await o.ref(`users/${t.id}/tonBalance`).transaction(e=>(e||0)+I);addHistory('deposit',`TON Deposit #${s.hash.substring(0,8)}`,I,'TON');n.innerHTML=`‚úÖ <strong>Deposit Verified!</strong><br>+${I} TON added to your balance<br><small style="color: #aaa;">TX: ${s.hash.substring(0,12)}...</small>`;n.style.color="#27ae60";e.innerHTML='<i class="fa-solid fa-check"></i> VERIFIED';e.style.background='linear-gradient(135deg, #27ae60, #2ecc71)';setTimeout(()=>{renderUI();},1000);setTimeout(()=>{document.getElementById('send-deposit-btn').style.display='block';document.getElementById('verify-deposit-section').style.display='none';document.getElementById('deposit-amount').value='0.01';e.disabled=!1;e.innerHTML='<i class="fa-solid fa-magnifying-glass"></i> CHECK DEPOSIT STATUS';e.style.background='linear-gradient(135deg, #3498db, #2980b9)';n.textContent="After sending payment, click here to check status";n.style.color="var(--text-muted)";},5e3);}else{n.textContent="Deposit not found yet. Please wait 1-2 minutes and try again.";n.style.color="#e74c3c";e.disabled=!1;e.innerHTML='<i class="fa-solid fa-magnifying-glass"></i> CHECK AGAIN';}}catch(e){console.error("Deposit verification error:",e);n.textContent="Error checking blockchain. Please try again.";n.style.color="#e74c3c";e.disabled=!1;e.innerHTML='<i class="fa-solid fa-magnifying-glass"></i> TRY AGAIN';}};function setupGalaxyLogButton(){const e=document.getElementById('galaxy-log-button');if(e){e.addEventListener('click',function(){console.log("üìú Galaxy Log button clicked!");switchTab('galaxy-log-page');});}}function initializeCompetition(){o.ref('competition/current').on('value',e=>{if(e.exists()){const n=e.val();E=n;if(n.userTickets&&typeof n.userTickets==='object'){if(n.userTickets[t.id])E.userTickets=parseInt(n.userTickets[t.id])||0;else E.userTickets=0;}else E.userTickets=n.userTickets||0;updateCompetitionUI();startCountdown();}else{const n={isActive:!0,startTime:Date.now(),endTime:Date.now()+u,totalTickets:0,prizePool:0,userTickets:{},winners:[],breakMode:!1,breakEndTime:0};o.ref('competition/current').set(n);E=n;}});o.ref(`competition/current/userTickets/${t.id}`).on('value',e=>{const n=e.val()||0;E.userTickets=parseInt(n)||0;document.getElementById('user-tickets').textContent=E.userTickets.toString();});loadPreviousWinners();}function updateCompetitionUI(){const e=Date.now();const n=E.breakMode||!1;if(n){document.getElementById('competition-status').textContent='BREAK';document.getElementById('competition-status').style.color='#FFC107';}else{document.getElementById('competition-status').textContent=E.isActive?'ACTIVE':'ENDED';document.getElementById('competition-status').style.color=E.isActive?'#27ae60':'#e74c3c';}
        document.getElementById('prize-pool').textContent=E.prizePool?E.prizePool.toFixed(3)+' TON':'0.000 TON';document.getElementById('total-tickets').textContent=E.totalTickets||0;let o=0;if(typeof E.userTickets==='object')o=E.userTickets[t.id]||0;else o=parseInt(E.userTickets)||0;document.getElementById('user-tickets').textContent=o;const r=document.getElementById('ticket-amount');if(r)updateTicketCostDisplay();const c=document.getElementById('buy-tickets-btn');if(c){c.disabled=n||!E.isActive;c.style.opacity=n||!E.isActive?'0.5':'1';}updateCompetitionLeaderboard();}function startCountdown(){if(O)clearInterval(O);O=setInterval(()=>{const e=Date.now();let n=0;const o=E.breakMode||!1;if(o)n=Math.max(0,E.breakEndTime-e);else n=Math.max(0,E.endTime-e);if(n<=0){if(o)startNewCompetition();else endCompetitionAndStartBreak();return;}
        const r=Math.floor(n/(1e3*60*60));const c=Math.floor(n%(1e3*60*60)/(1e3*60));const i=Math.floor(n%(1e3*60)/1e3);const a=`${r.toString().padStart(2,'0')}:${c.toString().padStart(2,'0')}:${i.toString().padStart(2,'0')}`;document.getElementById('countdown-timer').textContent=a;},1e3);}function updateTicketCostDisplay(){const e=document.getElementById('ticket-amount');if(!e)return;const t=parseInt(e.value)||1;const n=t*s;document.getElementById('tickets-count-display').textContent=t;document.getElementById('tickets-cost-display').textContent=n.toLocaleString()+' GLX';}window.setMaxTickets=function(){const e=h.dogsBalance||0;const n=Math.floor(e/s);if(n<1){showStyledMessage("You don't have enough GLX to buy a ticket (10,000 GLX required)","warning","app-container");return;}
        const o=document.getElementById('ticket-amount');o.value=n;updateTicketCostDisplay();};window.buyTickets=function(){if(E.breakMode){showStyledMessage("Competition is on break. Please wait for the next round.","warning","app-container");return;}
        if(!E.isActive){showStyledMessage("Competition has ended. Please wait for the next round.","warning","app-container");return;}
        const e=document.getElementById('ticket-amount');const n=parseInt(e.value)||0;if(n<1){showStyledMessage("Please enter at least 1 ticket","warning","app-container");return;}
        const o=n*s;const r=h.dogsBalance||0;if(o>r){showStyledMessage(`Insufficient GLX balance. You need ${o.toLocaleString()} GLX`,"warning","app-container");return;}
        if(!confirm(`Buy ${n} ticket${n>1?'s':''} for ${o.toLocaleString()} GLX?\n\nEach ticket = 10,000 GLX = 0.001 TON\n\nüèÜ Remember: Only #1 wins, all others lose!`))return;const c=document.getElementById('buy-tickets-btn');const i=document.getElementById('buy-tickets-status');c.disabled=!0;c.innerHTML='<i class="fas fa-spinner fa-spin"></i> Processing...';i.textContent="Processing your purchase...";i.style.color="#FFC107";o.ref(`users/${t.id}/dogsBalance`).transaction(e=>(e||0)-o).then(()=>{const a={};o.ref(`competition/current/userTickets/${t.id}`).once('value').then(e=>{const r=parseInt(e.val())||0;const a=r+n;a[`competition/current/userTickets/${t.id}`]=a;a[`competition/current/totalTickets`]=(E.totalTickets||0)+n;a[`competition/current/prizePool`]=((E.totalTickets||0)+n)*d;return o.ref().update(a);}).then(()=>{addHistory('spend',`Bought ${n} Competition Ticket${n>1?'s':''}`,o,'GLX');c.disabled=!1;c.innerHTML='<i class="fa-solid fa-ticket"></i> BUY TICKETS';i.textContent=`‚úÖ Successfully purchased ${n} ticket${n>1?'s':''}!`;i.style.color="#27ae60";e.value=1;updateTicketCostDisplay();setTimeout(()=>{i.textContent="";},3e3);renderUI();}).catch(e=>{console.error("Error updating competition data:",e);showStyledMessage("Error processing purchase. Please try again.","error","app-container");c.disabled=!1;c.innerHTML='<i class="fa-solid fa-ticket"></i> BUY TICKETS';i.textContent="‚ùå Error processing purchase";i.style.color="#e74c3c";});}).catch(e=>{console.error("Error buying tickets:",e);showStyledMessage("Error processing purchase. Please try again.","error","app-container");c.disabled=!1;c.innerHTML='<i class="fa-solid fa-ticket"></i> BUY TICKETS';i.textContent="‚ùå Error processing purchase";i.style.color="#e74c3c";});};function updateCompetitionLeaderboard(){o.ref('competition/current/userTickets').once('value').then(e=>{const n=e.val()||{};const r=document.getElementById('competition-leaderboard-list');if(!n||Object.keys(n).length===0){r.innerHTML='<p style="text-align:center;padding:20px;color:var(--text-muted);">No tickets purchased yet</p>';return;}
        const c=[];Object.entries(n).forEach(e=>{const[o,i]=e;const a=typeof i==='number'?i:i&&typeof i==='object'?0:parseInt(i)||0;c.push({userId:o,tickets:a});});c.sort((e,t)=>t.tickets-e.tickets);const i=c.slice(0,10);r.innerHTML='';if(i.length===0){r.innerHTML='<p style="text-align:center;padding:20px;color:var(--text-muted);">No tickets purchased yet</p>';return;}
        let a=0;i.forEach((e,n)=>{o.ref(`users/${e.userId}`).once('value').then(r=>{const c=r.val();const i=c?.name||'Anonymous';const a=c?.photoUrl||'https://i.ibb.co/tTkJX1Qy/logo.png';const s=n===0?'rank-1':n===1?'rank-2':n===2?'rank-3':'';const d=`<div class="competition-rank-card ${s}"><div class="competition-rank">#${n+1}</div><img src="${a}" class="competition-user-avatar" alt="${i}"><div class="competition-user-info"><div class="competition-user-name">${i}</div></div><div class="competition-ticket-count">${e.tickets} ticket${e.tickets!==1?'s':''}</div></div>`;r.insertAdjacentHTML('beforeend',d);a++;}).catch(()=>{const r=n===0?'rank-1':n===1?'rank-2':n===2?'rank-3':'';const c=`<div class="competition-rank-card ${r}"><div class="competition-rank">#${n+1}</div><img src="https://i.ibb.co/tTkJX1Qy/logo.png" class="competition-user-avatar" alt="Anonymous"><div class="competition-user-info"><div class="competition-user-name">Anonymous</div></div><div class="competition-ticket-count">${e.tickets} ticket${e.tickets!==1?'s':''}</div></div>`;r.insertAdjacentHTML('beforeend',c);});});}).catch(e=>{console.error("Error loading leaderboard:",e);const n=document.getElementById('competition-leaderboard-list');n.innerHTML='<p style="text-align:center;padding:20px;color:var(--text-muted);">Error loading leaderboard</p>';});}function loadPreviousWinners(){o.ref('competition/winners').orderByChild('timestamp').once('value').then(e=>{const n=document.getElementById('previous-winners-list');const r=[];e.forEach(e=>{r.push(e.val());});r.sort((e,t)=>t.timestamp-e.timestamp);if(r.length===0){n.innerHTML='<p style="text-align:center;padding:20px;color:var(--text-muted);">No previous winners yet</p>';return;}
        n.innerHTML='';r.forEach(e=>{const r=new Date(e.timestamp).toLocaleDateString();const c=e.prize?parseFloat(e.prize).toFixed(3):'0.000';o.ref(`users/${e.userId}`).once('value').then(t=>{const n=t.val();const o=n?.name||'Anonymous';const i=n?.photoUrl||'https://i.ibb.co/tTkJX1Qy/logo.png';const a=`<div class="winner-item"><div class="winner-rank">üèÜ</div><img src="${i}" class="winner-avatar" alt="${o}"><div class="winner-info"><div class="winner-name">${o}</div><div class="winner-date">${r}</div></div><div class="winner-prize">${c} TON</div></div>`;n.insertAdjacentHTML('beforeend',a);}).catch(()=>{const t=`<div class="winner-item"><div class="winner-rank">üèÜ</div><img src="https://i.ibb.co/tTkJX1Qy/logo.png" class="winner-avatar" alt="Anonymous"><div class="winner-info"><div class="winner-name">Anonymous</div><div class="winner-date">${r}</div></div><div class="winner-prize">${c} TON</div></div>`;n.insertAdjacentHTML('beforeend',t);});});}).catch(e=>{console.error("Error loading previous winners:",e);});}function endCompetitionAndStartBreak(){o.ref('competition/current/userTickets').once('value').then(e=>{const n=e.val()||{};if(Object.keys(n).length===0){startBreak();return;}
        let o='',r=0;Object.entries(n).forEach(e=>{const[t,n]=e;const c=parseInt(n)||0;if(c>r){r=c;o=t;}});if(!o){startBreak();return;}
        const c=E.prizePool||0;o.ref(`users/${o}/tonBalance`).transaction(e=>(e||0)+c).then(()=>{const e={userId:o,tickets:r,prize:c,timestamp:Date.now()};o.ref('competition/winners').push(e);o.ref(`users/${o}/history`).push({type:'prize',description:`Won Daily Competition`,amount:c,currency:'TON',date:new Date().toISOString()});startBreak();if(o===t.id){setTimeout(()=>{showStyledMessage(`üéâ CONGRATULATIONS! You won the competition!\n\nüèÜ Prize: ${c.toFixed(3)} TON\nüé´ Your tickets: ${r}\n\nüí∞ You are the ONLY winner - all other participants lost!`,"success","app-container");},1e3);}}).catch(e=>{console.error("Error awarding prize:",e);startBreak();});}).catch(e=>{console.error("Error ending competition:",e);startBreak();});}function startBreak(){const e=Date.now()+l;o.ref('competition/current').update({isActive:!1,breakMode:!0,breakEndTime:e}).then(()=>{updateCompetitionUI();});}function startNewCompetition(){const e={isActive:!0,startTime:Date.now(),endTime:Date.now()+u,totalTickets:0,prizePool:0,userTickets:{},winners:[],breakMode:!1,breakEndTime:0};o.ref('competition/current').set(e).then(()=>{updateCompetitionUI();loadPreviousWinners();});}window.setMaxBet=function(){const e=h.dogsBalance||0;const n=Math.floor(e/1e3)*1e3;if(n<1000){showStyledMessage("Minimum bet is 1,000 GLX","warning","app-container");return;}
        document.getElementById('coin-bet-amount').value=n;_.betAmount=n;};window.setMaxFaucetPay=function(){const e=h.tonBalance||0;const n=0.0001;if(e<n){showStyledMessage(`Minimum withdrawal is ${n} TON`,"warning","app-container");return;}
        document.getElementById('faucetpay-amount').value=e.toFixed(4);};window.setMaxTonWallet=function(){const e=h.tonBalance||0;const n=0.05;if(e<n){showStyledMessage(`Minimum withdrawal is ${n} TON`,"warning","app-container");return;}
        document.getElementById('ton-withdraw-amount').value=e.toFixed(2);};window.renderGalaxyLog=function(){const e=h.history?Object.values(h.history).sort((e,t)=>new Date(t.date)-new Date(e.date)):[];let n=0,o=0;e.forEach(e=>{if(e.type.includes('earn')||e.type==='referral')n+=parseFloat(e.amount)||0;else if(e.type.includes('spend')||e.type.includes('loss')||e.type.includes('withdraw'))o+=parseFloat(e.amount)||0;});document.getElementById('total-earned').textContent=Math.floor(n).toLocaleString()+' GLX';document.getElementById('total-spent').textContent=Math.floor(o).toLocaleString()+' GLX';filterLogs('all');};window.filterLogs=function(e){const n=h.history?Object.values(h.history).sort((e,t)=>new Date(t.date)-new Date(e.date)):[];const o=document.getElementById('galaxy-log-filtered-list');o.innerHTML='';const r=n.filter(t=>{if(e==='all')return!0;if(e==='earn')return t.type.includes('earn')||t.type==='referral';if(e==='spend')return t.type.includes('spend')||t.type.includes('loss');if(e==='swap')return t.type.includes('swap');if(e==='withdraw')return t.type.includes('withdraw');return!0;});r.forEach(e=>{let n='üìú',r='#fff',c='';if(e.type.includes('earn')||e.type==='referral'){n='üí∞';r='#27ae60';c='earn';}else if(e.type.includes('spend')||e.type.includes('loss')){n='üìâ';r='#e74c3c';c='spend';}else if(e.type.includes('swap')){n='üîÑ';r='#3498db';c='swap';}else if(e.type.includes('withdraw')){n='üè¶';r='#9b59b6';c='withdraw';}
        const i=e.currency==='TON'?parseFloat(e.amount).toFixed(4)+' TON':Math.floor(e.amount).toLocaleString()+' GLX';const a=`<div class="log-item ${c}"><div style="font-size:20px;margin-right:12px;">${n}</div><div style="flex:1;"><div style="font-size:13px;font-weight:600;margin-bottom:2px;">${e.description}</div><div style="font-size:10px;color:var(--text-muted);">${new Date(e.date).toLocaleString()}</div></div><div style="font-size:14px;font-weight:700;color:${r};">${i}</div></div>`;o.insertAdjacentHTML('beforeend',a);});};window.filterUserWithdrawals=function(e){updateUserWithdrawalsList(e);};function updateUserWithdrawalsStats(){o.ref('withdrawals').orderByChild('timestamp').once('value').then(e=>{let n=0,o=0,r=0,c=[];e.forEach(e=>{const i=e.val();if(i.userId===t.id){c.push({...i,key:e.key});if(i.status==='pending'||i.processed===!1)n++;else if(i.status==='completed'||i.processed===!0){o++;r+=parseFloat(i.amount||0);}}});c.sort((e,t)=>t.timestamp-e.timestamp);document.getElementById('pending-withdrawals').textContent=n;document.getElementById('completed-withdrawals').textContent=o;document.getElementById('total-sent-ton').textContent=r.toFixed(4)+' TON';const i=n+o;const a=i>0?Math.round((o/i)*100):100;document.getElementById('success-rate').textContent=a+'%';updateUserWithdrawalsList('all');});}function updateUserWithdrawalsList(e){o.ref('withdrawals').orderByChild('timestamp').once('value').then(n=>{const r=document.getElementById('user-withdrawals-list');r.innerHTML='';const c=[];n.forEach(e=>{const n=e.val();if(n.userId===t.id)c.push({...n,key:e.key});});c.sort((e,t)=>t.timestamp-e.timestamp);const i=c.filter(t=>{if(e==='all')return!0;if(e==='pending')return t.status==='pending'||t.processed===!1;if(e==='completed')return t.status==='completed'||t.processed===!0;return!0;});if(i.length===0){r.innerHTML='<p style="text-align:center;padding:20px;color:var(--text-muted);">No withdrawals found</p>';return;}
        i.forEach(e=>{const n=getTimeAgo(e.timestamp);const o=parseFloat(e.amount||0).toFixed(7);let r='',c='',i='';if(e.status==='rejected'){r='rejected';c='‚ùå Rejected';i='status-rejected';}else if(e.status==='completed'||e.processed===!0){r='completed';c='‚úÖ Completed';i='status-completed';}else{r='pending';c='‚è≥ Pending';i='status-pending';}
        let a=e.account||'';if(e.method==='faucetpay'&&a.includes('@')){const[e,n]=a.split('@');if(e.length>3)a=e.charAt(0)+'*'.repeat(Math.max(3,e.length-2))+e.charAt(e.length-1)+'@'+n;}else if(e.method==='ton'){if(a.length>16)a=a.substring(0,8)+'...'+a.substring(a.length-4);}
        const s=`<div class="user-withdrawal-item"><div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:5px;"><div style="font-size:12px;font-weight:600;">${e.method==='ton'?'TON Wallet':'FaucetPay'}</div><div class="withdrawal-status ${i}">${c}</div></div><div style="font-size:11px;color:var(--text-muted);margin-bottom:5px;" class="masked-email">${a}</div><div style="display:flex;justify-content:space-between;align-items:center;"><div style="font-size:14px;font-weight:700;color:var(--primary-green);">${o} TON</div><div style="font-size:9px;color:var(--text-muted);">${n}</div></div></div>`;r.insertAdjacentHTML('beforeend',s);});});}function getTimeAgo(e){if(!e)return"Unknown time";const t=Date.now();const n=t-e;const o=Math.floor(n/1e3);const r=Math.floor(o/60);const c=Math.floor(r/60);const i=Math.floor(c/24);if(i>0)return`${i} day${i>1?'s':''} ago`;if(c>0)return`${c} hour${c>1?'s':''} ago`;if(r>0)return`${r} minute${r>1?'s':''} ago`;if(o>0)return`${o} second${o!==1?'s':''} ago`;return"Just now";}
        function initializeApp(){const e=`${t.first_name} ${t.last_name}`.trim();document.getElementById('home-username').textContent=e;document.getElementById('referral-link-display').textContent=`https://t.me/${r}?startapp=ref${t.id}`;document.getElementById('deposit-memo-id').textContent=t.id;if(window.Adsgram)b=window.Adsgram.init({blockId:p});fetchAppSettings();setupEventListeners();setupGalaxyLogButton();renderCreateTaskUI();initSlotsGame();initCoinFlipGame();initPromoCodes();initializeCompetition();setTimeout(()=>{f=typeof show_10286382==="function";},2500);selectWithdrawalType('faucetpay');selectSwapDirection('glx_to_ton');const n=document.getElementById('ticket-amount');if(n){n.addEventListener('input',updateTicketCostDisplay);updateTicketCostDisplay();}}function initializeUser(){o.ref('users/'+t.id).on('value',e=>{const n=e.val();if(n&&n.banned===!0){document.body.innerHTML=`<div style="background:#000;color:#ff4444;height:100vh;display:flex;flex-direction:column;justify-content:center;align-items:center;text-align:center;font-family:sans-serif;"><div style="font-size:50px;">üö´</div><h2>ACCESS BLOCKED</h2><p>Reason: ${n.banReason||'Violation of rules'}</p></div>`;return;}
        const r=`${t.first_name} ${t.last_name}`.trim();if(e.exists()){h=e.val();const n=new Date().toDateString();if(h.lastAdDate!==n){o.ref('users/'+t.id).update({adsWatched:0,adsMonetag:0,adsGiga:0,adsAdsgram:0,lastAdDate:n});h.adsWatched=0;h.adsMonetag=0;h.adsGiga=0;h.adsAdsgram=0;}
        if(h.name!==r)o.ref('users/'+t.id).update({name:r});}else{h={id:t.id,name:r,dogsBalance:500,tonBalance:0,adsWatched:0,adsMonetag:0,adsGiga:0,adsAdsgram:0,completedTasks:{},history:{},referrals:0,dailyStreak:0,lastDailyClaim:0,extraSpins:1,referredUsers:[],usedPromoCodes:[]};o.ref('users/'+t.id).set(h).then(()=>{addHistory('earn','Welcome Bonus',500,'GLX');});}
        handleReferral();renderUI();renderDailyBonusUI();updateAvailableSpins();});}function fetchAppSettings(){o.ref('settings').on('value',e=>{g=e.val()||{adRewardMonetag:1000,adRewardGiga:2000,adRewardAdsgram:2000,limitMonetag:50,limitGiga:300,limitAdsgram:300,minTonWithdrawal:0.05,minFaucetPayWithdrawal:0.0001,referralReward:500,pricePerClick:0.0015};initializeUser();calculateCost();});}function getLevel(e){if(e>=5e6)return 10;if(e>=2500000)return 9;if(e>=1e6)return 8;if(e>=5e5)return 7;if(e>=250000)return 6;if(e>=1e5)return 5;if(e>=5e4)return 4;if(e>=25000)return 3;if(e>=5000)return 2;return 1;}function renderUI(){if(!h)return;const e=Math.floor(h.dogsBalance||0);const n=(h.tonBalance||0).toFixed(7);const o=getLevel(e);document.getElementById('home-user-level').textContent=`Level ${o}`;document.getElementById('total-GLX-balance').textContent=e.toLocaleString();document.getElementById('home-ton-balance').textContent=parseFloat(n).toFixed(4);document.getElementById('swap-max-GLX').textContent=e.toLocaleString();document.getElementById('swap-max-TON').textContent=parseFloat(n).toFixed(4);document.querySelectorAll('.user-ton-balance').forEach(e=>e.textContent=parseFloat(n).toFixed(4));document.getElementById('referral-count-display').textContent=(h.referrals||0);document.getElementById('hud-glx-balance').textContent=e.toLocaleString();document.getElementById('hud-ton-balance').textContent=parseFloat(n).toFixed(4);const r=h.adsMonetag||0,c=h.adsGiga||0,i=h.adsAdsgram||0,a=g.limitMonetag||50,s=g.limitGiga||300,d=g.limitAdsgram||300;document.getElementById('monetag-count').textContent=r;document.getElementById('monetag-limit').textContent=a;document.getElementById('giga-count').textContent=c;document.getElementById('giga-limit').textContent=s;document.getElementById('adsgram-count').textContent=i;document.getElementById('adsgram-limit').textContent=d;if(r>=a){const e=document.getElementById('monetag-ad-task');e.style.opacity='0.5';e.style.pointerEvents='none';}if(c>=s){const e=document.getElementById('gigapub-ad-task');e.style.opacity='0.5';e.style.pointerEvents='none';}if(i>=d){const e=document.getElementById('adsgram-ad-task');e.style.opacity='0.5';e.style.pointerEvents='none';}
        fetchAndRenderTasks();renderHistory(document.getElementById('full-history-list'),50);renderReferredUsers();calculateSwap();}function resetCoinFlipGame(){const e=document.getElementById('coin');e.classList.remove('coin-spinning','coin-final');e.style.transform='rotateY(0deg)';e.style.transition='none';document.getElementById('coin-game-result').style.display='none';document.querySelectorAll('.side-btn').forEach(e=>{e.classList.remove('win','lose');if(e.id==='choose-glx')e.classList.add('active');else e.classList.remove('active');});_.isFlipping=!1;_.chosenSide='glx';_.betAmount=1e3;_.currentRotation=0;document.getElementById('coin-bet-amount').value=1e3;updateBetButtons();}window.initCoinFlipGame=function(){resetCoinFlipGame();};function updateBetButtons(){const e=[1e3,5e3,1e4,25e3];const t=document.querySelectorAll('.bet-btn');t.forEach((t,n)=>{if(n<e.length){t.textContent=e[n]>=1e3?e[n]/1e3+'k':e[n];t.dataset.amount=e[n];if(e[n]===1e3)t.classList.add('active');else t.classList.remove('active');}});}window.setBetAmount=function(e){_.betAmount=e;document.getElementById('coin-bet-amount').value=e;document.querySelectorAll('.bet-btn').forEach(t=>{t.classList.remove('active');const n=parseInt(t.dataset.amount)||0;if(n===e)t.classList.add('active');});};window.chooseSide=function(e){_.chosenSide=e;document.querySelectorAll('.side-btn').forEach(t=>{t.classList.remove('active');t.classList.remove('win');t.classList.remove('lose');});const t=e==='glx'?document.getElementById('choose-glx'):document.getElementById('choose-gold');t.classList.add('active');};window.flipCoin=function(){if(_.isFlipping)return;const e=document.getElementById('coin-bet-amount');const n=parseInt(e.value);if(!n||n<1e3){showStyledMessage("‚ùå Minimum bet is 1,000 GLX","warning","app-container");e.focus();e.style.borderColor='#e74c3c';setTimeout(()=>e.style.borderColor='',2e3);return;}
        const r=h.dogsBalance||0;if(n>r){showStyledMessage("üí∞ Insufficient GLX balance!","warning","app-container");return;}
        _.betAmount=n;_.isFlipping=!0;const c=document.getElementById('coin');c.classList.remove('coin-spinning','coin-final');c.style.transform='rotateY(0deg)';c.style.transition='none';const i=document.getElementById('coin-game-result');i.style.display='none';document.querySelectorAll('.bet-btn').forEach(e=>{e.style.opacity='0.5';e.style.pointerEvents='none';});document.querySelectorAll('.side-btn').forEach(e=>{e.classList.remove('win','lose');});o.ref(`users/${t.id}/dogsBalance`).transaction(e=>{const r=(e||0)-n;return r<0?0:r;}).then(()=>{addHistory('loss',`Coin Flip Bet (${_.chosenSide.toUpperCase()})`,n,'GLX');const e=document.getElementById('flip-coin-btn');e.disabled=!0;e.innerHTML='<i class="fas fa-spinner fa-spin"></i> FLIPPING...';setTimeout(()=>{const r=Math.random()*100;const c=r<_.winChance;const i=c?_.chosenSide:_.chosenSide==='glx'?'gold':'glx';let a=0;if(i==='glx')a=720+Math.floor(Math.random()*4)*360;else a=720+180+Math.floor(Math.random()*4)*360;c.style.setProperty('--final-rotation',`${a}deg`);c.classList.add('coin-spinning');setTimeout(()=>{setTimeout(()=>{c.classList.remove('coin-spinning');c.classList.add('coin-final');showCoinFlipResult(c,i,n,a);e.disabled=!1;e.innerHTML='<i class="fa-solid fa-play"></i> FLIP COIN';document.querySelectorAll('.bet-btn').forEach(e=>{e.style.opacity='1';e.style.pointerEvents='auto';});_.isFlipping=!1;_.lastFlipResult=i;_.currentRotation=a%360;setTimeout(()=>{renderUI();},500);},2500);},50);},100);}).catch(e=>{console.error("Error deducting bet:",e);showStyledMessage("Error processing bet. Please try again.","error","app-container");_.isFlipping=!1;const n=document.getElementById('flip-coin-btn');n.disabled=!1;n.innerHTML='<i class="fa-solid fa-play"></i> FLIP COIN';document.querySelectorAll('.bet-btn').forEach(e=>{e.style.opacity='1';e.style.pointerEvents='auto';});});};function showCoinFlipResult(e,n,o,r){const c=document.getElementById('coin-game-result');const i=document.getElementById('coin-result-text');const a=document.getElementById('coin-win-amount');const s=document.getElementById('coin-loss-amount');a.style.display='none';s.style.display='none';if(e){const e=o*2;o.ref(`users/${t.id}/dogsBalance`).transaction(t=>(t||0)+e);i.innerHTML=`üéâ <strong>YOU WIN!</strong><br>${_.chosenSide.toUpperCase()} appeared!`;i.style.color='#27ae60';a.textContent=`+${e.toLocaleString()} GLX`;a.style.display='block';addHistory('earn',`Coin Flip Win (${_.chosenSide})`,e,'GLX');const n=_.chosenSide==='glx'?document.getElementById('choose-glx'):document.getElementById('choose-gold');n.classList.add('win');n.classList.remove('active');if(e>=5e3){setTimeout(()=>{showStyledMessage(`üéä BIG WIN! You won ${e.toLocaleString()} GLX!`,"success","app-container");},500);}}else{const e=o;i.innerHTML=`üò¢ <strong>YOU LOSE</strong><br>${n.toUpperCase()} appeared`;i.style.color='#e74c3c';s.textContent=`-${e.toLocaleString()} GLX`;s.style.display='block';const o=_.chosenSide==='glx'?document.getElementById('choose-glx'):document.getElementById('choose-gold');o.classList.add('lose');o.classList.remove('active');}
        c.style.display='block';const d=document.getElementById('coin');setTimeout(()=>{d.style.transform=`rotateY(${r}deg)`;},100);}function initPromoCodes(){const e=document.getElementById('redeem-code-btn');const n=document.getElementById('promo-code-input');if(e)e.addEventListener('click',handlePromoCode);if(n)n.addEventListener('keypress',function(e){if(e.key==='Enter')handlePromoCode();});}function handlePromoCode(){const e=document.getElementById('promo-code-input');const n=document.getElementById('promo-result');const o=document.getElementById('redeem-code-btn');if(!e||!n||!o)return;const r=e.value.trim().toUpperCase();if(!r){showPromoResult('Please enter a promo code','error');return;}
        o.disabled=!0;o.innerHTML='<i class="fas fa-spinner fa-spin"></i> Checking...';setTimeout(()=>{const c={WELCOME100:100,GALAXY500:500,STAR1000:1e3,BONUS2000:2e3,VIP5000:5e3};const i=h.usedPromoCodes||[];if(i.includes(r))showPromoResult('‚ùå This code has already been used','error');else if(c[r]){const n=c[r];o.ref(`users/${t.id}`).update({dogsBalance:(h.dogsBalance||0)+n});o.ref(`users/${t.id}/usedPromoCodes`).transaction(e=>{if(!e)return[r];if(!e.includes(r))e.push(r);return e;});addHistory('earn',`Promo Code: ${r}`,n,'GLX');showPromoResult(`üéâ Success! You got +${n} GLX`,'success');e.value='';renderUI();}else showPromoResult('‚ùå Invalid or expired promo code','error');o.disabled=!1;o.innerHTML='<i class="fa-solid fa-gift"></i> Redeem';},1500);}function showPromoResult(e,n){const o=document.getElementById('promo-result');if(!o)return;o.textContent=e;o.style.display='block';if(n==='success'){o.style.background='rgba(39,174,96,0.2)';o.style.border='1px solid rgba(39,174,96,0.5)';o.style.color='#27ae60';}else if(n==='error'){o.style.background='rgba(231,76,60,0.2)';o.style.border='1px solid rgba(231,76,60,0.5)';o.style.color='#e74c3c';}else{o.style.background='rgba(255,193,7,0.2)';o.style.border='1px solid rgba(255,193,7,0.5)';o.style.color='#FFC107';}
        setTimeout(()=>{o.style.display='none';},5e3);}window.selectCat=function(e,n){document.querySelectorAll('.cat-opt').forEach(e=>e.classList.remove('active'));e.classList.add('active');C=n;const o=document.getElementById('admin-required-msg');if(n==='channel')o.style.display='block';else o.style.display='none';}function renderCreateTaskUI(){const e=document.getElementById('price-options');e.innerHTML='';const n=[100,500,1e3,2e3,5e3,1e4];n.forEach((n,o)=>{const r=`<div class="price-opt ${o===0?'active':''}" data-count="${n}" onclick="selectPrice(this)"><div class="price-count">${n.toLocaleString()}</div><div class="price-cost" id="cost-${n}">Loading...</div></div>`;e.insertAdjacentHTML('beforeend',r);});calculateCost();}window.selectPrice=function(e){document.querySelectorAll('.price-opt').forEach(e=>e.classList.remove('active'));e.classList.add('active');w=parseInt(e.dataset.count);calculateCost();}function calculateCost(){const e=g.pricePerClick||0.0015;document.querySelectorAll('.price-opt').forEach(t=>{const n=parseInt(t.dataset.count);const o=(n*e).toFixed(4);const r=t.querySelector('.price-cost');if(r)r.textContent=`${o} TON`;});y=(w*e).toFixed(4);document.getElementById('pay-amount-display').textContent=y;}window.initiatePayment=function(){const e=document.getElementById('new-task-name').value.trim();const n=document.getElementById('new-task-link').value.trim();if(!e||!n){showStyledMessage("Please fill all fields.","warning","app-container");return;}if(!n.startsWith('http')){showStyledMessage("Invalid link.","warning","app-container");return;}
        T='task_'+Math.floor(Date.now()/1e3);const o={id:T,title:e,description:`Reward: ${C.toUpperCase()}`,link:n,reward:2e3,category:'community',total:w,remaining:w,status:'pending',creator:t.id,cost:y};o.ref('tasks/'+T).set(o);const r=Math.floor(y*1e9);const c=`https://app.tonkeeper.com/transfer/${c}?amount=${r}&text=${T}`;if(window.Telegram?.WebApp)window.Telegram.WebApp.openLink(c);else window.open(c,'_blank');document.getElementById('payment-step-1').style.display='none';document.getElementById('payment-step-2').style.display='block';};window.verifyPayment=async function(){const e=document.getElementById('check-payment-btn');const n=document.getElementById('payment-status-msg');e.disabled=!0;e.textContent="Checking Blockchain...";n.textContent="Connecting to TON API...";n.style.color="#ffb300";try{const o=await fetch(`https://tonapi.io/v2/blockchain/accounts/${c}/transactions?limit=20`);const r=await o.json();if(!r.transactions)throw new Error("API Error");let i=!1;for(const e of r.transactions){if(e.in_msg&&e.in_msg.decoded_body&&e.in_msg.decoded_body.text){if(e.in_msg.decoded_body.text===T){i=!0;break;}}}
        if(i){n.textContent="Payment Verified! Activating Mission...";n.style.color="#a855f7";o.ref('tasks/'+T).update({status:'active'}).then(()=>{showStyledMessage("Success! Your mission is now live.","success","app-container");document.getElementById('payment-step-1').style.display='block';document.getElementById('payment-step-2').style.display='none';document.getElementById('new-task-name').value='';document.getElementById('new-task-link').value='';e.disabled=!1;e.textContent="Check Payment";switchTab('tasks');});}else{n.textContent="Payment not found yet. Please wait 10s and try again.";n.style.color="#e74c3c";e.disabled=!1;e.textContent="Check Again";}}catch(e){console.error(e);n.textContent="Error checking payment. Try again.";e.disabled=!1;e.textContent="Check Again";}};function initSlotsGame(){for(let e=1;e<=3;e++){const t=document.getElementById(`reel${e}`);t.innerHTML='';for(let n=0;n<10;n++){x.forEach(t=>{const n=document.createElement('div');n.className='slot-item';n.textContent=t;t.appendChild(n);});}}document.getElementById('slots-spin-btn').addEventListener('click',handleSlotsSpin);}function updateAvailableSpins(){const e=h.extraSpins||0;document.getElementById('available-spins').textContent=e;const n=document.getElementById('slots-spin-btn');if(e>0){n.disabled=!1;n.classList.remove('btn-disabled');n.textContent=`üöÄ SPIN NOW (${e} left)`;}else{n.disabled=!0;n.classList.add('btn-disabled');n.textContent="üöÄ NO SPINS LEFT";}}function handleSlotsSpin(){if(S)return;const e=h.extraSpins||0;if(e<=0){showStyledMessage("You don't have any spins left! Watch an ad to get more spins.","warning","app-container");return;}
        S=!0;const n=document.getElementById('slots-spin-btn');const o=document.getElementById('slots-result-text');const r=document.getElementById('slots-win-amount');n.disabled=!0;o.textContent="Spinning...";r.textContent="0 GLX";const c=[];for(let e=0;e<3;e++){const t=Math.floor(Math.random()*x.length);c.push(x[t]);}const i=[0,0,0];for(let e=0;e<3;e++){const n=x.indexOf(c[e]);i[e]=-((n+5)*80);}const a=[document.getElementById('reel1'),document.getElementById('reel2'),document.getElementById('reel3')];a.forEach((e,t)=>{e.style.transition='transform 2s cubic-bezier(0.1,0,0.2,1)';e.style.transform=`translateY(${i[t]}px)`;});setTimeout(()=>{const e=c.join('');let n=0;if(e==='üåüüåüüåü')n=1e4;else if(e==='ü™êü™êü™ê')n=5e3;else if(e==='üí´üí´üí´')n=2500;else if(e==='‚≠ê‚≠ê‚≠ê')n=1200;else if(c[0]==='üåü'&&c[1]==='üåü')n=700;else if(c[1]==='üåü'&&c[2]==='üåü')n=700;else if(c[0]===c[1]||c[1]===c[2]||c[0]===c[2])n=500;if(n>0){o.textContent=`üéâ You won! (${e})`;r.textContent=`+${n} GLX`;o.ref(`users/${t.id}`).update({extraSpins:e-1,dogsBalance:(h.dogsBalance||0)+n});addHistory('earn',`Galaxy Slots Win (${e})`,n,'GLX');if(n>=1e3){setTimeout(()=>{showStyledMessage(`üéä JACKPOT! You won ${n} GLX!`,"success","app-container");},500);}}else{o.textContent=`No win this time (${e})`;r.textContent="0 GLX";o.ref(`users/${t.id}`).update({extraSpins:e-1});}
        setTimeout(()=>{S=!1;updateAvailableSpins();},1e3);},2e3);}window.getExtraSpin=function(){if(typeof window.showGiga==='function'){window.showGiga().then(()=>{o.ref(`users/${t.id}/extraSpins`).transaction(e=>(e||0)+1).then(()=>{showStyledMessage("üéâ You earned an extra spin!","success","app-container");addHistory('earn','Extra Spin from Ad',1,'Spin');updateAvailableSpins();}).catch(e=>{console.error("Database error:",e);});}).catch(e=>{console.error("Ad error:",e);showStyledMessage("Ad not available.","warning","app-container");});}else{showStyledMessage("Ads system loading...","info","app-container");}}function renderDailyBonusUI(){const e=document.getElementById('daily-checkin-grid');e.innerHTML='';const n=h.dailyStreak||0;const o=h.lastDailyClaim||0;const r=Date.now();const c=864e5;const i=(r-o)>=c;const a=[2e3,3e3,5e3,7e3,9e3,12e3,15e3];for(let o=0;o<7;o++){let r='';if(o<n)r='claimed';else if(o===n&&i)r='active';const c=`<div class="daily-box ${r}"> <div style="font-size:9px;">DAY ${o+1}</div> <div style="font-weight:700;">+${a[o]}</div> </div>`;e.insertAdjacentHTML('beforeend',c);}
        const s=document.getElementById('claim-daily-btn');const d=document.getElementById('next-claim-timer');if(i){s.disabled=!1;s.classList.remove('btn-disabled');s.textContent=`Claim +${a[n]||100}`;d.textContent="Ready to claim!";}else{s.disabled=!0;s.classList.add('btn-disabled');s.textContent="Claimed";const e=c-(r-o);const n=Math.floor(e/(1e3*60*60));const o=Math.floor(e%(1e3*60*60)/(1e3*60));d.textContent=`Next reward in: ${n}h ${o}m`;}}function handleDailyClaim(){const e=Date.now();const n=h.lastDailyClaim||0;let o=h.dailyStreak||0;if(e-n>1728e5)o=0;if(o>=7)o=0;const r=[100,200,300,400,500,1e3,2500];const c=r[o];o.ref(`users/${t.id}`).update({lastDailyClaim:e,dailyStreak:o+1,dogsBalance:(h.dogsBalance||0)+c});addHistory('earn',`Daily Login Day ${o+1}`,c,'GLX');}function addHistory(e,n,o,r){const c=parseFloat(o)||0;if(c===0&&e==='swap_in'){if(n.includes('GLX Swap')){const e=parseFloat(document.getElementById('swap-input-amount').value)||0;const t=e*i;c=t;}}o.ref(`users/${t.id}/history`).push({type:e,description:n,amount:c,currency:r,date:new Date().toISOString()});}function renderHistory(e,n){e.innerHTML='';const o=h.history?Object.values(h.history).sort((e,t)=>new Date(t.date)-new Date(e.date)).slice(0,n):[];if(o.length===0){e.innerHTML='<p style="text-align:center;padding:20px 0;font-size:12px;color:var(--text-muted);">No logs yet.</p>';return;}
        o.forEach(e=>{const n=e.type.includes('withdraw')||e.type.includes('loss')||e.type.includes('swap_out');const o=n?'-':'+';const r=n?'#fff':'var(--primary-green)';let c=e.amount;if(e.currency==='TON')c=parseFloat(e.amount).toFixed(7);else c=Number(e.amount).toLocaleString();let i='https://i.ibb.co/tTkJX1Qy/logo.png';const a=e.description.toLowerCase();if(e.currency==='TON')i='https://i.ibb.co/8DsyHqwK/toncoin-ton-logo.png';else if(a.includes('ad'))i='https://i.ibb.co/tTkJX1Qy/logo.png';else if(a.includes('telegram')||a.includes('channel')||a.includes('group'))i='https://i.ibb.co/s9YygTBd/20251203-195134.png';else if(a.includes('youtube')||a.includes('subscribe'))i='https://i.ibb.co/CSz6kg9/20251203-200546.png';else if(a.includes('twitter')||a.includes('follow'))i='https://i.ibb.co/60jp6MsF/20251203-200516.png';else if(a.includes('instagram'))i='https://img.icons8.com/fluency/96/instagram-new.png';else if(a.includes('coin flip'))i='https://i.ibb.co/tTkJX1Qy/logo.png';const s=`<div class="list-card"><div class="lc-icon"><img src="${i}"></div><div class="lc-content"><div class="lc-title">${e.description}</div><div class="lc-sub">${new Date(e.date).toLocaleDateString()}</div></div><div class="lc-end"><div class="lc-val" style="color:${r}">${o}${c} ${e.currency}</div></div></div>`;e.insertAdjacentHTML('beforeend',s);});}function renderWithdrawalHistory(){o.ref('withdrawals/completed').orderByChild('timestamp').once('value',e=>{const n=document.getElementById('withdrawal-history-list');n.innerHTML='';const r=[];e.forEach(e=>{const t=e.val();r.push({...t,key:e.key});});r.sort((e,t)=>t.timestamp-e.timestamp);if(r.length===0){n.innerHTML='<p style="text-align:center;padding:20px;color:var(--text-muted);">No withdrawals yet.</p>';return;}
        r.forEach(e=>{const r=getTimeAgo(e.timestamp);const c=parseFloat(e.amount||0).toFixed(7);o.ref('users/'+e.userId).once('value').then(t=>{const o=t.val();const i=o?.name||'Anonymous';const a=o?.photoUrl||'https://i.ibb.co/tTkJX1Qy/logo.png';let s=e.account||'';if(e.method==='faucetpay'&&s.includes('@')){const[e,t]=s.split('@');if(e.length>3)s=e.charAt(0)+'*'.repeat(Math.max(3,e.length-2))+e.charAt(e.length-1)+'@'+t;}else if(e.method==='ton'){if(s.length>16)s=s.substring(0,8)+'...'+s.substring(s.length-4);}
        const d=`<div class="list-card" style="margin-bottom:8px;"><div class="lc-icon"><img src="${a}" style="border-radius:50%;"></div><div class="lc-content"><div class="lc-title">${i}</div><div class="lc-sub">${e.method==='ton'?'TON Wallet: '+s:'FaucetPay: '+s}</div></div><div class="lc-end"><div class="lc-val" style="color:var(--primary-green);">${c} TON</div><div class="lc-sub" style="font-size:9px;">${r}</div></div></div>`;n.insertAdjacentHTML('beforeend',d);}).catch(()=>{let t=e.account||'';if(e.method==='faucetpay'&&t.includes('@')){const[e,n]=t.split('@');if(e.length>3)t=e.charAt(0)+'*'.repeat(Math.max(3,e.length-2))+e.charAt(e.length-1)+'@'+n;}else if(e.method==='ton'){if(t.length>16)t=t.substring(0,8)+'...'+t.substring(t.length-4);}
        const o=`<div class="list-card" style="margin-bottom:8px;"><div class="lc-icon"><img src="https://i.ibb.co/tTkJX1Qy/logo.png" style="border-radius:50%;"></div><div class="lc-content"><div class="lc-title">Anonymous</div><div class="lc-sub">${e.method==='ton'?'TON Wallet: '+t:'FaucetPay: '+t}</div></div><div class="lc-end"><div class="lc-val" style="color:var(--primary-green);">${c} TON</div><div class="lc-sub" style="font-size:9px;">${r}</div></div></div>`;n.insertAdjacentHTML('beforeend',o);});});});}function calculateWithdrawalStats(){o.ref('withdrawals/completed').orderByChild('timestamp').once('value',e=>{let t=0,n=0;e.forEach(e=>{const o=e.val();if(o.status==='completed'||o.processed===!0){t++;n+=parseFloat(o.amount||0);}});document.getElementById('completed-withdrawals-count').textContent=t;document.getElementById('total-paid-ton').textContent=n.toFixed(4);});}function renderReferredUsers(){const e=document.getElementById('referred-users-list');const n=document.getElementById('no-referrals-msg');if(!h.referredUsers||h.referredUsers.length===0){if(e)e.innerHTML='';if(n)n.style.display='block';return;}
        if(n)n.style.display='none';if(!e)return;e.innerHTML='';const o=h.referredUsers||[];let r=0;o.forEach((o,c)=>{o.ref('users/'+o).once('value').then(c=>{const i=c.val();if(i){const c=i.name||'Anonymous User';const a=i.photoUrl||'https://i.ibb.co/tTkJX1Qy/logo.png';const s=i.joinDate?new Date(i.joinDate).toLocaleDateString():'Unknown date';const d=i.dogsBalance>0?'Active':'New';const u=`<div class="referred-user-item"><img src="${a}" class="referred-user-avatar" alt="${c}"><div class="referred-user-info"><div class="referred-user-name">${c}</div><div class="referred-user-date">Joined: ${s}</div></div><div class="referred-user-status">${d}</div></div>`;e.insertAdjacentHTML('beforeend',u);}
        r++;if(r===o.length&&r===0)n.style.display='block';}).catch(e=>{console.error('Error fetching referred user:',e);r++;});});}function handleReferral(){const e=window.Telegram?.WebApp;const n=e?.initDataUnsafe?.start_param;if(n&&n.startsWith('ref')){const o=n.replace('ref','');if(o&&o!==t.id){const n=o.ref('users/'+t.id);n.once('value',e=>{if(!e.exists()||!e.hasChild('referrer')){n.child('referrer').set(o);o.ref(`users/${o}/referredUsers`).transaction(e=>{if(!e)return[t.id];if(!e.includes(t.id))e.push(t.id);return e;});o.ref(`users/${o}/referrals`).transaction(e=>(e||0)+1);const r=g.referralReward||500;o.ref(`users/${o}/dogsBalance`).transaction(e=>(e||0)+r);o.ref(`users/${o}/history`).push({type:'referral',description:'Friend Invited',amount:r,currency:'GLX',date:new Date().toISOString()});n.child('joinDate').set(Date.now());}});}}}function fetchAndRenderTasks(){o.ref('tasks').on('value',e=>{const n=document.getElementById('partner-tasks-list');const r=document.getElementById('community-tasks-list');n.innerHTML='';r.innerHTML='';const c=e.val();if(!c){r.innerHTML='<p style="text-align:center;font-size:12px;padding:10px;">No missions.</p>';return;}
        Object.values(c).forEach(e=>{if(e.status!=='active'||e.remaining!==undefined&&e.remaining<=0)return;const n=h.completedTasks&&h.completedTasks[e.id];let r='https://img.icons8.com/fluency/96/task.png';const c=e.title.toLowerCase();const i=(e.link||'').toLowerCase();if(c.includes('bot')||i.includes('bot')||i.includes('start='))r='https://i.ibb.co/Myz4Gkmy/Picsart-25-12-10-04-34-59-799.png';else if(c.includes('telegram')||c.includes('channel')||c.includes('group')||c.includes('join')||i.includes('t.me'))r='https://i.ibb.co/5WZRG8fw/tele.png';else if(c.includes('youtube')||c.includes('subscribe'))r='https://i.ibb.co/CSz6kg9/20251203-200546.png';else if(c.includes('twitter')||c.includes('retweet')||c.includes('follow')||c.includes('x '))r='https://i.ibb.co/60jp6MsF/20251203-200516.png';else if(c.includes('instagram'))r='https://img.icons8.com/fluency/96/instagram-new.png';const a=`<div class="list-card dynamic-task ${n?'disabled':''}" style="${n?'opacity:0.5;pointer-events:none;':''}" data-id="${e.id}" data-reward="${e.reward}" data-title="${e.title}" data-link="${e.link}" onclick="handleDynamicTask(this)"><div class="lc-icon"><img src="${r}"></div><div class="lc-content"><div class="lc-title">${e.title}</div><div class="lc-sub" id="status-${e.id}">${e.description}</div></div><div class="lc-end"><div class="lc-val" id="reward-${e.id}">+${e.reward}</div></div></div>`;if(e.category==='partner')n.insertAdjacentHTML('beforeend',a);else r.insertAdjacentHTML('beforeend',a);});if(n.innerHTML==='')document.getElementById('partner-tasks-card').style.display='none';});}function setupEventListeners(){document.querySelectorAll('.nav-item').forEach(e=>e.addEventListener('click',()=>switchTab(e.dataset.target)));document.querySelectorAll('.nav-link').forEach(e=>e.addEventListener('click',e=>{e.preventDefault();switchTab(e.currentTarget.dataset.target);}));document.getElementById('monetag-ad-task').addEventListener('click',handleMonetagAd);document.getElementById('gigapub-ad-task').addEventListener('click',handleGigaAd);document.getElementById('adsgram-ad-task').addEventListener('click',handleAdsgramAd);document.getElementById('share-referral-btn').addEventListener('click',()=>window.Telegram?.WebApp.openTelegramLink(`https://t.me/share/url?url=${document.getElementById('referral-link-display').textContent}&text=Join GLX Galaxy!`));document.getElementById('copy-referral-btn').addEventListener('click',()=>navigator.clipboard.writeText(document.getElementById('referral-link-display').textContent).then(()=>showStyledMessage("Copied!","success","app-container")));document.querySelectorAll('.tab-btn').forEach(e=>e.addEventListener('click',e=>{document.querySelectorAll('.tab-btn').forEach(e=>e.classList.remove('active'));document.querySelectorAll('.podium-list').forEach(e=>e.classList.add('hidden'));e.target.classList.add('active');document.getElementById(e.target.dataset.target).classList.remove('hidden');}));document.getElementById('claim-daily-btn').addEventListener('click',handleDailyClaim);document.getElementById('coin-bet-amount').addEventListener('input',function(){const e=parseInt(this.value);if(e&&e>=1000)_.betAmount=e;});document.getElementById('floatingAddTask').addEventListener('click',function(){switchTab('create-task-page');});document.getElementById('faucetpay-email')?.addEventListener('input',maskEmail);document.querySelectorAll('.btn-filter').forEach(e=>{if(!e.hasAttribute('data-setup')){e.addEventListener('click',function(){document.querySelectorAll('.btn-filter').forEach(e=>e.classList.remove('active'));this.classList.add('active');});e.setAttribute('data-setup','true');}});}function canClickAd(){const e=Date.now();return(e-R)>=D;}function handleMonetagAd(){if(!canClickAd()){showStyledMessage("Please wait 3 seconds before clicking again.","warning","app-container");return;}
        R=Date.now();const e=g.limitMonetag||50;if((h.adsMonetag||0)>=e)return;if(!f){showStyledMessage("Loading ad...","info","app-container");return;}
        try{show_10286382({ymid:t.id}).then(()=>{const e=g.adRewardMonetag||1e3;o.ref(`users/${t.id}/adsMonetag`).transaction(e=>(e||0)+1);o.ref(`users/${t.id}/adsWatched`).transaction(e=>(e||0)+1);o.ref(`users/${t.id}/dogsBalance`).transaction(e=>(e||0)+e);addHistory('earn','Monetag Ad Reward',e,'GLX');showStyledMessage(`‚úÖ +${e} GLX added!`,"success","app-container");}).catch(e=>showStyledMessage("Ad not ready","warning","app-container"));}catch(e){showStyledMessage("Error","error","app-container");}}function handleGigaAd(){if(!canClickAd()){showStyledMessage("Please wait 3 seconds before clicking again.","warning","app-container");return;}
        R=Date.now();const e=g.limitGiga||300;if((h.adsGiga||0)>=e)return;if(typeof window.showGiga!=='function'){showStyledMessage("Giga Ads loading...","info","app-container");return;}
        window.showGiga().then(()=>{const e=g.adRewardGiga||2e3;o.ref(`users/${t.id}/adsGiga`).transaction(e=>(e||0)+1);o.ref(`users/${t.id}/adsWatched`).transaction(e=>(e||0)+1);o.ref(`users/${t.id}/dogsBalance`).transaction(e=>(e||0)+e);addHistory('earn','GigaPub Ad Reward',e,'GLX');showStyledMessage(`‚úÖ +${e} GLX added!`,"success","app-container");}).catch(e=>{console.error(e);showStyledMessage("Ad failed or closed.","warning","app-container");});}function handleAdsgramAd(){if(!canClickAd()){showStyledMessage("Please wait 3 seconds before clicking again.","warning","app-container");return;}
        R=Date.now();const e=g.limitAdsgram||300;if((h.adsAdsgram||0)>=e)return;if(!b){showStyledMessage("AdsGram not initialized","warning","app-container");return;}
        b.show().then(e=>{if(e.done){const e=g.adRewardAdsgram||2e3;o.ref(`users/${t.id}/adsAdsgram`).transaction(e=>(e||0)+1);o.ref(`users/${t.id}/dogsBalance`).transaction(e=>(e||0)+e);addHistory('earn','AdsGram Ad Reward',e,'GLX');showStyledMessage(`‚úÖ +${e} GLX added!`,"success","app-container");}}).catch(e=>{console.error("AdsGram error:",e);showStyledMessage("Ad playback error.","error","app-container");});}window.selectWithdrawalType=function(e){N=e;document.querySelectorAll('.withdrawal-type-btn').forEach(e=>e.classList.remove('active'));document.querySelector(`.withdrawal-type-btn[data-type="${e}"]`).classList.add('active');if(e==='faucetpay'){document.getElementById('faucetpay-form').style.display='block';document.getElementById('tonwallet-form').style.display='none';}else{document.getElementById('faucetpay-form').style.display='none';document.getElementById('tonwallet-form').style.display='block';}};function handleFaucetPayWithdraw(){const e=document.getElementById('faucetpay-email').value.trim();const n=parseFloat(document.getElementById('faucetpay-amount').value);const r=g.minFaucetPayWithdrawal||0.0001;const o=h.tonBalance||0;if(!e||!e.includes('@')){showStyledMessage("Please enter a valid email address.","warning","app-container");return;}
        if(n<r){showStyledMessage(`Minimum withdrawal is ${r} TON for FaucetPay.`,"warning","app-container");return;}
        if(n>o){showStyledMessage("Insufficient TON balance.","warning","app-container");return;}
        const[c,i]=e.split('@');let a='';if(c.length>3)a=c.charAt(0)+'*'.repeat(Math.max(3,c.length-2))+c.charAt(c.length-1)+'@'+i;else a='*'.repeat(c.length)+'@'+i;if(!confirm(`Withdraw ${n} TON to ${a} via FaucetPay?\n\nEmail will be partially hidden for privacy.`))return;const s={userId:t.id,account:e,maskedAccount:a,amount:n,method:'faucetpay',status:'pending',timestamp:Date.now(),processed:!1};o.ref(`users/${t.id}/tonBalance`).transaction(e=>e-n);o.ref('withdrawals/pending').push(s).then(e=>{addHistory('withdraw',`FaucetPay Withdrawal to ${a}`,n,'TON');showStyledMessage(`‚úÖ Withdrawal request submitted!\n\n${n} TON will be sent to ${a} within 1 minute.\n\nYour email is partially hidden for privacy.`,"success","app-container");document.getElementById('faucetpay-email').value='';document.getElementById('faucetpay-amount').value=r;document.getElementById('email-preview').style.display='none';switchTab('home');}).catch(e=>{showStyledMessage("Error submitting withdrawal: "+e.message,"error","app-container");});}function handleTonWalletWithdraw(){const e=document.getElementById('ton-wallet-address').value.trim();const n=parseFloat(document.getElementById('ton-withdraw-amount').value);const r=document.getElementById('ton-memo').value.trim();const c=g.minTonWithdrawal||0.05;const i=h.tonBalance||0;if(!e||e.length<5){showStyledMessage("Please enter a valid TON wallet address.","warning","app-container");return;}
        if(n<c){showStyledMessage(`Minimum withdrawal is ${c} TON for TON Wallet.`,"warning","app-container");return;}
        if(n>i){showStyledMessage("Insufficient TON balance.","warning","app-container");return;}
        let a=e;if(e.length>16)a=e.substring(0,8)+'...'+e.substring(e.length-4);if(!confirm(`Withdraw ${n} TON to ${a}?\n\nAddress: ${a}\n${r?'Memo: '+r+'\n':''}`))return;const s={userId:t.id,account:e,amount:n,method:'ton',memo:r||'',status:'pending',timestamp:Date.now(),processed:!1};o.ref(`users/${t.id}/tonBalance`).transaction(e=>e-n);o.ref('withdrawals/pending').push(s).then(()=>{addHistory('withdraw',`TON Wallet Withdrawal to ${a}`,n,'TON');showStyledMessage(`‚úÖ Withdrawal request submitted!\n\n${n} TON will be sent to your wallet within 24 hours.\n\nAddress: ${a}`,"success","app-container");document.getElementById('ton-wallet-address').value='';document.getElementById('ton-memo').value='';document.getElementById('ton-withdraw-amount').value=c;switchTab('home');}).catch(e=>{showStyledMessage("Error submitting withdrawal: "+e.message,"error","app-container");});}window.handleDynamicTask=function(e){const{id:n,reward:r,title:c,link:i}=e.dataset;const a=document.getElementById(`status-${n}`);const s=document.getElementById(`reward-${n}`);if(e.classList.contains('waiting-verify')){verifyMembership(e,i,n,r,c);return;}
        if(window.Telegram?.WebApp)window.Telegram.WebApp.openLink(i);else window.open(i,'_blank');e.classList.add('waiting-verify');a.textContent="Tap again to Verify";a.style.color="#ffb300";s.textContent="Check";s.style.fontSize="12px";}function verifyMembership(e,n,o,r,c){if(n.includes('t.me')&&!n.includes('startapp')){let a=n.split('t.me/')[1].split('/')[0];if(!a.startsWith('@')&&!a.startsWith('+'))a='@'+a;if(a.startsWith('@')){const e=`https://api.telegram.org/bot${m}/getChatMember?chat_id=${a}&user_id=${t.id}`;const n='https://api.codetabs.com/v1/proxy?quest='+encodeURIComponent(e);const r=document.getElementById(`status-${o}`);r.textContent="Verifying...";fetch(n).then(e=>e.json()).then(e=>{if(e.ok&&(e.result.status==='member'||e.result.status==='administrator'||e.result.status==='creator'))completeTask(e,o,r,c);else{showStyledMessage("‚ùå You have not joined the channel yet! Please join and try again.","warning","app-container");r.textContent="Join First!";r.style.color="#ff4444";}}).catch(e=>{console.error('Verification Error:',e);showStyledMessage("‚ö†Ô∏è Verification slow. Please ensure you joined.","warning","app-container");completeTask(e,o,r,c);});}else{if(confirm("Did you join the channel?"))completeTask(e,o,r,c);}}else completeTask(e,o,r,c);}function completeTask(e,n,o,r){o.ref(`tasks/${n}/remaining`).transaction((o,i,a)=>{if(o===null)return o;if(o<=0)return 0;return o-1;},(i,a,s)=>{if(i){showStyledMessage("System Error. Try again.","error","app-container");}else if(!a){showStyledMessage("‚ö†Ô∏è This task has ended! No rewards left.","warning","app-container");e.style.display='none';}else{o.ref(`users/${t.id}/completedTasks/${n}`).set(!0);o.ref(`users/${t.id}/dogsBalance`).transaction(e=>(e||0)+parseFloat(o));addHistory('earn',`Mission: ${r}`,o,'GLX');e.style.opacity='0.5';e.style.pointerEvents='none';document.getElementById(`status-${n}`).textContent="Completed";document.getElementById(`status-${n}`).style.color="#a855f7";document.getElementById(`reward-${n}`).textContent="Done";showStyledMessage(`‚úÖ Task Completed! +${o} GLX`,"success","app-container");}});}function switchTab(e){document.querySelectorAll('.content-section').forEach(t=>t.classList.remove('active'));document.querySelectorAll('.nav-item').forEach(t=>t.classList.remove('active'));document.getElementById(e).classList.add('active');document.querySelector(`.nav-item[data-target="${e}"]`)?.classList.add('active');const n=document.getElementById('floatingAddTask');if(e==='tasks')n.classList.remove('hidden');else n.classList.add('hidden');if(e==='leaderboard'&&!v){renderLeaderboard();v=!0;}if(e==='bonus'){const n=document.querySelector('.bonus-grid');n.style.display='grid';document.getElementById('coin-flip-section').style.display='none';document.getElementById('promo-codes-section').style.display='none';document.getElementById('daily-streak-section').style.display='none';document.getElementById('galaxy-slots-section').style.display='none';renderDailyBonusUI();updateAvailableSpins();resetCoinFlipGame();}if(e==='withdrawal-history'){renderWithdrawalHistory();calculateWithdrawalStats();}if(e==='referrals')renderReferredUsers();if(e==='competition')updateCompetitionUI();if(e==='galaxy-log-page')renderGalaxyLog();if(e==='user-withdrawals')updateUserWithdrawalsStats();window.scrollTo(0,0);}function renderLeaderboard(){o.ref('users').orderByChild('dogsBalance').limitToLast(50).once('value',e=>{const t=[];e.forEach(e=>t.push(e.val()));const n=[...t].sort((e,t)=>(t.referrals||0)-(e.referrals||0));fillList(n,'invites-leaderboard-list','referrals','Frens');const r=[...t].sort((e,t)=>(t.dogsBalance||0)-(e.dogsBalance||0));fillList(r,'earnings-leaderboard-list','dogsBalance','GLX');});}function fillList(e,t,n,o){const r=document.getElementById(t);r.innerHTML='';if(e.length===0){r.innerHTML='<p style="text-align:center;padding:20px;">No Data</p>';return;}
        e.slice(0,50).forEach((e,t)=>{const r=n==='dogsBalance'?Math.floor(e[n]||0).toLocaleString():(e[n]||0);const c=`<div class="list-card"><div style="width:30px;font-weight:800;color:#fff;">#${t+1}</div><div class="lc-content"><div class="lc-title">${e.name||'Anonymous'}</div></div><div class="lc-end"><div class="lc-val" style="color:#fff;">${r} ${o}</div></div></div>`;r.insertAdjacentHTML('beforeend',c);});}initializeApp();});}
    </script>
</body>
</html>

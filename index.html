<!doctype html>
<html lang="ar">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>اختبار Adextra - Fullscreen</title>

  <!-- Adextra script (from user) -->
  <script async src="https://partner.adextra.io/jt/32c670c3f0c8368d2fc7885022fd7eff69ef1c84.js"></script>

  <style>
    body { font-family: Arial, sans-serif; direction: rtl; padding: 20px; background:#f7f9fb; color:#222; }
    .container { max-width:900px; margin:0 auto; background:#fff; padding:20px; border-radius:8px; box-shadow:0 6px 18px rgba(0,0,0,0.08); }
    h1 { font-size:20px; margin-bottom:8px; }
    p { line-height:1.5; }
    #ad-area { margin:20px 0; min-height: 300px; display:flex; align-items:center; justify-content:center; border:2px dashed #ddd; border-radius:6px; background:linear-gradient(180deg,#fff,#fbfdff); }
    button { padding:10px 16px; border-radius:6px; border:none; cursor:pointer; background:#0b76ef; color:#fff; font-size:14px; }
    small.note { display:block; margin-top:10px; color:#666; }
  </style>
</head>
<body>
  <div class="container">
    <h1>صفحة اختبار إعلان Adextra</h1>
    <p>هذه صفحة بسيطة لتجربة الكود الذي أرسلتَه — السكربت والـ <code>div</code> مضمّنان. اضغط "عرض الإعلان الآن" لاختباره يدوياً، أو حمّل الصفحة ثم أعد التحميل ليعمل العرض الأوتوماتيكي.</p>

    <!-- Ad placement div -->
    <div id="32c670c3f0c8368d2fc7885022fd7eff69ef1c84" aria-label="Ad placement">
      <div id="ad-area">مكان الإعلان — إن لم يظهر قد يمنعه AdBlock أو لم يتم تهيئة السكربت بعد.</div>
    </div>

    <div>
      <button id="showAdBtn">عرض الإعلان الآن</button>
      <button id="clearBtn" style="background:#e04b4b;margin-left:8px">مسح محتوى الاختبار</button>
      <small class="note">ملاحظة: إذا كان لديك إضافة مانعة للإعلانات (AdBlock) أو سياسة CSP صارمة أو قيود شبكة، فقد لا يظهر الإعلان.</small>
    </div>

    <hr style="margin:20px 0" />

    <h2>معلومات فنية قصيرة</h2>
    <ul>
      <li>السكربت يُحمّل من: <code>https://partner.adextra.io</code></li>
      <li>تأكد من فتح الصفحة عبر <strong>HTTP/HTTPS</strong>. لفتح محلياً يُنصح بتشغيل خادم بسيط مثل: <code>python -m http.server 8000</code></li>
      <li>لو لم يظهر الإعلان جرب تعطيل AdBlock مؤقتاً أو فحص Console في أدوات المطور (F12).</li>
    </ul>
  </div>

  <script>
    const placementId = "32c670c3f0c8368d2fc7885022fd7eff69ef1c84";

    function onSuccess() {
      console.log("Ad showed successfully:", placementId);
      const area = document.getElementById('ad-area');
      if (area) area.innerText = "تم عرض الإعلان بنجاح (تحقق من الـ console وDOM).";
    }

    function onError(err) {
      console.error("Ad error for", placementId, err);
      const area = document.getElementById('ad-area');
      if (area) area.innerText = "فشل عرض الإعلان — تحقق من Console أو AdBlock وCSP.";
    }

    // محاولة استدعاء دالة العرض الموثقة من مزود الإعلان إن وُجدت
    function tryShowAd() {
      if (typeof p_adextra === "function") {
        try {
          // بعض المكتبات تأخذ (onSuccess, onError) أو (config)
          p_adextra(onSuccess, onError);
        } catch (e) {
          onError(e);
        }
      } else {
        // نفعل retry لبضع ثواني لأن السكربت يحمّل async
        console.log("p_adextra not ready yet — retrying...");
        setTimeout(tryShowAd, 300);
      }
    }

    document.addEventListener("DOMContentLoaded", () => {
      // محاولة أوتوماتيكية للعرض بعد تحميل الصفحة
      tryShowAd();
    });

    document.getElementById("showAdBtn").addEventListener("click", tryShowAd);
    document.getElementById("clearBtn").addEventListener("click", () => {
      const area = document.getElementById('ad-area');
      if (area) area.innerText = "مكان الإعلان — تم مسح الاختبار.";
      console.log("Test area cleared.");
    });
  </script>
</body>
</html>

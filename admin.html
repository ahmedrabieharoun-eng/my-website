<!DOCTYPE html>
<html lang="ar">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ููุญุฉ ุชุญูู Firebase</title>
  <!-- ุงุณุชุฎุฏุงู ุฅุตุฏุงุฑุงุช ูุชูุงููุฉ ูุน ุงููุชุตูุญ -->
  <script src="https://www.gstatic.com/firebasejs/10.13.2/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.13.2/firebase-database-compat.js"></script>
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@3.4.0/dist/tailwind.min.css" rel="stylesheet">
</head>
<body class="bg-gray-900 text-white min-h-screen">
  <div class="p-6 max-w-6xl mx-auto">
    <h1 class="text-3xl font-bold mb-4 text-center">โ๏ธ ููุญุฉ ุชุญูู Firebase</h1>

    <!-- ูุณู ุงูุฅุถุงูุฉ -->
    <div class="bg-gray-800 p-4 rounded-lg mb-6">
      <h2 class="text-xl mb-2 font-semibold">โ ุฅุถุงูุฉ ุจูุงูุงุช ุฌุฏูุฏุฉ</h2>
      <input id="newKey" placeholder="ุงูููุชุงุญ (key)" class="p-2 rounded bg-gray-700 text-white w-full mb-2" />
      <textarea id="newValue" placeholder="ุงููููุฉ (JSON ุฃู ูุต)" class="p-2 rounded bg-gray-700 text-white w-full mb-2"></textarea>
      <button id="addBtn" class="bg-green-600 px-4 py-2 rounded hover:bg-green-500">ุฅุถุงูุฉ</button>
    </div>

    <!-- ุนุฑุถ ุงูุจูุงูุงุช -->
    <div class="bg-gray-800 p-4 rounded-lg shadow-md overflow-auto max-h-[70vh]" id="dataContainer">
      <p class="text-gray-400 text-center">ุฌุงุฑู ุชุญููู ุงูุจูุงูุงุช...</p>
    </div>
  </div>

  <script>
    // ุชููุฆุฉ Firebase ุจุงุณุชุฎุฏุงู ุงูุฅุตุฏุงุฑ ุงููุชูุงูู
    const firebaseConfig = {
      apiKey: "AIzaSyAcwYjMSpnOC1_MSFpBzctqiKRmhwLOtY4",
      authDomain: "dogs-boss.firebaseapp.com",
      databaseURL: "https://dogs-boss-default-rtdb.firebaseio.com",
      projectId: "dogs-boss",
      storageBucket: "dogs-boss.firebasestorage.app",
      messagingSenderId: "778183941825",
      appId: "1:778183941825:web:45a96727e1aad043bffe40",
      measurementId: "G-EY15XEGP53"
    };

    // ุชููุฆุฉ ุงูุชุทุจูู
    const app = firebase.initializeApp(firebaseConfig);
    const db = firebase.database();
    const dbRef = firebase.database().ref('/');
    const dataContainer = document.getElementById("dataContainer");

    // ุนุฑุถ ุงูุจูุงูุงุช
    dbRef.on('value', (snapshot) => {
      const data = snapshot.val();
      if (!data) {
        dataContainer.innerHTML = "<p class='text-center text-gray-400'>๐ซ ูุง ุชูุฌุฏ ุจูุงูุงุช ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช.</p>";
        return;
      }

      let html = "";
      for (const key in data) {
        html += `
          <div class="bg-gray-700 p-3 rounded mb-3">
            <h3 class="font-bold">${key}</h3>
            <textarea id="val-${key}" class="w-full bg-gray-800 text-white p-2 rounded mt-1">${JSON.stringify(data[key], null, 2)}</textarea>
            <div class="mt-2 flex gap-2">
              <button onclick="updateData('${key}')" class="bg-blue-600 px-3 py-1 rounded hover:bg-blue-500">ุชุนุฏูู</button>
              <button onclick="deleteData('${key}')" class="bg-red-600 px-3 py-1 rounded hover:bg-red-500">ุญุฐู</button>
            </div>
          </div>
        `;
      }

      dataContainer.innerHTML = html;
    });

    // ุฏูุงู ุงูุชุญูู
    window.updateData = (key) => {
      const newVal = document.getElementById(`val-${key}`).value;
      try {
        const parsedVal = JSON.parse(newVal);
        db.ref(key).update(parsedVal);
        alert("โ ุชู ุงูุชุนุฏูู ุจูุฌุงุญ!");
      } catch (e) {
        alert("โ๏ธ ูุฌุจ ุฅุฏุฎุงู JSON ุตุงูุญ!");
      }
    };

    window.deleteData = (key) => {
      if (confirm(`ูู ุฃูุช ูุชุฃูุฏ ูู ุญุฐู ${key}ุ`)) {
        db.ref(key).remove();
      }
    };

    document.getElementById("addBtn").addEventListener("click", () => {
      const key = document.getElementById("newKey").value.trim();
      const val = document.getElementById("newValue").value.trim();
      if (!key || !val) return alert("โ๏ธ ุฃุฏุฎู ุงูููุชุงุญ ูุงููููุฉ ุฃููุงู!");

      try {
        const parsed = JSON.parse(val);
        db.ref(key).set(parsed);
        alert("โ ุชูุช ุงูุฅุถุงูุฉ ุจูุฌุงุญ!");
        // ุชูุฑูุบ ุงูุญููู ุจุนุฏ ุงูุฅุถุงูุฉ
        document.getElementById("newKey").value = '';
        document.getElementById("newValue").value = '';
      } catch {
        db.ref(key).set(val);
        alert("โ ุชูุช ุงูุฅุถุงูุฉ ููุต!");
        // ุชูุฑูุบ ุงูุญููู ุจุนุฏ ุงูุฅุถุงูุฉ
        document.getElementById("newKey").value = '';
        document.getElementById("newValue").value = '';
      }
    });

    // ุฅุถุงูุฉ ุฒุฑ ูุชูุฑูุบ ุฌููุน ุงูุจูุงูุงุช (ุงุฎุชูุงุฑู)
    function addClearAllButton() {
      const clearBtn = document.createElement('button');
      clearBtn.textContent = '๐๏ธ ุชูุฑูุบ ุฌููุน ุงูุจูุงูุงุช';
      clearBtn.className = 'bg-red-700 px-4 py-2 rounded hover:bg-red-600 mt-4';
      clearBtn.onclick = () => {
        if (confirm('โ๏ธ ูู ุฃูุช ูุชุฃูุฏ ูู ุญุฐู ุฌููุน ุงูุจูุงูุงุชุ ูุฐุง ุงูุฅุฌุฑุงุก ูุง ูููู ุงูุชุฑุงุฌุน ุนูู!')) {
          db.ref('/').remove();
          alert('โ ุชู ุญุฐู ุฌููุน ุงูุจูุงูุงุช');
        }
      };
      document.querySelector('.p-6').appendChild(clearBtn);
    }

    // ุงุณุชุฏุนุงุก ุงูุฏุงูุฉ ุจุนุฏ ุชุญููู ุงูุตูุญุฉ
    setTimeout(addClearAllButton, 1000);
  </script>
</body>
</html>

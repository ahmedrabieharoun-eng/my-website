<!DOCTYPE html>
<html lang="ar">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… Firebase</title>

  <!-- Firebase -->
  <script src="https://www.gstatic.com/firebasejs/10.13.2/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.13.2/firebase-database.js"></script>

  <!-- Tailwind -->
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@3.4.0/dist/tailwind.min.css" rel="stylesheet">
</head>

<body class="bg-gray-900 text-white min-h-screen">
  <div class="p-6 max-w-6xl mx-auto">
    <h1 class="text-3xl font-bold mb-4 text-center">âš™ï¸ Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… Firebase</h1>

    <!-- Ù‚Ø³Ù… Ø§Ù„Ø¥Ø¶Ø§ÙØ© -->
    <div class="bg-gray-800 p-4 rounded-lg mb-6">
      <h2 class="text-xl mb-2 font-semibold">â• Ø¥Ø¶Ø§ÙØ© Ø¨ÙŠØ§Ù†Ø§Øª Ø¬Ø¯ÙŠØ¯Ø©</h2>

      <input
        id="newKey"
        placeholder="Ø§Ù„Ù…ÙØªØ§Ø­ (key)"
        class="p-2 rounded bg-gray-700 text-white w-full mb-2"
      />

      <textarea
        id="newValue"
        placeholder="Ø§Ù„Ù‚ÙŠÙ…Ø© (JSON Ø£Ùˆ Ù†Øµ)"
        class="p-2 rounded bg-gray-700 text-white w-full mb-2"
      ></textarea>

      <button
        id="addBtn"
        class="bg-green-600 px-4 py-2 rounded hover:bg-green-500"
      >
        Ø¥Ø¶Ø§ÙØ©
      </button>
    </div>

    <!-- Ø¹Ø±Ø¶ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª -->
    <div
      class="bg-gray-800 p-4 rounded-lg shadow-md overflow-auto max-h-[70vh]"
      id="dataContainer"
    >
      <p class="text-gray-400 text-center">Ø¬Ø§Ø±Ù ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª...</p>
    </div>
  </div>

  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.13.2/firebase-app.js";
    import {
      getDatabase,
      ref,
      onValue,
      set,
      remove,
      update
    } from "https://www.gstatic.com/firebasejs/10.13.2/firebase-database.js";

    /* ===============================
       Firebase Config (Ø§Ù„Ø¬Ø¯ÙŠØ¯)
    ================================ */
    const firebaseConfig = {
      apiKey: "AIzaSyC0dke6nskYVo2B6kbqC3IvgArGBRzU8Tg",
      authDomain: "cash-jungle-bot.firebaseapp.com",
      databaseURL: "https://cash-jungle-bot-default-rtdb.asia-southeast1.firebasedatabase.app",
      projectId: "cash-jungle-bot",
      storageBucket: "cash-jungle-bot.firebasestorage.app",
      messagingSenderId: "361914347430",
      appId: "1:361914347430:web:3d13817f7c0b8411552967",
      measurementId: "G-C0JYFKC0P8"
    };

    /* ===============================
       Initialize Firebase
    ================================ */
    const app = initializeApp(firebaseConfig);
    const db = getDatabase(app);
    const dbRef = ref(db, "/");
    const dataContainer = document.getElementById("dataContainer");

    /* ===============================
       Ø¹Ø±Ø¶ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
    ================================ */
    onValue(dbRef, (snapshot) => {
      const data = snapshot.val();

      if (!data) {
        dataContainer.innerHTML =
          "<p class='text-center text-gray-400'>ğŸš« Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª ÙÙŠ Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª.</p>";
        return;
      }

      let html = "";

      for (const key in data) {
        html += `
          <div class="bg-gray-700 p-3 rounded mb-3">
            <h3 class="font-bold">${key}</h3>

            <textarea
              id="val-${key}"
              class="w-full bg-gray-800 text-white p-2 rounded mt-1"
            >${JSON.stringify(data[key], null, 2)}</textarea>

            <div class="mt-2 flex gap-2">
              <button
                onclick="updateData('${key}')"
                class="bg-blue-600 px-3 py-1 rounded hover:bg-blue-500"
              >
                ØªØ¹Ø¯ÙŠÙ„
              </button>

              <button
                onclick="deleteData('${key}')"
                class="bg-red-600 px-3 py-1 rounded hover:bg-red-500"
              >
                Ø­Ø°Ù
              </button>
            </div>
          </div>
        `;
      }

      dataContainer.innerHTML = html;
    });

    /* ===============================
       ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
    ================================ */
    window.updateData = (key) => {
      const newVal = document.getElementById(`val-${key}`).value;

      try {
        const parsedVal = JSON.parse(newVal);
        update(ref(db, key), parsedVal);
        alert("âœ… ØªÙ… Ø§Ù„ØªØ¹Ø¯ÙŠÙ„ Ø¨Ù†Ø¬Ø§Ø­!");
      } catch (e) {
        alert("âš ï¸ ÙŠØ¬Ø¨ Ø¥Ø¯Ø®Ø§Ù„ JSON ØµØ§Ù„Ø­!");
      }
    };

    /* ===============================
       Ø­Ø°Ù Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
    ================================ */
    window.deleteData = (key) => {
      if (confirm(`Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù ${key}ØŸ`)) {
        remove(ref(db, key));
      }
    };

    /* ===============================
       Ø¥Ø¶Ø§ÙØ© Ø¨ÙŠØ§Ù†Ø§Øª Ø¬Ø¯ÙŠØ¯Ø©
    ================================ */
    document.getElementById("addBtn").addEventListener("click", () => {
      const key = document.getElementById("newKey").value.trim();
      const val = document.getElementById("newValue").value.trim();

      if (!key || !val) {
        alert("âš ï¸ Ø£Ø¯Ø®Ù„ Ø§Ù„Ù…ÙØªØ§Ø­ ÙˆØ§Ù„Ù‚ÙŠÙ…Ø© Ø£ÙˆÙ„Ø§Ù‹!");
        return;
      }

      try {
        const parsed = JSON.parse(val);
        set(ref(db, key), parsed);
        alert("âœ… ØªÙ…Øª Ø§Ù„Ø¥Ø¶Ø§ÙØ© Ø¨Ù†Ø¬Ø§Ø­!");
      } catch {
        set(ref(db, key), val);
        alert("âœ… ØªÙ…Øª Ø§Ù„Ø¥Ø¶Ø§ÙØ© ÙƒÙ†Øµ!");
      }
    });
  </script>
</body>
</html>
